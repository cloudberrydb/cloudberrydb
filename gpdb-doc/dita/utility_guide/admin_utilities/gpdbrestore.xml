<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1">
  <title id="kr142557">gpdbrestore</title>
  <body>
    <p>Restores a database from a set of dump files generated by <codeph><xref
          href="gpcrondump.xml#topic1" type="topic" format="dita"/></codeph>.</p>
    <note>This utility is deprecated and will not be supported after the end of Greenplum Database
      5.x Support Life.</note>
    <section id="section2">
      <title>Synopsis</title>
      <codeblock><b>gpdbrestore</b> { <b>-t</b> <varname>timestamp_key</varname> { [<b>-L</b>] |
   [<b>--netbackup-service-host</b> <varname>netbackup_server</varname> 
   [<b>--netbackup-block-size</b> <varname>size</varname>] ] }
   <b>-b</b> <varname>YYYYMMDD</varname> | <b>-R</b> <varname>hostname</varname>:<varname>path_to_dumpset</varname> | <b>-s</b> <varname>database_name</varname> } 
   [<b>--noplan</b>] [<b>--noanalyze</b>] [<b>-u</b> backup_directory] [<b>--list-backup</b>]
   [<b>--prefix prefix_string</b>] [<b>--report-status-dir</b> <varname>report_directory</varname>]
   [<b>-S</b> <varname>schema_name </varname>]
   [<b>-T</b> <varname>schema.table </varname>] [<b>--table-file</b> <varname>file_name</varname>] [<b>--truncate</b>] [<b>-e</b>]
   [<b>-m</b>]
   [<b>-restore-stats</b> [<b>include</b> | <b>only</b>]]
   [<b>-G</b> [<b>include</b> | <b>only</b>]] [<b>--change-schema</b> <varname>schema_name</varname>] 
   [<b>-B </b> <varname>parallel_processes</varname>] [<b>-d</b> <varname>master_data_directory</varname>] [<b>-a</b>] [<b>-q</b>] 
   [<b>-l</b> <varname>logfile_directory</varname>] [<b>-v</b>]
   [<b>--ddboost</b> [<b>--ddboost-storage-unit</b>=<varname>unit-ID</varname>] ]
   [<b>--redirect</b> <varname>database_name</varname> ]

<b>gpdbrestore</b> <b>-?</b> 

<b>gpdbrestore</b> <b>--version</b></codeblock>
    </section>
    <section id="section3">
      <title>Description</title>
      <p>The <codeph>gpdbrestore</codeph> utility recreates the data definitions (schema) and user
        data in a Greenplum database using the script files created by <codeph><xref
            href="gpcrondump.xml#topic1" type="topic" format="dita"/></codeph> operations. </p>
      <p>When you restore from an incremental backup, the <codeph>gpdbrestore</codeph> utility
        assumes the complete backup set is available. The complete backup set includes the following
        backup files:</p>
      <ul>
        <li id="kr142575">The last full backup before the specified incremental backup</li>
        <li id="kr142576">All incremental backups created between the time of the full backup the
          specified incremental backup</li>
      </ul>
      <p>The <codeph>gpdbrestore</codeph> utility provides the following functionality:</p>
      <ul>
        <li id="kr142578">Automatically reconfigures for compression. </li>
        <li id="kr142579">Validates the number of dump files are correct (for primary only, mirror
          only, primary and mirror, or a subset consisting of some mirror and primary segment dump
          files).</li>
        <li id="kr142580">If a failed segment is detected, restores to active segment
          instances.</li>
        <li id="kr142581">Except when restoring data from a NetBackup server, you do not need to
          know the complete timestamp key (<codeph>-t</codeph>) of the backup set to restore.
          Additional options are provided to instead give just a date (<codeph>-b</codeph>), backup
          set directory location (<codeph>-R</codeph>), or database name (<codeph>-s</codeph>) to
          restore.</li>
        <li id="kr142582">The <codeph>-R</codeph> option allows the ability to restore from a backup
          set located on a host outside of the Greenplum Database array (archive host). Ensures that
          the correct dump file goes to the correct segment instance.</li>
        <li id="kr142586">Identifies the database name automatically from the backup set.</li>
        <li id="kr142587">Allows you to restore particular tables only (<codeph>-T</codeph> option)
          instead of the entire database. Note that single tables are not automatically dropped or
          truncated prior to restore.<p>Performs an <codeph>ANALYZE</codeph> operation on the tables
            that are restored. You can disable the <codeph>ANALYZE</codeph> operation by specifying
            the option <codeph>--noanalyze</codeph>. </p></li>
        <li id="kr142588">Can restore global objects such as roles and tablespaces
            (<codeph>-G</codeph> option).</li>
        <li id="kr142589">Detects if the backup set is primary segments only or primary and mirror
          segments and performs the appropriate restore operation.</li>
        <li id="kr142590">Allows you to drop the target database before a restore in a single
          operation.</li>
      </ul>
      <p>The backups contain the database-level settings for the server configuration parameters
          <codeph>gp_default_storage_options</codeph>, <codeph>optimizer</codeph>, and
          <codeph>search_path</codeph>, the settings are restored when you perform a restore
        operation and specify the <codeph>-e</codeph> option to create an empty target database
        before performing a restore operation.</p>
      <note type="important">When restoring table data to an existing table, the utility assumes
        that the database table definition is the same as the table that was backed up. The utility
        does not check the table definitions.</note>
    </section>
    <section><b>Database, Schema, and Table Names</b>
      <p>You can specify names of databases, schemas, and tables that contain these special
        characters. </p>
      <p>
        <codeph>" ' ` ~ # $ % ^ &amp; * ( ) _ - + [ ] { } > &lt; \ | ; : / ?</codeph> and the space
          character.<note>The characters <codeph>!</codeph>, comma (<codeph>,</codeph>), and period
            (<codeph>.</codeph>) are not supported. Also, the tab (<codeph>\t</codeph>) and newline
            (<codeph>\n</codeph>) characters are not supported.</note></p>
      <p>When the name contains special characters and is specified on the command line, the name
        must be enclosed in double quotes (<codeph>"</codeph>). Double quotes are optional for names
        that do not contain special characters. For example, either use of quotes is valid on the
        command line <codeph>"my#1schema".mytable</codeph> or
          <codeph>"my#1schema"."mytable"</codeph>. Within the name, these special characters must be
        escaped with a backslash (<codeph>\</codeph>) : <codeph>" ` $ \</codeph> .</p>
      <p>When the name is specified in an input file, the name must <i>not</i> be enclosed in double
        quotes. Special characters do not require escaping. </p></section>
    <section id="data_domain"><b>Restoring from a Data Domain System with DD Boost</b><p>When you
        create a backup with <codeph>gpcrondump</codeph> using DD Boost, the backup is stored on a
        Data Domain system storage unit. When restore the backup, you must use the same storage unit
        ID that was used when you backed up the data. You can use the <codeph>gpcrondump</codeph>
        option <codeph>--ddboost-show-config</codeph> to display the current DD Boost configuration
        information that includes the storage unit ID. </p><p>For information about using DD Boost
        and Data Domain systems with Greenplum Database, see "Backing Up and Restoring Databases" in
        the <cite>Greenplum Database Administrator Guide</cite>. </p><p>NetBackup is not compatible
        with DD Boost. Both NetBackup and DD Boost cannot be used in a single back up
      operation.</p></section>
    <section><b>Restoring a Database from NetBackup</b>
      <p>Greenplum Database must be configured to communicate with the Veritas NetBackup master
        server that is used to restore database data. See the <cite>Greenplum Database System
          Administrator Guide</cite> for information about configuring Greenplum Database and
        NetBackup.</p><p>When restoring from NetBackup server, you must specify the timestamp of the
        backup with the <codeph>-t</codeph> option.</p><p>When restoring a large amount of data, set
        the NetBackup <codeph>CLIENT_READ_TIMEOUT</codeph> option to a value that is at least twice
        the expected duration of the operation (in seconds). The
          <codeph>CLIENT_READ_TIMEOUT</codeph> default value is <codeph>300</codeph> seconds (5
        minutes).</p><p>NetBackup is not compatible with DD Boost. Both NetBackup and DD Boost
        cannot be used in a single back up operation.</p></section>
    <section><b>Restoring a Database with Named Pipes</b>
      <p>If you used named pipes when you backed up a database with <codeph>gpcrondump</codeph>,
        named pipes with the backup data must be available when restoring the database from the
        backup.</p></section>
    <section><b>Error Reporting</b>
      <p>After a restore operation completes, the utility checks the <codeph>gpdbrestore</codeph>
        status file for SQL execution errors and displays a warning if an error is found. The
        default location of the restore status files are in the
            <codeph>db_dumps/<varname>date</varname>/</codeph> directory.</p></section>
    <section id="section6">
      <title>Options</title>
      <parml>
        <plentry>
          <pt>-a (do not prompt)</pt>
          <pd>Do not prompt the user for confirmation.</pd>
        </plentry>
        <plentry>
          <pt>-b <varname>YYYYMMDD</varname></pt>
          <pd>Looks for dump files in the segment data directories on the Greenplum Database array
            of hosts in <codeph>db_dumps/</codeph><varname>YYYYMMDD</varname>. If
              <codeph>--ddboost</codeph> is specified, the systems looks for dump files on the Data
            Domain Boost host.</pd>
        </plentry>
        <plentry>
          <pt>-B <varname>parallel_processes</varname></pt>
          <pd>The number of segments to check in parallel for pre/post-restore validation. If not
            specified, the utility will start up to 60 parallel processes depending on how many
            segment instances it needs to restore.</pd>
        </plentry>
        <plentry>
          <pt>--change-schema=<varname>schema_name</varname></pt>
          <pd>Optional. Restores tables from a backup created with <codeph>gpcrondump</codeph> to a
            different schema. The <varname>schema_name</varname> must exist in the database. If the
            schema does not exist, the utility returns an error. System catalog schemas are not
            supported.</pd>
          <pd>You must specify tables to restore with the <codeph>-T</codeph> and
              <codeph>--table-file</codeph> options. If a table that is being restored exists in
              <varname>schema-name</varname>, the utility returns a warning and attempts to append
            the data to the table from the backup. You can specify the <codeph>--trunctate</codeph>
            option to truncate table data before restoring data to the table from the backup. </pd>
          <pd>This option is not supported if <codeph>-S</codeph> is specified.</pd>
        </plentry>
        <plentry>
          <pt>-d <varname>master_data_directory</varname></pt>
          <pd>Optional. The master host data directory. If not specified, the value set for
              <codeph>$MASTER_DATA_DIRECTORY</codeph> will be used.</pd>
        </plentry>
        <plentry>
          <pt>--ddboost [--ddboost-storage-unit=<varname>unit-ID</varname> ]</pt>
          <pd>Use Data Domain Boost for this restore operation, if the <codeph>--ddboost</codeph>
            option was specified when the data was backed up with the <codeph>gpcrondump</codeph>
            utility. Before using Data Domain Boost, make sure the one-time Data Domain Boost
            credential setup is complete. </pd>
          <pd>The <codeph>--ddboost-storage-unit</codeph> option is optional. When restoring a
            backup from a Data Domain server, you must use the same storage unit that was used when
            you backed up the data. </pd>
          <pd>See <xref href="#topic1/data_domain" format="dita">Restoring from a Data Domain System
              with DD Boost</xref>.</pd>
          <pd>If you backed up Greenplum Database configuration files with the
              <codeph>gpcrondump</codeph> option <codeph>-g</codeph> and specified the
              <codeph>--ddboost</codeph> option, you must manually restore the backup from the Data
            Domain system. The configuration files must be restored for the Greenplum Database
            master and all the hosts and segments. The backup location on the Data Domain system is
            the directory
              <codeph><varname>unit_ID</varname>/</codeph><codeph>backup_directory</codeph><codeph>/</codeph><varname>date</varname>.
            The <codeph>backup_directory</codeph> is set when you specify the Data Domain
            credentials with <codeph>gpcrondump</codeph>. The <varname>unit_ID</varname> is the Data
            Domain system storage unit that was used when you backed up the database.</pd>
          <pd>This option is not supported if <codeph>--netbackup-service-host</codeph> is
            specified. </pd>
        </plentry>
        <plentry>
          <pt>-e (create target database before restore)</pt>
          <pd>Creates the target database and then performs a restore operation. If the target
            database exists, drops the existing database before creating the database and performing
            a restore operation. </pd>
          <pd>The utility restores database-level settings for the server configuration parameters
              <codeph>gp_default_storage_options</codeph>, <codeph>optimizer</codeph>, and
              <codeph>search_path</codeph>.</pd>
        </plentry>
        <plentry>
          <pt>-G [include | only] (restore global objects) </pt>
          <pd>Restores database metadata information that is not associated with a specific schema
            or table, such as roles and tablespaces, if the global object dump file
                <codeph>db_dumps/<varname>date</varname>/<varname>prefix_string_</varname>gp_global_-1_1_<varname>timestamp</varname></codeph>
            is found in the master data directory. The global object file is created with the
              <codeph>gpcrondump</codeph> option <codeph>-G</codeph>.<ul id="ul_xx1_44g_h5">
              <li>The keyword <codeph>include</codeph> restores global objects in addition to
                performing a restore. This is the default if no keyword is specified.</li>
              <li>The keyword <codeph>only</codeph> restores only global objects. No other database
                objects or database table data are restored.</li>
            </ul></pd>
          <pd>The <codeph>-m</codeph> option restores metadata associated with schemas or
            tables.</pd>
        </plentry>
        <plentry>
          <pt>-l <varname>logfile_directory</varname></pt>
          <pd>The directory to write the log file. Defaults to <codeph>~/gpAdminLogs</codeph>. </pd>
        </plentry>
        <plentry>
          <pt>--list-backup</pt>
          <pd>Lists the set of full and incremental backup sets required to perform a restore based
            on the timestamp_key specified with the <codeph>-t</codeph> option and the location of
            the backup set. </pd>
          <pd>This option is supported only if the <varname>timestamp_key</varname> is for an
            incremental backup.</pd>
        </plentry>
        <plentry>
          <pt>-L (list tablenames in backup set)</pt>
          <pd>When used with the <codeph>-t</codeph> option, lists the table names that exist in the
            named backup set and exits. Does not perform a restore.</pd>
        </plentry>
        <plentry>
          <pt>-m (restore metadata only)</pt>
          <pd>
            <p>Restores database metadata information such schema and table definitions and
              information created by <codeph>SET</codeph> statements. This option does not restore
              database table data. All table and schema metadata is restored unless options are
              specified that include or exclude tables or schemas. If table or schema filters are
              specified, the utility restores the schema and table metadata only for the schemas and
              tables that are specified to be restored.</p>
            <p>Database information that is not associated with a specific schema or table, such as
              roles and tablespaces, is not restored. You can specify the <codeph>-G</codeph> option
              with this option to restore global metadata that was backed up with the
                <codeph>gpcrondump</codeph> utility.</p>
          </pd>
          <pd>Database statistics are not restored. You can specify the
              <codeph>--restore-stats</codeph> option to restore statistics that were backed up with
            the <codeph>gpcrondump</codeph> utility.</pd>
          <pd>Not supported with the <codeph>--noplan</codeph> or <codeph>--noanalyze</codeph>
            options.</pd>
        </plentry>
        <plentry>
          <pt>--netbackup-block-size <varname>size</varname></pt>
          <pd>Specify the block size, in bytes, of data being transferred from the Veritas NetBackup
            server. The default is 512 bytes.</pd>
          <pd>NetBackup options are not supported if DDBoost backup options are specified. </pd>
        </plentry>
        <plentry>
          <pt>--netbackup-service-host <varname>netbackup_server</varname></pt>
          <pd>The NetBackup master server that Greenplum Database connects to when backing up to
            NetBackup. If you specify this option, you must specify the timestamp of the backup with
            the <codeph>-t</codeph> option. </pd>
          <pd>The maximum length for the this parameter is 127 characters.</pd>
          <pd>This option is not supported with any of the these options: <codeph>-R</codeph>,
              <codeph>-s</codeph>, <codeph>-b</codeph>, <codeph>-L</codeph>, or
              <codeph>--ddboost</codeph>.</pd>
          <pd>NetBackup options are not supported if DDBoost backup options are specified. </pd>
        </plentry>
        <plentry>
          <pt>--noanalyze</pt>
          <pd>The <codeph>ANALYZE</codeph> command is not run after a successful restore. The
            default is to run the <codeph>ANALYZE</codeph> command on restored tables. This option
            is useful if running <codeph>ANALYZE</codeph> on tables in your database requires a
            significant amount of time. </pd>
          <pd>If this option is specified, you should run <codeph>ANALYZE</codeph> manually on
            restored tables. Failure to run <codeph>ANALYZE</codeph> following a restore might
            result in poor database performance.</pd>
          <pd>Not supported with the <codeph>-m</codeph> option.</pd>
        </plentry>
        <plentry>
          <pt>--noplan</pt>
          <pd>Restores only the data backed up during the incremental backup specified by the
              <varname>timestamp_key</varname>. No other data from the complete backup set are
            restored. The full backup set containing the incremental backup must be available. </pd>
          <pd>The <codeph>--noplan</codeph> option does not truncate existing tables prior to
            restoration. To avoid loading duplicate data into existing tables, you can truncate the
            tables before performing an incremental restore with the <codeph>--noplan</codeph>
            option. </pd>
          <pd>If the <varname>timestamp_key</varname> specified with the <codeph>-t</codeph> option
            does not reference an incremental backup, an error is returned.</pd>
          <pd>Not supported with the <codeph>-m</codeph> option.</pd>
        </plentry>
        <plentry>
          <pt>--prefix <varname>prefix_string</varname></pt>
          <pd>If you specified the <codeph>gpcrondump</codeph> option <codeph>--prefix
                <varname>prefix_string</varname></codeph> to create the backup, you must specify
            this option with the <varname>prefix_string</varname> when restoring the backup.</pd>
          <pd>If you created a full backup of a set of tables with <codeph>gpcrondump</codeph> and
            specified a prefix, you can use <codeph>gpcrondump</codeph> with the options
              <codeph>--list-filter-tables</codeph> and <codeph>--prefix
                <varname>prefix_string</varname></codeph> to list the tables that were included or
            excluded for the backup.</pd>
        </plentry>
        <plentry>
          <pt>-q (no screen output)</pt>
          <pd>Run in quiet mode. Command output is not displayed on the screen, but is still written
            to the log file.</pd>
        </plentry>
        <plentry>
          <pt>-R <varname>hostname:path_to_dumpset</varname></pt>
          <pd>Allows you to provide a hostname and full path to a set of dump files. The host does
            not have to be in the Greenplum Database array of hosts, but must be accessible from the
            Greenplum master.</pd>
        </plentry>
        <plentry>
          <pt>--redirect <varname>database_name</varname></pt>
          <pd>Specify the name of the database where the data is restored. Specify this option to
            restore data to a database that is different than the database specified during back up.
            If <varname>database_name</varname> does not exist, it is created. </pd>
        </plentry>
        <plentry>
          <pt>--report-status-dir <varname>report_directory</varname></pt>
          <pd>Specifies the absolute path to the directory on the each Greenplum Database host
            (master and segment hosts) where <codeph>gpdbrestore</codeph> writes report status files
            for a restore operation. If <varname>report_directory</varname> does not exist or is not
            writable, gpdbrestore returns an error and stops. </pd>
          <pd>If this option is not specified and the <codeph>-u</codeph> option is specified,
            report status files are written to the location specified by the <codeph>-u</codeph>
            option if the <codeph>-u</codeph> location is writable. If the location specified by
              <codeph>-u</codeph> option is not writable, the report status files are written to
            segment data directories.</pd>
        </plentry>
        <plentry>
          <pt>--restore-stats [include | only]</pt>
          <pd>Specify this option to restore database statistics that were backed up with the
              <codeph>gpcrondump</codeph> utility option <codeph>--dump-stats</codeph>. <ul
              id="ul_cz3_k4g_h5">
              <li>The keyword <codeph>include</codeph> restores the statistics that were backed up
                in addition to performing a restore. This is the default if no keyword is
                specified.</li>
              <li>The keyword <codeph>only</codeph> restores only the statistics that were backed
                up. No other database objects or database data are restored.</li>
            </ul></pd>
          <pd>If this option is specified with other options that include or exclude tables or
            schemas to restore, the utility restores statistics only for the tables specified to be
            restored. </pd>
          <pd>If statistics would be restored for a table that does not exist in the database, the
            utility displays a warning. The statistics are not restored.</pd>
        </plentry>
        <plentry>
          <pt>-s <varname>database_name</varname></pt>
          <pd>Looks for latest set of dump files for the given database name in the segment data
            directories <codeph>db_dumps</codeph> directory on the Greenplum Database array of
            hosts.</pd>
        </plentry>
        <plentry>
          <pt>-S <varname>schema_name</varname></pt>
          <pd>Restore all the tables, views, indexes, functions, and sequences qualified by the
            specified schema from the backup. The <codeph>-S</codeph> option can be specified
            multiple times. System catalog schemas are not supported. The schema name must exist in
            the backup set of the database being restored. To replace the data in the schema tables
            with the data from backup, you can specify the <codeph>--truncate</codeph> option. The
            schema tables are truncated before the data is restored.</pd>
          <pd>To support functions that might be restored, all procedural languages that are in the
            backup are also restored even though they are not schema specific. External items such
            as shared libraries that are used by a language are not included in a backup.</pd>
          <pd>The <codeph>-S</codeph> option cannot be specified with the
              <codeph>--change-schema</codeph> option.</pd>
        </plentry>
        <plentry>
          <pt>-t <varname>timestamp_key</varname></pt>
          <pd>The 14 digit timestamp key that uniquely identifies a backup set of data to restore.
            It is of the form <codeph>YYYYMMDDHHMMSS</codeph>. Looks for dump files matching this
            timestamp key in the segment data directories <codeph>db_dumps</codeph> directory on the
            Greenplum Database array of hosts.</pd>
        </plentry>
        <plentry>
          <pt>-T <varname>schema.table_name</varname></pt>
          <pd>The name of a table to restore. The <codeph>-T</codeph> option can be specified
            multiple times. The named table(s) must exist in the backup set of the database being
            restored. Existing tables are not automatically truncated before data is restored from
            backup. To replace existing data in the table from backup, you can specify the
              <codeph>--truncate</codeph> option.</pd>
          <pd>Wildcard characters are not supported.</pd>
        </plentry>
        <plentry>
          <pt>--table-file <varname>file_name</varname></pt>
          <pd>Specify a file <varname>file_name</varname> that contains a list of table names to
            restore. The file contains any number of table names, listed one per line. See the
              <codeph>-T</codeph> option for information about restoring specific tables. </pd>
        </plentry>
        <plentry>
          <pt>--truncate</pt>
          <pd>Truncate table data before restoring data to the table from the backup. If this option
            is not specified, existing table data is not removed before data is restored to the
            table. </pd>
          <pd>This option is supported only when restoring a set of tables with the option
              <codeph>-S</codeph>, <codeph>-T</codeph> or <codeph>--table-file</codeph>. If a table
            to be restored does not exist in the database, the table is restored and the utility
            returns a warning message stating that the table did not exist in the database.</pd>
          <pd>This option is not supported with the <codeph>-e</codeph> option.</pd>
        </plentry>
        <plentry>
          <pt>-u <varname>backup_directory</varname></pt>
          <pd>Specifies the absolute path to the directory containing the <codeph>db_dumps</codeph>
            directory on each host. If not specified, defaults to the data directory of each
            instance to be backed up. Specify this option if you specified a backup directory with
            the <codeph>gpcrondump</codeph> option <codeph>-u</codeph> when creating a backup
            set.</pd>
          <pd>If <varname>backup_directory</varname> is not writable, backup operation report status
            files are written to segment data directories. You can specify a different location
            where report status files are written with the <codeph>--report-status-dir
              option</codeph>.<note>This option is not supported if <codeph>--ddboost</codeph> is
              specified.</note></pd>
        </plentry>
        <plentry>
          <pt>-v | --verbose</pt>
          <pd>Specifies verbose mode.</pd>
        </plentry>
        <plentry>
          <pt>--version (show utility version)</pt>
          <pd>Displays the version of this utility.</pd>
        </plentry>
        <plentry>
          <pt>-? (help)</pt>
          <pd>Displays the online help.</pd>
        </plentry>
      </parml>
    </section>
    <section id="section7">
      <title>Examples</title>
      <p>Restore the <codeph>sales</codeph> database from the latest backup files generated by
          <codeph>gpcrondump</codeph> (assumes backup files are in the segment data directories in
          <codeph>db_dumps</codeph>):</p>
      <codeblock>gpdbrestore -s sales</codeblock>
      <p>Restore a database from backup files that reside on an archive host outside the Greenplum
        Database array (command issued on the Greenplum master host):</p>
      <codeblock>gpdbrestore -R archivehostname:/data_p1/db_dumps/20160214</codeblock>
      <p>Restore global objects only (roles and tablespaces):</p>
      <codeblock>gpdbrestore -G</codeblock>
      <note>The <codeph>-R</codeph> option is not supported when restoring a backup set that
        includes incremental backups.</note>
      <p>If you restore from a backup set that contains an incremental backup, all the files in the
        backup set must be available to <codeph>gpdbrestore</codeph>. For example, the following
        timestamp keys specify a backup set. 20160514054532 is the full backup and the others are
        incremental.</p>
      <pre>20160514054532 
20160714095512 
20150914081205 
20161114064330 
20170114051246</pre>
      <p>The following <codeph>gbdbrestore</codeph> command specifies the timestamp key
        20161114064330. The incremental backup with the timestamps 20160714095512 and 20160914081205
        and the full backup must be available to perform a restore.</p>
      <codeblock>gpdbrestore -t 20161114064330</codeblock>
      <p>The following <codeph>gbdbrestore</codeph> command uses the <codeph>--noplan</codeph>
        option to restore only the data that was backed up during the incremental backup with the
        timestamp key 20161114064330. Data in the previous incremental backups and the data in the
        full backup are not restored. The <codeph>--noplan</codeph> option does not truncate
        existing tables prior to restoration. To avoid loading duplicate data into existing tables,
        you can truncate the tables before performing an incremental restore with the
          <codeph>--noplan</codeph> option. </p>
      <codeblock>gpdbrestore -t 20161114064330 --noplan</codeblock>
      <p>This gpdbrestore command restores Greenplum Database data from the data managed by
        NetBackup master server <codeph>nbu_server1</codeph>. The option <codeph>-t
          20170530090000</codeph> specifies the timestamp generated by <codeph>gpcrondump</codeph>
        when the backup was created. The <codeph>-e</codeph> option specifies that the target
        database is dropped before it is restored.</p>
      <codeblock>gpdbrestore -t 20170530090000 -e --netbackup-service-host=nbu_server1</codeblock>
    </section>
    <section id="section8">
      <title>See Also</title>
      <p>
        <codeph>
          <xref href="gpcrondump.xml#topic1" type="topic" format="dita"/>
        </codeph>
      </p>
    </section>
  </body>
</topic>
