create schema bfv_partition;
set search_path=bfv_partition;
--
-- Initial setup for all the partitioning test for this suite
--
-- start_ignore
create language plpythonu;
ERROR:  language "plpythonu" already exists
-- end_ignore
create or replace function count_operator(query text, operator text) returns int as
$$
rv = plpy.execute('EXPLAIN ' + query)
search_text = operator
result = 0
for i in range(len(rv)):
    cur_line = rv[i]['QUERY PLAN']
    if search_text.lower() in cur_line.lower():
        result = result+1
return result
$$
language plpythonu;
create or replace function find_operator(query text, operator_name text) returns text as
$$
rv = plpy.execute('EXPLAIN ' + query)
search_text = operator_name
result = ['false']
for i in range(len(rv)):
    cur_line = rv[i]['QUERY PLAN']
    if search_text.lower() in cur_line.lower():
        result = ['true']
        break
return result
$$
language plpythonu;
--
-- Tests if it produces SIGSEGV from "select from partition_table group by rollup or cube function"
--
-- SETUP
-- start_ignore
drop table if exists mpp7980;
NOTICE:  table "mpp7980" does not exist, skipping
-- end_ignore
create table mpp7980
(
 month_id date,
 bill_stmt_id  character varying(30),
 cust_type     character varying(10),
 subscription_status      character varying(30),
 voice_call_min           numeric(15,2),
 minute_per_call          numeric(15,2),
 subscription_id          character varying(15)
)
distributed by (subscription_id, bill_stmt_id)
  PARTITION BY RANGE(month_id)
    (
    start ('2009-02-01'::date) end ('2009-08-01'::date)  exclusive EVERY (INTERVAL '1 month')
    );
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_1" for table "mpp7980"
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_2" for table "mpp7980"
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_3" for table "mpp7980"
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_4" for table "mpp7980"
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_5" for table "mpp7980"
NOTICE:  CREATE TABLE will create partition "mpp7980_1_prt_6" for table "mpp7980"
    
-- TEST
select count_operator('select cust_type, subscription_status,count(distinct subscription_id),sum(voice_call_min),sum(minute_per_call) from mpp7980 where month_id =E''2009-04-01'' group by rollup(1,2);','SIGSEGV');
 count_operator 
----------------
              0
(1 row)

insert into mpp7980 values('2009-04-01','xyz','zyz','1',1,1,'1');
insert into mpp7980 values('2009-04-01','zxyz','zyz','2',2,1,'1');
insert into mpp7980 values('2009-03-03','xyz','zyz','4',1,3,'1');
select cust_type, subscription_status,count(distinct subscription_id),sum(voice_call_min),sum(minute_per_call) from mpp7980 where month_id ='2009-04-01' group by rollup(1,2);
 cust_type | subscription_status | count | sum  | sum  
-----------+---------------------+-------+------+------
           |                     |     1 | 3.00 | 2.00
 zyz       |                     |     1 | 3.00 | 2.00
 zyz       | 1                   |     1 | 1.00 | 1.00
 zyz       | 2                   |     1 | 2.00 | 1.00
(4 rows)

-- CLEANUP
-- start_ignore
drop table mpp7980;
-- end_ignore
--
-- Tests if it is using casting comparator for partition selector with compatible types
--
-- SETUP
CREATE TABLE TIMESTAMP_MONTH_rangep_STARTINCL (i1 int, f2 timestamp)
partition by range (f2)
(
  start ('2000-01-01'::timestamp) INCLUSIVE
  end (date '2001-01-01'::timestamp) EXCLUSIVE
  every ('1 month'::interval)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_1" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_2" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_3" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_4" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_5" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_6" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_7" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_8" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_9" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_10" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_11" for table "timestamp_month_rangep_startincl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startincl_1_prt_12" for table "timestamp_month_rangep_startincl"
CREATE TABLE TIMESTAMP_MONTH_rangep_STARTEXCL (i1 int, f2 timestamp)
partition by range (f2)
(
  start ('2000-01-01'::timestamp) EXCLUSIVE
  end (date '2001-01-01'::timestamp) INCLUSIVE
  every ('1 month'::interval)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_1" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_2" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_3" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_4" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_5" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_6" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_7" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_8" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_9" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_10" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_11" for table "timestamp_month_rangep_startexcl"
NOTICE:  CREATE TABLE will create partition "timestamp_month_rangep_startexcl_1_prt_12" for table "timestamp_month_rangep_startexcl"
CREATE TABLE TIMESTAMP_MONTH_listp (i1 int, f2 timestamp)
partition by list (f2)
(
  partition jan1 values ('2000-01-01'::timestamp),
  partition jan2 values ('2000-01-02'::timestamp),
  partition jan3 values ('2000-01-03'::timestamp),
  partition jan4 values ('2000-01-04'::timestamp),
  partition jan5 values ('2000-01-05'::timestamp)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "timestamp_month_listp_1_prt_jan1" for table "timestamp_month_listp"
NOTICE:  CREATE TABLE will create partition "timestamp_month_listp_1_prt_jan2" for table "timestamp_month_listp"
NOTICE:  CREATE TABLE will create partition "timestamp_month_listp_1_prt_jan3" for table "timestamp_month_listp"
NOTICE:  CREATE TABLE will create partition "timestamp_month_listp_1_prt_jan4" for table "timestamp_month_listp"
NOTICE:  CREATE TABLE will create partition "timestamp_month_listp_1_prt_jan5" for table "timestamp_month_listp"
-- TEST
-- Middle of a middle range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTINCL values (1, '2000-07-16');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = '2000-07-16';
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_TIMESTAMP('2000-07-16', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_DATE('2000-07-16', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

-- Beginning of the first range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTINCL values (2, '2000-01-01');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = '2000-01-01';
 i1 |            f2            
----+--------------------------
  2 | Sat Jan 01 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_TIMESTAMP('2000-01-01', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  2 | Sat Jan 01 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_DATE('2000-01-01', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  2 | Sat Jan 01 00:00:00 2000
(1 row)

INSERT INTO TIMESTAMP_MONTH_rangep_STARTINCL values (3, '2000-01-02');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = '2000-01-02';
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_TIMESTAMP('2000-01-02', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_DATE('2000-01-02', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

-- End of the last range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTINCL values (4, '2000-12-31');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = '2000-12-31';
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_TIMESTAMP('2000-12-31', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_DATE('2000-12-31', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

INSERT INTO TIMESTAMP_MONTH_rangep_STARTINCL values (5, '2001-01-01'); -- should fail, no such partition
ERROR:  no partition for partitioning key  (seg1 office-4-160.pa.pivotal.io:25433 pid=32245)
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = '2001-01-01';
 i1 | f2 
----+----
(0 rows)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_TIMESTAMP('2001-01-01', 'YYYY-MM-DD');
 i1 | f2 
----+----
(0 rows)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTINCL WHERE f2 = TO_DATE('2001-01-01', 'YYYY-MM-DD');
 i1 | f2 
----+----
(0 rows)

-- Range partitioning: START EXCLUSIVE, END INCLUSIVE
-- Middle of a middle range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTEXCL values (1, '2000-07-16');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = '2000-07-16';
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_TIMESTAMP('2000-07-16', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_DATE('2000-07-16', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Sun Jul 16 00:00:00 2000
(1 row)

-- Beginning of the first range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTEXCL values (2, '2000-01-01'); -- should fail, no such partition
ERROR:  no partition for partitioning key  (seg0 office-4-160.pa.pivotal.io:25432 pid=32244)
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = '2000-01-01';
 i1 | f2 
----+----
(0 rows)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_TIMESTAMP('2000-01-01', 'YYYY-MM-DD');
 i1 | f2 
----+----
(0 rows)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_DATE('2000-01-01', 'YYYY-MM-DD');
 i1 | f2 
----+----
(0 rows)

INSERT INTO TIMESTAMP_MONTH_rangep_STARTEXCL values (3, '2000-01-02');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = '2000-01-02';
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_TIMESTAMP('2000-01-02', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_DATE('2000-01-02', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  3 | Sun Jan 02 00:00:00 2000
(1 row)

-- End of the last range
INSERT INTO TIMESTAMP_MONTH_rangep_STARTEXCL values (4, '2000-12-31');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = '2000-12-31';
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_TIMESTAMP('2000-12-31', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_DATE('2000-12-31', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  4 | Sun Dec 31 00:00:00 2000
(1 row)

INSERT INTO TIMESTAMP_MONTH_rangep_STARTEXCL values (5, '2001-01-01');
SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = '2001-01-01';
 i1 |            f2            
----+--------------------------
  5 | Mon Jan 01 00:00:00 2001
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_TIMESTAMP('2001-01-01', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  5 | Mon Jan 01 00:00:00 2001
(1 row)

SELECT * FROM TIMESTAMP_MONTH_rangep_STARTEXCL WHERE f2 = TO_DATE('2001-01-01', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  5 | Mon Jan 01 00:00:00 2001
(1 row)

-- List partitioning
INSERT INTO TIMESTAMP_MONTH_listp values (1, '2000-01-03');
SELECT * FROM TIMESTAMP_MONTH_listp WHERE f2 = '2000-01-03';
 i1 |            f2            
----+--------------------------
  1 | Mon Jan 03 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_listp WHERE f2 = TO_TIMESTAMP('2000-01-03', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Mon Jan 03 00:00:00 2000
(1 row)

SELECT * FROM TIMESTAMP_MONTH_listp WHERE f2 = TO_DATE('2000-01-03', 'YYYY-MM-DD');
 i1 |            f2            
----+--------------------------
  1 | Mon Jan 03 00:00:00 2000
(1 row)

-- CLEANUP
-- start_ignore
DROP TABLE TIMESTAMP_MONTH_listp;
DROP TABLE TIMESTAMP_MONTH_rangep_STARTEXCL;
DROP TABLE TIMESTAMP_MONTH_rangep_STARTINCL;
-- end_ignore
--
-- Data Engineer can see partition key in psql
--
-- SETUP
-- start_ignore
DROP TABLE IF EXISTS T26002_T1;
NOTICE:  table "t26002_t1" does not exist, skipping
DROP TABLE IF EXISTS T26002_T2;
NOTICE:  table "t26002_t2" does not exist, skipping

CREATE TABLE T26002_T1 (empid int, departmentid int, year int, region varchar(20))
DISTRIBUTED BY (empid)
  PARTITION BY RANGE (year)
  SUBPARTITION BY LIST (region, departmentid)
    SUBPARTITION TEMPLATE (
       SUBPARTITION usa VALUES (('usa', 1)),
       SUBPARTITION europe VALUES (('europe', 2)),
       SUBPARTITION asia VALUES (('asia', 3)),
       DEFAULT SUBPARTITION other_regions)
( START (2012) END (2015) EVERY (3),
  DEFAULT PARTITION outlying_years);
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_outlying_years" for table "t26002_t1"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_2" for table "t26002_t1"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_outlying_years_2_prt_usa" for table "t26002_t1_1_prt_outlying_years"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_outlying_years_2_prt_europe" for table "t26002_t1_1_prt_outlying_years"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_outlying_years_2_prt_asia" for table "t26002_t1_1_prt_outlying_years"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_outlying_years_2_prt_other_regions" for table "t26002_t1_1_prt_outlying_years"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_2_2_prt_usa" for table "t26002_t1_1_prt_2"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_2_2_prt_europe" for table "t26002_t1_1_prt_2"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_2_2_prt_asia" for table "t26002_t1_1_prt_2"
NOTICE:  CREATE TABLE will create partition "t26002_t1_1_prt_2_2_prt_other_regions" for table "t26002_t1_1_prt_2"
-- end_ignore
-- TEST
-- expected to see the partition key
\d T26002_T1;
         Table "bfv_partition.t26002_t1"
    Column    |         Type          | Modifiers 
--------------+-----------------------+-----------
 empid        | integer               | 
 departmentid | integer               | 
 year         | integer               | 
 region       | character varying(20) | 
Number of child tables: 2 (Use \d+ to list them.)
Distributed by: (empid)
Partition by: (year)

\d t26002_t1_1_prt_2;
     Table "bfv_partition.t26002_t1_1_prt_2"
    Column    |         Type          | Modifiers 
--------------+-----------------------+-----------
 empid        | integer               | 
 departmentid | integer               | 
 year         | integer               | 
 region       | character varying(20) | 
Check constraints:
    "t26002_t1_1_prt_2_check" CHECK (year >= 2012 AND year < 2015)
Inherits: t26002_t1
Number of child tables: 4 (Use \d+ to list them.)
Distributed by: (empid)
Partition by: (region, departmentid)

\d t26002_t1_1_prt_2_2_prt_asia;
Table "bfv_partition.t26002_t1_1_prt_2_2_prt_asia"
    Column    |         Type          | Modifiers 
--------------+-----------------------+-----------
 empid        | integer               | 
 departmentid | integer               | 
 year         | integer               | 
 region       | character varying(20) | 
Check constraints:
    "t26002_t1_1_prt_2_2_prt_asia_check" CHECK (region::text = 'asia'::text AND departmentid = 3)
    "t26002_t1_1_prt_2_check" CHECK (year >= 2012 AND year < 2015)
Inherits: t26002_t1_1_prt_2
Distributed by: (empid)

\d+ T26002_T1;
                      Table "bfv_partition.t26002_t1"
    Column    |         Type          | Modifiers | Storage  | Description 
--------------+-----------------------+-----------+----------+-------------
 empid        | integer               |           | plain    | 
 departmentid | integer               |           | plain    | 
 year         | integer               |           | plain    | 
 region       | character varying(20) |           | extended | 
Child tables: t26002_t1_1_prt_2,
              t26002_t1_1_prt_outlying_years
Has OIDs: no
Distributed by: (empid)
Partition by: (year)

\d+ t26002_t1_1_prt_2;
                  Table "bfv_partition.t26002_t1_1_prt_2"
    Column    |         Type          | Modifiers | Storage  | Description 
--------------+-----------------------+-----------+----------+-------------
 empid        | integer               |           | plain    | 
 departmentid | integer               |           | plain    | 
 year         | integer               |           | plain    | 
 region       | character varying(20) |           | extended | 
Check constraints:
    "t26002_t1_1_prt_2_check" CHECK (year >= 2012 AND year < 2015)
Inherits: t26002_t1
Child tables: t26002_t1_1_prt_2_2_prt_asia,
              t26002_t1_1_prt_2_2_prt_europe,
              t26002_t1_1_prt_2_2_prt_other_regions,
              t26002_t1_1_prt_2_2_prt_usa
Has OIDs: no
Distributed by: (empid)
Partition by: (region, departmentid)

\d+ t26002_t1_1_prt_2_2_prt_asia;
            Table "bfv_partition.t26002_t1_1_prt_2_2_prt_asia"
    Column    |         Type          | Modifiers | Storage  | Description 
--------------+-----------------------+-----------+----------+-------------
 empid        | integer               |           | plain    | 
 departmentid | integer               |           | plain    | 
 year         | integer               |           | plain    | 
 region       | character varying(20) |           | extended | 
Check constraints:
    "t26002_t1_1_prt_2_2_prt_asia_check" CHECK (region::text = 'asia'::text AND departmentid = 3)
    "t26002_t1_1_prt_2_check" CHECK (year >= 2012 AND year < 2015)
Inherits: t26002_t1_1_prt_2
Has OIDs: no
Distributed by: (empid)

/*
-- test 2: Data Engineer won't see partition key for non-partitioned table
GIVEN I am a Data Engineer
WHEN I run \d on a non-partitioned table
THEN I should NOT see the partition key in the output
*/
CREATE TABLE T26002_T2 (empid int, departmentid int, year int, region varchar(20))
DISTRIBUTED BY (empid);
\d T26002_T2;
         Table "bfv_partition.t26002_t2"
    Column    |         Type          | Modifiers 
--------------+-----------------------+-----------
 empid        | integer               | 
 departmentid | integer               | 
 year         | integer               | 
 region       | character varying(20) | 
Distributed by: (empid)

\d+ T26002_T2;
                      Table "bfv_partition.t26002_t2"
    Column    |         Type          | Modifiers | Storage  | Description 
--------------+-----------------------+-----------+----------+-------------
 empid        | integer               |           | plain    | 
 departmentid | integer               |           | plain    | 
 year         | integer               |           | plain    | 
 region       | character varying(20) |           | extended | 
Has OIDs: no
Distributed by: (empid)

-- CLEANUP
-- start_ignore
DROP TABLE IF EXISTS T26002_T1;
DROP TABLE IF EXISTS T26002_T2;
-- end_ignore
-- ************ORCA ENABLED**********
--
-- MPP-23195
--
-- SETUP
-- start_ignore
set optimizer_enable_bitmapscan=on;
set optimizer_enable_indexjoin=on;
drop table if exists mpp23195_t1;
NOTICE:  table "mpp23195_t1" does not exist, skipping
drop table if exists mpp23195_t2;
NOTICE:  table "mpp23195_t2" does not exist, skipping
-- end_ignore
create table mpp23195_t1 (i int) partition by range(i) (partition pt1 start(1) end(10), partition pt2 start(10) end(20));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp23195_t1_1_prt_pt1" for table "mpp23195_t1"
NOTICE:  CREATE TABLE will create partition "mpp23195_t1_1_prt_pt2" for table "mpp23195_t1"
create index index_mpp23195_t1_i on mpp23195_t1(i);
NOTICE:  building index for child partition "mpp23195_t1_1_prt_pt1"
NOTICE:  building index for child partition "mpp23195_t1_1_prt_pt2"
create table mpp23195_t2(i int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
insert into mpp23195_t1 values (generate_series(1,19));
insert into mpp23195_t2 values (1);
-- TEST
select find_operator('select * from mpp23195_t1,mpp23195_t2 where mpp23195_t1.i < mpp23195_t2.i;', 'Dynamic Index Scan');
 find_operator 
---------------
 ['true']
(1 row)

select * from mpp23195_t1,mpp23195_t2 where mpp23195_t1.i < mpp23195_t2.i;
 i | i 
---+---
(0 rows)

-- CLEANUP
-- start_ignore
drop table if exists mpp23195_t1;
drop table if exists mpp23195_t2;
set optimizer_enable_bitmapscan=off;
set optimizer_enable_indexjoin=off;
-- end_ignore
--
-- Check we have Dynamic Index Scan operator and check we have Nest loop operator
--
-- SETUP
-- start_ignore
drop table if exists mpp21834_t1;
NOTICE:  table "mpp21834_t1" does not exist, skipping
drop table if exists mpp21834_t2;
NOTICE:  table "mpp21834_t2" does not exist, skipping
-- end_ignore
create table mpp21834_t1 (i int, j int) partition by range(i) (partition pp1 start(1) end(10), partition pp2 start(10) end(20));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp21834_t1_1_prt_pp1" for table "mpp21834_t1"
NOTICE:  CREATE TABLE will create partition "mpp21834_t1_1_prt_pp2" for table "mpp21834_t1"
create index index_1 on mpp21834_t1(i);
NOTICE:  building index for child partition "mpp21834_t1_1_prt_pp1"
NOTICE:  building index for child partition "mpp21834_t1_1_prt_pp2"
create index index_2 on mpp21834_t1(j);
NOTICE:  building index for child partition "mpp21834_t1_1_prt_pp1"
NOTICE:  building index for child partition "mpp21834_t1_1_prt_pp2"
create table mpp21834_t2(i int, j int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
-- TEST
set optimizer_enable_hashjoin = off;
select find_operator('analyze select * from mpp21834_t2,mpp21834_t1 where mpp21834_t2.i < mpp21834_t1.i;','Dynamic Index Scan');
 find_operator 
---------------
 ['false']
(1 row)

select find_operator('analyze select * from mpp21834_t2,mpp21834_t1 where mpp21834_t2.i < mpp21834_t1.i;','Nested Loop');
 find_operator 
---------------
 ['true']
(1 row)

-- CLEANUP
-- start_ignore
drop index index_2;
WARNING:  Only dropped the index "index_2"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop index index_1;
WARNING:  Only dropped the index "index_1"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop table if exists mpp21834_t2;
drop table if exists mpp21834_t1;
reset optimizer_enable_hashjoin;
-- end_ignore
--
-- A rescanning of DTS with its own partition selector (under sequence node)
--
-- SETUP
-- start_ignore
set optimizer_enable_broadcast_nestloop_outer_child=on;
drop table if exists mpp23288;
NOTICE:  table "mpp23288" does not exist, skipping
-- end_ignore
create table mpp23288(a int, b int) 
  partition by range (a)
  (
      PARTITION pfirst  END(5) INCLUSIVE,
      PARTITION pinter  START(5) EXCLUSIVE END (10) INCLUSIVE,
      PARTITION plast   START (10) EXCLUSIVE
  );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp23288_1_prt_pfirst" for table "mpp23288"
NOTICE:  CREATE TABLE will create partition "mpp23288_1_prt_pinter" for table "mpp23288"
NOTICE:  CREATE TABLE will create partition "mpp23288_1_prt_plast" for table "mpp23288"
insert into mpp23288(a) select generate_series(1,20);
analyze mpp23288;
-- TEST
select count_operator('select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on (t1.a < t2.a and t2.a =10) order by t2.a, t1.a;','Dynamic Table Scan');
 count_operator 
----------------
              2
(1 row)

select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on (t1.a < t2.a and t2.a =10) order by t2.a, t1.a;
 a  | a 
----+---
 10 | 1
 10 | 2
 10 | 3
 10 | 4
 10 | 5
 10 | 6
 10 | 7
 10 | 8
 10 | 9
(9 rows)

select count_operator('select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on (t1.a < t2.a and (t2.a = 10 or t2.a = 5 or t2.a = 12)) order by t2.a, t1.a;','Dynamic Table Scan');
 count_operator 
----------------
              2
(1 row)

select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on (t1.a < t2.a and (t2.a = 10 or t2.a = 5 or t2.a = 12)) order by t2.a, t1.a;
 a  | a  
----+----
  5 |  1
  5 |  2
  5 |  3
  5 |  4
 10 |  1
 10 |  2
 10 |  3
 10 |  4
 10 |  5
 10 |  6
 10 |  7
 10 |  8
 10 |  9
 12 |  1
 12 |  2
 12 |  3
 12 |  4
 12 |  5
 12 |  6
 12 |  7
 12 |  8
 12 |  9
 12 | 10
 12 | 11
(24 rows)

select count_operator('select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on t1.a < t2.a and t2.a = 1 or t2.a < 10 order by t2.a, t1.a;','Dynamic Table Scan');
 count_operator 
----------------
              2
(1 row)

select t2.a, t1.a from mpp23288 as t1 join mpp23288 as t2 on t1.a < t2.a and t2.a = 1 or t2.a < 10 order by t2.a, t1.a;
 a | a  
---+----
 1 |  1
 1 |  2
 1 |  3
 1 |  4
 1 |  5
 1 |  6
 1 |  7
 1 |  8
 1 |  9
 1 | 10
 1 | 11
 1 | 12
 1 | 13
 1 | 14
 1 | 15
 1 | 16
 1 | 17
 1 | 18
 1 | 19
 1 | 20
 2 |  1
 2 |  2
 2 |  3
 2 |  4
 2 |  5
 2 |  6
 2 |  7
 2 |  8
 2 |  9
 2 | 10
 2 | 11
 2 | 12
 2 | 13
 2 | 14
 2 | 15
 2 | 16
 2 | 17
 2 | 18
 2 | 19
 2 | 20
 3 |  1
 3 |  2
 3 |  3
 3 |  4
 3 |  5
 3 |  6
 3 |  7
 3 |  8
 3 |  9
 3 | 10
 3 | 11
 3 | 12
 3 | 13
 3 | 14
 3 | 15
 3 | 16
 3 | 17
 3 | 18
 3 | 19
 3 | 20
 4 |  1
 4 |  2
 4 |  3
 4 |  4
 4 |  5
 4 |  6
 4 |  7
 4 |  8
 4 |  9
 4 | 10
 4 | 11
 4 | 12
 4 | 13
 4 | 14
 4 | 15
 4 | 16
 4 | 17
 4 | 18
 4 | 19
 4 | 20
 5 |  1
 5 |  2
 5 |  3
 5 |  4
 5 |  5
 5 |  6
 5 |  7
 5 |  8
 5 |  9
 5 | 10
 5 | 11
 5 | 12
 5 | 13
 5 | 14
 5 | 15
 5 | 16
 5 | 17
 5 | 18
 5 | 19
 5 | 20
 6 |  1
 6 |  2
 6 |  3
 6 |  4
 6 |  5
 6 |  6
 6 |  7
 6 |  8
 6 |  9
 6 | 10
 6 | 11
 6 | 12
 6 | 13
 6 | 14
 6 | 15
 6 | 16
 6 | 17
 6 | 18
 6 | 19
 6 | 20
 7 |  1
 7 |  2
 7 |  3
 7 |  4
 7 |  5
 7 |  6
 7 |  7
 7 |  8
 7 |  9
 7 | 10
 7 | 11
 7 | 12
 7 | 13
 7 | 14
 7 | 15
 7 | 16
 7 | 17
 7 | 18
 7 | 19
 7 | 20
 8 |  1
 8 |  2
 8 |  3
 8 |  4
 8 |  5
 8 |  6
 8 |  7
 8 |  8
 8 |  9
 8 | 10
 8 | 11
 8 | 12
 8 | 13
 8 | 14
 8 | 15
 8 | 16
 8 | 17
 8 | 18
 8 | 19
 8 | 20
 9 |  1
 9 |  2
 9 |  3
 9 |  4
 9 |  5
 9 |  6
 9 |  7
 9 |  8
 9 |  9
 9 | 10
 9 | 11
 9 | 12
 9 | 13
 9 | 14
 9 | 15
 9 | 16
 9 | 17
 9 | 18
 9 | 19
 9 | 20
(180 rows)

-- CLEANUP
-- start_ignore
drop table if exists mpp23288;
set optimizer_enable_broadcast_nestloop_outer_child=off;
-- end_ignore
--
-- Testing whether test gives wrong results with partition tables when sub-partitions are distributed differently than the parent partition.
--
-- SETUP
-- start_ignore
drop table if exists pt;
NOTICE:  table "pt" does not exist, skipping
drop table if exists t;
NOTICE:  table "t" does not exist, skipping
-- end_ignore
create table pt(a int, b int, c int) distributed by (a) partition by range(b) (start(0) end(10) every (2));
NOTICE:  CREATE TABLE will create partition "pt_1_prt_1" for table "pt"
NOTICE:  CREATE TABLE will create partition "pt_1_prt_2" for table "pt"
NOTICE:  CREATE TABLE will create partition "pt_1_prt_3" for table "pt"
NOTICE:  CREATE TABLE will create partition "pt_1_prt_4" for table "pt"
NOTICE:  CREATE TABLE will create partition "pt_1_prt_5" for table "pt"
alter table pt_1_prt_1 set distributed randomly;
create table t(a int, b int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
insert into pt select g%10, g%2 + 1, g*2 from generate_series(1,20) g;
insert into pt values(1,1,3);
insert into t select g%10, g%2 + 1 from generate_series(1,20) g;
create index pt_c on pt(c);
NOTICE:  building index for child partition "pt_1_prt_1"
NOTICE:  building index for child partition "pt_1_prt_2"
NOTICE:  building index for child partition "pt_1_prt_3"
NOTICE:  building index for child partition "pt_1_prt_4"
NOTICE:  building index for child partition "pt_1_prt_5"
analyze t;
analyze pt;
-- TEST
SELECT COUNT(*) FROM pt, t WHERE pt.a = t.a;
 count 
-------
    42
(1 row)

SELECT COUNT(*) FROM pt, t WHERE pt.a = t.a and pt.c=4;
 count 
-------
     2
(1 row)

select a, count(*) from pt group by a; 
 a | count 
---+-------
 2 |     2
 1 |     3
 0 |     2
 3 |     2
 6 |     2
 7 |     2
 5 |     2
 4 |     2
 9 |     2
 8 |     2
(10 rows)

select b, count(*) from pt group by b;
 b | count 
---+-------
 1 |    11
 2 |    10
(2 rows)

select a, count(*) from pt where a<2 group by a;
 a | count 
---+-------
 0 |     2
 1 |     3
(2 rows)

-- CLEANUP
-- start_ignore
drop index pt_c;
WARNING:  Only dropped the index "pt_c"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop table if exists pt;
drop table if exists t;
-- end_ignore
--
-- Tests if DynamicIndexScan sets tuple descriptor of the planstate->ps_ResultTupleSlot
--
-- SETUP
-- start_ignore
drop table if exists mpp24151_t;
NOTICE:  table "mpp24151_t" does not exist, skipping
drop table if exists mpp24151_pt;
NOTICE:  table "mpp24151_pt" does not exist, skipping
-- end_ignore
create table mpp24151_t(dist int, tid int, t1 text, t2 text);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'dist' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
create table mpp24151_pt(dist int, pt1 text, pt2 text, pt3 text, ptid int) 
DISTRIBUTED BY (dist)
PARTITION BY RANGE(ptid) 
          (
          START (0) END (5) EVERY (1),
          DEFAULT PARTITION junk_data
          )
;
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_junk_data" for table "mpp24151_pt"
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_2" for table "mpp24151_pt"
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_3" for table "mpp24151_pt"
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_4" for table "mpp24151_pt"
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_5" for table "mpp24151_pt"
NOTICE:  CREATE TABLE will create partition "mpp24151_pt_1_prt_6" for table "mpp24151_pt"
create index pt1_idx on mpp24151_pt using btree (pt1);
NOTICE:  building index for child partition "mpp24151_pt_1_prt_junk_data"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_2"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_3"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_4"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_5"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_6"
create index ptid_idx on mpp24151_pt using btree (ptid);
NOTICE:  building index for child partition "mpp24151_pt_1_prt_junk_data"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_2"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_3"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_4"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_5"
NOTICE:  building index for child partition "mpp24151_pt_1_prt_6"
insert into mpp24151_pt select i, 'hello' || 0, 'world', 'drop this', i % 6 from generate_series(0,100)i;
insert into mpp24151_pt select i, 'hello' || i, 'world', 'drop this', i % 6 from generate_series(0,200000)i;
insert into mpp24151_t select i, i % 6, 'hello' || i, 'bar' from generate_series(0,10)i;
analyze mpp24151_pt;
analyze mpp24151_t;
-- TEST
set optimizer_enable_dynamictablescan = off;
select count_operator('select * from mpp24151_t, mpp24151_pt where tid = ptid and pt1 = E''hello0'';','Result');
 count_operator 
----------------
              0
(1 row)

select * from mpp24151_t, mpp24151_pt where tid = ptid and pt1 = 'hello0';
 dist | tid |   t1    | t2  | dist |  pt1   |  pt2  |    pt3    | ptid 
------+-----+---------+-----+------+--------+-------+-----------+------
    9 |   3 | hello9  | bar |    9 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   27 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   45 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   81 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   93 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   99 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   15 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   33 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   51 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   63 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   69 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |    3 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   21 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   39 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   57 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   75 | hello0 | world | drop this |    3
    9 |   3 | hello9  | bar |   87 | hello0 | world | drop this |    3
   10 |   4 | hello10 | bar |   10 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   46 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   58 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   64 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   82 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   94 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |  100 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   16 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   28 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   34 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   52 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   70 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |    4 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   22 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   40 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   76 | hello0 | world | drop this |    4
   10 |   4 | hello10 | bar |   88 | hello0 | world | drop this |    4
    3 |   3 | hello3  | bar |    9 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   27 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   45 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   81 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   93 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   99 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   15 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   33 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   51 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   63 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   69 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |    3 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   21 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   39 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   57 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   75 | hello0 | world | drop this |    3
    3 |   3 | hello3  | bar |   87 | hello0 | world | drop this |    3
    4 |   4 | hello4  | bar |   10 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   46 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   58 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   64 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   82 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   94 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |  100 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   16 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   28 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   34 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   52 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   70 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |    4 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   22 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   40 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   76 | hello0 | world | drop this |    4
    4 |   4 | hello4  | bar |   88 | hello0 | world | drop this |    4
    5 |   5 | hello5  | bar |   11 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   23 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   47 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   59 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   65 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   95 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   17 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   29 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   35 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   71 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   83 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |    5 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   41 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   53 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   77 | hello0 | world | drop this |    5
    5 |   5 | hello5  | bar |   89 | hello0 | world | drop this |    5
    8 |   2 | hello8  | bar |    8 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   26 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   32 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   44 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   62 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   80 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   92 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   98 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |    2 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   14 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   50 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   68 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   86 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   20 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   38 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   56 | hello0 | world | drop this |    2
    8 |   2 | hello8  | bar |   74 | hello0 | world | drop this |    2
    0 |   0 | hello0  | bar |   12 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   24 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   60 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   66 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   78 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |    0 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   30 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   36 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   48 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   72 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   84 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |    0 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |    6 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   18 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   42 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   54 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   90 | hello0 | world | drop this |    0
    0 |   0 | hello0  | bar |   96 | hello0 | world | drop this |    0
    1 |   1 | hello1  | bar |   25 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   43 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   61 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   67 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   79 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |    1 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   13 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   31 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   37 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   49 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   85 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |    7 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   19 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   55 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   73 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   91 | hello0 | world | drop this |    1
    1 |   1 | hello1  | bar |   97 | hello0 | world | drop this |    1
    2 |   2 | hello2  | bar |    8 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   26 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   32 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   44 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   62 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   80 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   92 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   98 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |    2 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   14 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   50 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   68 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   86 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   20 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   38 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   56 | hello0 | world | drop this |    2
    2 |   2 | hello2  | bar |   74 | hello0 | world | drop this |    2
    6 |   0 | hello6  | bar |   12 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   24 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   60 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   66 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   78 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |    0 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   30 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   36 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   48 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   72 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   84 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |    0 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |    6 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   18 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   42 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   54 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   90 | hello0 | world | drop this |    0
    6 |   0 | hello6  | bar |   96 | hello0 | world | drop this |    0
    7 |   1 | hello7  | bar |   25 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   43 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   61 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   67 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   79 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |    1 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   13 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   31 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   37 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   49 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   85 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |    7 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   19 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   55 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   73 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   91 | hello0 | world | drop this |    1
    7 |   1 | hello7  | bar |   97 | hello0 | world | drop this |    1
(188 rows)

-- CLEANUP
-- start_ignore
drop index ptid_idx;
WARNING:  Only dropped the index "ptid_idx"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop index pt1_idx;
WARNING:  Only dropped the index "pt1_idx"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop table if exists mpp24151_t;
drop table if exists mpp24151_pt;
reset optimizer_enable_dynamictablescan
-- end_ignore
--
-- No DPE (Dynamic Partition Elimination) on second child of a union under a join
--
-- SETUP
-- start_ignore
drop table if exists t;
NOTICE:  table "t" does not exist, skipping
drop table if exists p1;
NOTICE:  table "p1" does not exist, skipping
drop table if exists p2;
NOTICE:  table "p2" does not exist, skipping
drop table if exists p3;
NOTICE:  table "p3" does not exist, skipping
drop table if exists p;
NOTICE:  table "p" does not exist, skipping
-- end_ignore
create table p1 (a int, b int) partition by range(b) (start (1) end(100) every (20));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "p1_1_prt_1" for table "p1"
NOTICE:  CREATE TABLE will create partition "p1_1_prt_2" for table "p1"
NOTICE:  CREATE TABLE will create partition "p1_1_prt_3" for table "p1"
NOTICE:  CREATE TABLE will create partition "p1_1_prt_4" for table "p1"
NOTICE:  CREATE TABLE will create partition "p1_1_prt_5" for table "p1"
create table p2 (a int, b int) partition by range(b) (start (1) end(100) every (20));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "p2_1_prt_1" for table "p2"
NOTICE:  CREATE TABLE will create partition "p2_1_prt_2" for table "p2"
NOTICE:  CREATE TABLE will create partition "p2_1_prt_3" for table "p2"
NOTICE:  CREATE TABLE will create partition "p2_1_prt_4" for table "p2"
NOTICE:  CREATE TABLE will create partition "p2_1_prt_5" for table "p2"
create table p3 (a int, b int) partition by range(b) (start (1) end(100) every (20));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "p3_1_prt_1" for table "p3"
NOTICE:  CREATE TABLE will create partition "p3_1_prt_2" for table "p3"
NOTICE:  CREATE TABLE will create partition "p3_1_prt_3" for table "p3"
NOTICE:  CREATE TABLE will create partition "p3_1_prt_4" for table "p3"
NOTICE:  CREATE TABLE will create partition "p3_1_prt_5" for table "p3"
create table p (a int, b int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
create table t(a int, b int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
insert into t select g, g*10 from generate_series(1,100) g;
insert into p1 select g, g%99 +1 from generate_series(1,10000) g;
insert into p2 select g, g%99 +1 from generate_series(1,10000) g;
insert into p3 select g, g%99 +1 from generate_series(1,10000) g;
insert into p select g, g%99 +1 from generate_series(1,10000) g;
analyze t;
analyze p1;
analyze p2;
analyze p3;
analyze p;
-- TEST
select count_operator('select * from (select * from p1 union all select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 union select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 except all select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 except select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 intersect all select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 union select * from p2 union all select * from p3) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              3
(1 row)

select count_operator('select * from (select * from p1 union select * from p2 union all select * from p) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 union select * from p union all select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

select count_operator('select * from (select * from p1 union select * from p2 intersect all select * from p3) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              3
(1 row)

select count_operator('select * from (select * from p1 union select * from p intersect all select * from p2) as p_all, t where p_all.b=t.b;','Partition Selector');
 count_operator 
----------------
              2
(1 row)

-- CLEANUP
-- start_ignore
drop table t;
drop table p1;
drop table p2;
drop table p3;
drop table p;
-- end_ignore
--
-- Gracefully handle NULL partition set from BitmapTableScan, DynamicTableScan and DynamicIndexScan
--
-- SETUP
-- start_ignore
drop table if exists dts;
NOTICE:  table "dts" does not exist, skipping
drop table if exists dis;
NOTICE:  table "dis" does not exist, skipping
drop table if exists dbs;
NOTICE:  table "dbs" does not exist, skipping
-- end_ignore
create table dts(c1 int, c2 int) partition by range(c2) (start(1) end(11) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'c1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "dts_1_prt_1" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_2" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_3" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_4" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_5" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_6" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_7" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_8" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_9" for table "dts"
NOTICE:  CREATE TABLE will create partition "dts_1_prt_10" for table "dts"
create table dis(c1 int, c2 int, c3 int) partition by range(c2) (start(1) end(11) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'c1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "dis_1_prt_1" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_2" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_3" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_4" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_5" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_6" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_7" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_8" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_9" for table "dis"
NOTICE:  CREATE TABLE will create partition "dis_1_prt_10" for table "dis"
create index dis_index on dis(c3);
NOTICE:  building index for child partition "dis_1_prt_1"
NOTICE:  building index for child partition "dis_1_prt_2"
NOTICE:  building index for child partition "dis_1_prt_3"
NOTICE:  building index for child partition "dis_1_prt_4"
NOTICE:  building index for child partition "dis_1_prt_5"
NOTICE:  building index for child partition "dis_1_prt_6"
NOTICE:  building index for child partition "dis_1_prt_7"
NOTICE:  building index for child partition "dis_1_prt_8"
NOTICE:  building index for child partition "dis_1_prt_9"
NOTICE:  building index for child partition "dis_1_prt_10"
CREATE TABLE dbs(c1 int, c2 int, c3 int) partition by range(c2) (start(1) end(11) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'c1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_1" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_2" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_3" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_4" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_5" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_6" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_7" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_8" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_9" for table "dbs"
NOTICE:  CREATE TABLE will create partition "dbs_1_prt_10" for table "dbs"
create index dbs_index on dbs using bitmap(c3);
NOTICE:  building index for child partition "dbs_1_prt_1"
NOTICE:  building index for child partition "dbs_1_prt_2"
NOTICE:  building index for child partition "dbs_1_prt_3"
NOTICE:  building index for child partition "dbs_1_prt_4"
NOTICE:  building index for child partition "dbs_1_prt_5"
NOTICE:  building index for child partition "dbs_1_prt_6"
NOTICE:  building index for child partition "dbs_1_prt_7"
NOTICE:  building index for child partition "dbs_1_prt_8"
NOTICE:  building index for child partition "dbs_1_prt_9"
NOTICE:  building index for child partition "dbs_1_prt_10"
-- TEST
select find_operator('(select * from dts where c2 = 1) union (select * from dts where c2 = 2) union (select * from dts where c2 = 3) union (select * from dts where c2 = 4) union (select * from dts where c2 = 5) union (select * from dts where c2 = 6) union (select * from dts where c2 = 7) union (select * from dts where c2 = 8) union (select * from dts where c2 = 9) union (select * from dts where c2 = 10);', 'Dynamic Table Scan');
 find_operator 
---------------
 ['true']
(1 row)

(select * from dts where c2 = 1) union
(select * from dts where c2 = 2) union
(select * from dts where c2 = 3) union
(select * from dts where c2 = 4) union
(select * from dts where c2 = 5) union
(select * from dts where c2 = 6) union
(select * from dts where c2 = 7) union
(select * from dts where c2 = 8) union
(select * from dts where c2 = 9) union
(select * from dts where c2 = 10);
 c1 | c2 
----+----
(0 rows)

set optimizer_enable_dynamictablescan = off;
select find_operator('(select * from dis where c3 = 1) union (select * from dis where c3 = 2) union (select * from dis where c3 = 3) union (select * from dis where c3 = 4) union (select * from dis where c3 = 5) union (select * from dis where c3 = 6) union (select * from dis where c3 = 7) union (select * from dis where c3 = 8) union (select * from dis where c3 = 9) union (select * from dis where c3 = 10);', 'Dynamic Index Scan');
 find_operator 
---------------
 ['true']
(1 row)

(select * from dis where c3 = 1) union
(select * from dis where c3 = 2) union
(select * from dis where c3 = 3) union
(select * from dis where c3 = 4) union
(select * from dis where c3 = 5) union
(select * from dis where c3 = 6) union
(select * from dis where c3 = 7) union
(select * from dis where c3 = 8) union
(select * from dis where c3 = 9) union
(select * from dis where c3 = 10);
 c1 | c2 | c3 
----+----+----
(0 rows)

select find_operator('select * from dbs where c2= 15 and c3 = 5;', 'Bitmap Table Scan');
 find_operator 
---------------
 ['false']
(1 row)

select * from dbs where c2= 15 and c3 = 5;
 c1 | c2 | c3 
----+----+----
(0 rows)

-- CLEANUP
-- start_ignore
drop index dbs_index;
WARNING:  Only dropped the index "dbs_index"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop table if exists dbs;
drop index dis_index;
WARNING:  Only dropped the index "dis_index"
HINT:  To drop other indexes on child partitions, drop each one explicitly.
drop table if exists dis;
drop table if exists dts;
reset optimizer_enable_dynamictablescan;
-- end_ignore
--
-- Partition elimination for heterogenous DynamicIndexScans
--
-- SETUP
-- start_ignore
drop table if exists pp;
NOTICE:  table "pp" does not exist, skipping
drop index if exists pp_1_prt_1_idx;
NOTICE:  index "pp_1_prt_1_idx" does not exist, skipping
drop index if exists pp_rest_1_idx;
NOTICE:  index "pp_rest_1_idx" does not exist, skipping
drop index if exists pp_rest_2_idx;
NOTICE:  index "pp_rest_2_idx" does not exist, skipping
set optimizer_segments=2;
set optimizer_partition_selection_log=on;
-- end_ignore
create table pp(a int, b int, c int) partition by range(b) (start(1) end(15) every(5));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "pp_1_prt_1" for table "pp"
NOTICE:  CREATE TABLE will create partition "pp_1_prt_2" for table "pp"
NOTICE:  CREATE TABLE will create partition "pp_1_prt_3" for table "pp"
insert into pp values (1,1,2),(2,6,2), (3,11,2);
-- Heterogeneous Index on the partition table
create index pp_1_prt_1_idx on pp_1_prt_1(c);
-- Create other indexes so that we can automate the repro for MPP-21069 by disabling tablescan
create index pp_rest_1_idx on pp_1_prt_2(c,a);
create index pp_rest_2_idx on pp_1_prt_3(c,a);
-- TEST
set optimizer_enable_dynamictablescan = off;
select * from pp where b=2 and c=2;
 a | b | c 
---+---+---
(0 rows)

select count_operator('select * from pp where b=2 and c=2;','Partition Selector');
 count_operator 
----------------
              1
(1 row)

-- CLEANUP
-- start_ignore
drop index if exists pp_rest_2_idx;
drop index if exists pp_rest_1_idx;
drop index if exists pp_1_prt_1_idx;
drop table if exists pp;
reset optimizer_enable_dynamictablescan;
reset optimizer_segments;
set optimizer_partition_selection_log=off;
-- end_ignore
--
-- Partition elimination with implicit CAST on the partitioning key
--
-- SETUP
-- start_ignore
set optimizer_segments=2;
set optimizer_partition_selection_log=on;
DROP TABLE IF EXISTS ds_4;
NOTICE:  table "ds_4" does not exist, skipping
-- end_ignore
CREATE TABLE ds_4
(
  month_id character varying(6),
  cust_group_acc numeric(10),
  mobile_no character varying(10)
)
DISTRIBUTED BY (cust_group_acc, mobile_no)
PARTITION BY LIST(month_id)
          (
          PARTITION p200800 VALUES('200800'),
          PARTITION p200801 VALUES('200801'),
          PARTITION p200802 VALUES('200802'),
          PARTITION p200803 VALUES('200803')
);
NOTICE:  CREATE TABLE will create partition "ds_4_1_prt_p200800" for table "ds_4"
NOTICE:  CREATE TABLE will create partition "ds_4_1_prt_p200801" for table "ds_4"
NOTICE:  CREATE TABLE will create partition "ds_4_1_prt_p200802" for table "ds_4"
NOTICE:  CREATE TABLE will create partition "ds_4_1_prt_p200803" for table "ds_4"
-- TEST
select * from ds_4 where month_id = '200800';
 month_id | cust_group_acc | mobile_no 
----------+----------------+-----------
(0 rows)

select count_operator('select * from ds_4 where month_id = E''200800'';','Partition Selector');
 count_operator 
----------------
              1
(1 row)

select * from ds_4 where month_id > '200800';
 month_id | cust_group_acc | mobile_no 
----------+----------------+-----------
(0 rows)

select count_operator('select * from ds_4 where month_id > E''200800'';','Partition Selector');
 count_operator 
----------------
              1
(1 row)

select * from ds_4 where month_id <= '200800';
 month_id | cust_group_acc | mobile_no 
----------+----------------+-----------
(0 rows)

select count_operator('select * from ds_4 where month_id <= E''200800'';','Partition Selector');
 count_operator 
----------------
              1
(1 row)

select * from ds_4 a1,ds_4 a2 where a1.month_id = a2.month_id and a1.month_id > '200800';
 month_id | cust_group_acc | mobile_no | month_id | cust_group_acc | mobile_no 
----------+----------------+-----------+----------+----------------+-----------
(0 rows)

select count_operator('select * from ds_4 a1,ds_4 a2 where a1.month_id = a2.month_id and a1.month_id > E''200800'';','Partition Selector');
 count_operator 
----------------
              2
(1 row)

-- CLEANUP
-- start_ignore
DROP TABLE IF EXISTS ds_4;
set optimizer_partition_selection_log=off;
reset optimizer_segments;
-- end_ignore
--
-- Partition table with appendonly leaf, full join
--
-- SETUP
-- start_ignore
DROP TABLE IF EXISTS foo;
NOTICE:  table "foo" does not exist, skipping
DROP TABLE IF EXISTS bar;
NOTICE:  table "bar" does not exist, skipping
CREATE TABLE foo (a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
CREATE TABLE bar (b int, c int)
PARTITION BY RANGE (b)
  SUBPARTITION BY RANGE (c) SUBPARTITION TEMPLATE 
  (
    START (1) END (10) WITH (appendonly=true),
    START (10) END (20)
  ) 
( 
  START (1) END (10) ,
  START (10) END (20)
); 
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'b' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_1" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_2" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_1" for table "bar_1_prt_2"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_2" for table "bar_1_prt_2"
-- end_ignore
INSERT INTO foo VALUES (1);
INSERT INTO bar VALUES (2,3);
SELECT * FROM foo FULL JOIN bar ON foo.a = bar.b;
 a | b | c 
---+---+---
 1 |   |  
   | 2 | 3
(2 rows)

-- CLEANUP
-- start_ignore
DROP TABLE IF EXISTS foo;
DROP TABLE IF EXISTS bar;
-- end_ignore
--
-- Partition table with appendonly set at middlevel partition, full join
--
-- SETUP
-- start_ignore
DROP TABLE IF EXISTS foo;
NOTICE:  table "foo" does not exist, skipping
DROP TABLE IF EXISTS bar;
NOTICE:  table "bar" does not exist, skipping
CREATE TABLE foo (a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
CREATE TABLE bar (b int, c int)
PARTITION BY RANGE (b)
  SUBPARTITION BY RANGE (c) SUBPARTITION TEMPLATE 
  (
    START (1) END (10),
    START (10) END (20)
  ) 
( 
  START (1) END (10) WITH (appendonly=true),
  START (10) END (20)
); 
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'b' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_1" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_2" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_1" for table "bar_1_prt_2"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_2" for table "bar_1_prt_2"
-- end_ignore
INSERT INTO foo VALUES (1);
INSERT INTO bar VALUES (2,3);
SELECT * FROM foo FULL JOIN bar ON foo.a = bar.b;
 a | b | c 
---+---+---
 1 |   |  
   | 2 | 3
(2 rows)

-- CLEANUP
-- start_ignore
DROP TABLE IF EXISTS foo;
DROP TABLE IF EXISTS bar;
-- end_ignore
--
-- Partition table with appendonly set at root partition, full join
--
-- SETUP
-- start_ignore
DROP TABLE IF EXISTS foo;
NOTICE:  table "foo" does not exist, skipping
DROP TABLE IF EXISTS bar;
NOTICE:  table "bar" does not exist, skipping
CREATE TABLE foo (a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
CREATE TABLE bar (b int, c int) WITH (appendonly=true)
PARTITION BY RANGE (b)
  SUBPARTITION BY RANGE (c) SUBPARTITION TEMPLATE 
  (
    START (1) END (10),
    START (10) END (20)
  ) 
( 
  START (1) END (10),
  START (10) END (20)
); 
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'b' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_1" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1_2_prt_2" for table "bar_1_prt_1"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_1" for table "bar_1_prt_2"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2_2_prt_2" for table "bar_1_prt_2"
-- end_ignore
INSERT INTO foo VALUES (1);
INSERT INTO bar VALUES (2,3);
SELECT * FROM foo FULL JOIN bar ON foo.a = bar.b;
 a | b | c 
---+---+---
 1 |   |  
   | 2 | 3
(2 rows)

--
-- Test a hash agg that has a Sequence + Partition Selector below it.
--
-- SETUP
-- start_ignore
DROP TABLE IF EXISTS bar;
-- end_ignore
CREATE TABLE bar (b int, c int)
PARTITION BY RANGE (b)
(
  START (0) END (10),
  START (10) END (20)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'b' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "bar_1_prt_1" for table "bar"
NOTICE:  CREATE TABLE will create partition "bar_1_prt_2" for table "bar"
INSERT INTO bar SELECT g % 20, g % 20 from generate_series(1, 1000) g;
ANALYZE bar;
SELECT b FROM bar GROUP BY b;
 b  
----
  7
  4
 19
  3
  5
 18
  6
 11
  9
  8
 12
 10
 17
  1
  0
  2
 16
 15
 14
 13
(20 rows)

EXPLAIN SELECT b FROM bar GROUP BY b;
                                               QUERY PLAN                                                
---------------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.05 rows=20 width=4)
   ->  HashAggregate  (cost=0.00..431.05 rows=7 width=4)
         Group By: b
         ->  Sequence  (cost=0.00..431.01 rows=334 width=4)
               ->  Partition Selector for bar (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Partitions selected: 2 (out of 2)
               ->  Dynamic Table Scan on bar (dynamic scan id: 1)  (cost=0.00..431.01 rows=334 width=4)
 Settings:  optimizer=on
 Optimizer status: PQO version 2.5.0
(9 rows)

-- CLEANUP
DROP TABLE IF EXISTS foo;
DROP TABLE IF EXISTS bar;
-- Test EXPLAIN ANALYZE on a partitioned table. There used to be a bug, where
-- you got an internal error with this, because the EXPLAIN ANALYZE sends the
-- stats from QEs to the QD at the end of query, but because the subnodes are
-- terminated earlier, their stats were already gone.
create table mpp8031 (oid integer,
odate timestamp without time zone,
cid integer)
PARTITION BY RANGE(odate)
(
PARTITION foo START ('2005-05-01 00:00:00'::timestamp
without time zone) END ('2005-07-01 00:00:00'::timestamp
without time zone) EVERY ('2 mons'::interval),
START ('2005-07-01 00:00:00'::timestamp without time zone)
END ('2006-01-01 00:00:00'::timestamp without time zone)
EVERY ('2 mons'::interval)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'oid' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp8031_1_prt_foo" for table "mpp8031"
NOTICE:  CREATE TABLE will create partition "mpp8031_1_prt_2" for table "mpp8031"
NOTICE:  CREATE TABLE will create partition "mpp8031_1_prt_3" for table "mpp8031"
NOTICE:  CREATE TABLE will create partition "mpp8031_1_prt_4" for table "mpp8031"
explain analyze select a.* from mpp8031 a, mpp8031 b where a.oid = b.oid;
                                                    QUERY PLAN                                                     
-------------------------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..862.00 rows=1 width=16)
   Rows out:  0 rows at destination with 5.797 ms to end, start offset by 0.322 ms.
   ->  Hash Join  (cost=0.00..862.00 rows=1 width=16)
         Hash Cond: bfv_partition.mpp8031.oid = bfv_partition.mpp8031.oid
         Rows out:  0 rows (seg0) with 5.403 ms to end, start offset by 0.666 ms.
         ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
               Rows out:  (No row requested) 0 rows (seg0) with 0 ms to end.
               ->  Partition Selector for mpp8031 (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Partitions selected: 4 (out of 4)
                     Rows out:  (No row requested) 0 rows (seg0) with 0 ms to end.
               ->  Dynamic Table Scan on mpp8031 (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
                     Rows out:  (No row requested) 0 rows (seg0) with 0 ms to end.
                     Partitions scanned:  0 (out of 4).
         ->  Hash  (cost=431.00..431.00 rows=1 width=4)
               Rows in:  0 rows (seg0) with 0.417 ms to end, start offset by 3.443 ms.
               ->  Sequence  (cost=0.00..431.00 rows=1 width=4)
                     Rows out:  0 rows (seg0) with 0.416 ms to end, start offset by 3.444 ms.
                     ->  Partition Selector for mpp8031 (dynamic scan id: 2)  (cost=10.00..100.00 rows=34 width=4)
                           Partitions selected: 4 (out of 4)
                           Rows out:  0 rows (seg0) with 0.022 ms to end, start offset by 3.573 ms.
                     ->  Dynamic Table Scan on mpp8031 (dynamic scan id: 2)  (cost=0.00..431.00 rows=1 width=4)
                           Rows out:  0 rows (seg0) with 0.392 ms to end, start offset by 3.467 ms.
                           Partitions scanned:  Avg 4.0 (out of 4) x 3 workers.  Max 4 parts (seg0).
 Slice statistics:
   (slice0)    Executor memory: 382K bytes.
   (slice1)    Executor memory: 8400K bytes avg x 3 workers, 8400K bytes max (seg0).
 Statement statistics:
   Memory used: 128000K bytes
 Settings:  optimizer=on
 Optimizer status: PQO version 2.5.0
 Total runtime: 6.993 ms
(31 rows)

drop table mpp8031;
-- Partitioned tables with default partitions and indexes on all parts,
-- queries on them with a predicate on index column must not consider the scan
-- as partial and should not fallback.
CREATE TABLE part_tbl
(
	time_client_key numeric(16,0) NOT NULL,
	ngin_service_key numeric NOT NULL,
	profile_key numeric NOT NULL
)
DISTRIBUTED BY (time_client_key)
PARTITION BY RANGE(time_client_key)
SUBPARTITION BY LIST (ngin_service_key)
SUBPARTITION TEMPLATE
(
	SUBPARTITION Package5 VALUES (479534741),
	DEFAULT SUBPARTITION other_services
)
(
	PARTITION p20151110 START (2015111000::numeric) 
END (2015111100::numeric) WITH (appendonly=false)
);
NOTICE:  CREATE TABLE will create partition "part_tbl_1_prt_p20151110" for table "part_tbl"
NOTICE:  CREATE TABLE will create partition "part_tbl_1_prt_p20151110_2_prt_package5" for table "part_tbl_1_prt_p20151110"
NOTICE:  CREATE TABLE will create partition "part_tbl_1_prt_p20151110_2_prt_other_services" for table "part_tbl_1_prt_p20151110"
INSERT INTO part_tbl VALUES (2015111000, 479534741, 99999999);
INSERT INTO part_tbl VALUES (2015111000, 479534742, 99999999);
CREATE INDEX part_tbl_idx 
ON part_tbl(profile_key);
NOTICE:  building index for child partition "part_tbl_1_prt_p20151110"
NOTICE:  building index for child partition "part_tbl_1_prt_p20151110_2_prt_package5"
NOTICE:  building index for child partition "part_tbl_1_prt_p20151110_2_prt_other_services"
EXPLAIN SELECT * FROM part_tbl WHERE profile_key = 99999999;
                                               QUERY PLAN                                               
--------------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..2.00 rows=1 width=24)
   ->  Sequence  (cost=0.00..2.00 rows=1 width=24)
         ->  Partition Selector for part_tbl (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Partitions selected: 2 (out of 2)
         ->  Dynamic Index Scan on part_tbl (dynamic scan id: 1)  (cost=0.00..2.00 rows=1 width=24)
               Index Cond: profile_key = 99999999::numeric
 Optimizer status: PQO version 2.31.0
(7 rows)

SELECT * FROM part_tbl WHERE profile_key = 99999999;
 time_client_key | ngin_service_key | profile_key 
-----------------+------------------+-------------
      2015111000 |        479534742 |    99999999
      2015111000 |        479534741 |    99999999
(2 rows)

DROP TABLE part_tbl;
CREATE TABLE mpp3263 (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name
) partition by range (unique1)
( partition aa start (0) end (1000) every (500), default partition default_part );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3263_1_prt_default_part" for table "mpp3263"
NOTICE:  CREATE TABLE will create partition "mpp3263_1_prt_aa_1" for table "mpp3263"
NOTICE:  CREATE TABLE will create partition "mpp3263_1_prt_aa_2" for table "mpp3263"
-- These are OK
alter table mpp3263 add column AAA int;
alter table mpp3263 add column BBB int;
alter table mpp3263 drop column BBB;
alter table mpp3263 drop partition;
NOTICE:  dropped partition "aa_1" for relation "mpp3263"
alter table mpp3263 add column CCC int;
insert into mpp3263 (unique1) values (1111);
drop table mpp3263;
CREATE TABLE mpp3541 (f1 time(2) with time zone, f2 char(4), f3 varchar(10))
partition by list (f2)
subpartition by range (f3)
subpartition template (
  subpartition male values ('Male','M'),
  subpartition female values ('Female','F')
)
( partition pst values ('PST'),
  partition est values ('EST')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'f1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3541_1_prt_pst" for table "mpp3541"
ERROR:  invalid use of LIST boundary specification in partition "male" of type RANGE (at depth 2)
LINE 5:   subpartition male values ('Male','M'),
                            ^
CREATE TABLE mpp3541 (f1 time(2) with time zone, f2 char(4), f3 varchar(10))
partition by range (f2)
subpartition by list (f3)
subpartition template (
  subpartition male values ('Male','M'),
  subpartition female values ('Female','F')
)
( partition pst values ('PST'),
  partition est values ('EST')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'f1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  invalid use of LIST boundary specification in partition "pst" of type RANGE
LINE 8: ( partition pst values ('PST'),
                        ^
CREATE TABLE mpp3541 (f1 time(2) with time zone, f2 char(4), f3 varchar(10))
partition by range (f2)
subpartition by range (f3)
subpartition template (
  subpartition male values ('Male','M'),
  subpartition female values ('Female','F')
)
( partition pst values ('PST'),
  partition est values ('EST')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'f1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  invalid use of LIST boundary specification in partition "pst" of type RANGE
LINE 8: ( partition pst values ('PST'),
                        ^
CREATE TABLE mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999 (f1 time(2) with time zone)
partition by range (f1)
(
  partition "Los Angeles" start (time with time zone '00:00 PST') end (time with time zone '23:00 PST') EVERY (INTERVAL '1 hour'),
  partition "New York" start (time with time zone '00:00 EST') end (time with time zone '23:00 EST') EVERY (INTERVAL '1 hour')
);
NOTICE:  identifier "mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999" will be truncated to "mpp3542_0000000000111111111122222222223333333333444444444455555"
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'f1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  starting value of partition "Los Angeles_1" overlaps previous range
LINE 4:   partition "Los Angeles" start (time with time zone '00:00 ...
                                  ^
-- Truncates the table name to mpp3542_0000000000111111111122222222223333333333444444444455555, but partition name is too long, so ERROR
alter table mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999 rename partition "Los Angeles_1" to "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890";
NOTICE:  identifier "mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999" will be truncated to "mpp3542_0000000000111111111122222222223333333333444444444455555"
NOTICE:  identifier "123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" will be truncated to "123456789012345678901234567890123456789012345678901234567890123"
ERROR:  relation "mpp3542_0000000000111111111122222222223333333333444444444455555" does not exist
-- Truncates the table name to mpp3542_0000000000111111111122222222223333333333444444444455555, and partition name is safe, so renamed
alter table mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999 rename partition "Los Angeles_1" to "LA1";
NOTICE:  identifier "mpp3542_000000000011111111112222222222333333333344444444445555555555556666666666777777777788888888889999999999" will be truncated to "mpp3542_0000000000111111111122222222223333333333444444444455555"
ERROR:  relation "mpp3542_0000000000111111111122222222223333333333444444444455555" does not exist
-- Use the actual table name
alter table mpp3542_0000000000111111111122222222223333333333444444444455555 rename partition "Los Angeles_2" to "LA2";
ERROR:  relation "mpp3542_0000000000111111111122222222223333333333444444444455555" does not exist
-- MPP-3542
alter table  mpp3542_0000000000111111111122222222223333333333444444444455555 rename to m; 
ERROR:  relation "mpp3542_0000000000111111111122222222223333333333444444444455555" does not exist
CREATE TABLE MULTI_PART2(a int, b int, c int, d int, e int, f int, g int, h int, i int, j int, k int, l int, m int, n int, o int, p int, q int, r int, s int, t int, u int, v int, w int, x int, y int, z int)
distributed by (a)
partition by range (a)
subpartition by range (b) subpartition template ( start (1) end (2) every (1)),
subpartition by range (c) subpartition template ( start (1) end (2) every (1)),
subpartition by range (d) subpartition template ( start (1) end (2) every (1)),
subpartition by range (e) subpartition template ( start (1) end (2) every (1)),
subpartition by range (f) subpartition template ( start (1) end (2) every (1)),
subpartition by range (g) subpartition template ( start (1) end (2) every (1)),
subpartition by range (h) subpartition template ( start (1) end (2) every (1)),
subpartition by range (i) subpartition template ( start (1) end (2) every (1)),
subpartition by range (j) subpartition template ( start (1) end (2) every (1)),
subpartition by range (k) subpartition template ( start (1) end (2) every (1)),
subpartition by range (l) subpartition template ( start (1) end (2) every (1)),
subpartition by range (m) subpartition template ( start (1) end (2) every (1)),
subpartition by range (n) subpartition template ( start (1) end (2) every (1)),
subpartition by range (o) subpartition template ( start (1) end (2) every (1)),
subpartition by range (p) subpartition template ( start (1) end (2) every (1)),
subpartition by range (q) subpartition template ( start (1) end (2) every (1)),
subpartition by range (r) subpartition template ( start (1) end (2) every (1)),
subpartition by range (s) subpartition template ( start (1) end (2) every (1)),
subpartition by range (t) subpartition template ( start (1) end (2) every (1)),
subpartition by range (u) subpartition template ( start (1) end (2) every (1)),
subpartition by range (v) subpartition template ( start (1) end (2) every (1)),
subpartition by range (w) subpartition template ( start (1) end (2) every (1)),
subpartition by range (x) subpartition template ( start (1) end (2) every (1)),
subpartition by range (y) subpartition template ( start (1) end (2) every (1)),
subpartition by range (z) subpartition template ( start (1) end (2) every (1))
( start (1) end (2) every (1));
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1" for table "multi_part2"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1" for table "multi_part2_1_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1" for table "multi_part2_1_prt_1_2_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_7_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_8_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_7_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_9_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_8_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__10_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_9_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__11_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__10_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__12_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__11_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__13_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__12_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__14_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__13_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__15_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__14_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__16_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__15_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__17_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__16_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__18_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__17_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__19_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__18_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__20_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__19_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__21_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__20_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__22_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__21_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__23_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__22_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__24_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__23_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__25_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__24_prt_1"
NOTICE:  CREATE TABLE will create partition "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__26_prt_1" for table "multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__25_prt_1"
alter table multi_part2 rename to multi_part2_0000000;
ERROR:  relation name "multi_part2_0000000_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_prt_1" for child partition is too long
alter table multi_part2 rename to m_0000000;
WARNING:  renamed 6 partitions, skipped 20 child partitions due to name truncation
-- We want to check both m and m_00000, thus I didn't put where clause
-- Assumes that there are no other partitions
-- order 2
select tablename, partitionlevel, partitiontablename, partitionname, partitionrank, partitionboundary from pg_partitions where tablename like 'm_000%' order by tablename;
 tablename | partitionlevel |                       partitiontablename                        | partitionname | partitionrank |      partitionboundary      
-----------+----------------+-----------------------------------------------------------------+---------------+---------------+-----------------------------
 m_0000000 |              0 | m_0000000_1_prt_1                                               |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              1 | m_0000000_1_prt_1_2_prt_1                                       |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              2 | m_0000000_1_prt_1_2_prt_1_3_prt_1                               |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              3 | m_0000000_1_prt_1_2_prt_1_3_prt_1_4_prt_1                       |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              4 | m_0000000_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1               |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              5 | m_0000000_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_prt_1       |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              6 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_7_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              7 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_8_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              8 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6_p_9_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |              9 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__10_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             10 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__11_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             11 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__12_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             12 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__13_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             13 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__14_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             14 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__15_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             15 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__16_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             16 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__17_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             17 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__18_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             18 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__19_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             19 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__20_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             20 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__21_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             21 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__22_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             22 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__23_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             23 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__24_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             24 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__25_prt_1 |               |             1 | START (1) END (2) EVERY (1)
 m_0000000 |             25 | multi_part2_1_prt_1_2_prt_1_3_prt_1_4_prt_1_5_prt_1_6__26_prt_1 |               |             1 | START (1) END (2) EVERY (1)
(26 rows)

drop table m;
ERROR:  table "m" does not exist
drop table m_0000000;
create table mpp3061 (i int) partition by range(i) (start(1) end(10) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_1" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_2" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_3" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_4" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_5" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_6" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_7" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_8" for table "mpp3061"
NOTICE:  CREATE TABLE will create partition "mpp3061_1_prt_9" for table "mpp3061"
insert into mpp3061 values(1);
-- Not allowed. MPP-3061
update mpp3061 set i = 2 where i = 1;
drop table mpp3061;
create table mpp3466 (i int) partition by range(i) (start(1) end(10) every(2), default partition f);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_f" for table "mpp3466"
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_2" for table "mpp3466"
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_3" for table "mpp3466"
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_4" for table "mpp3466"
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_5" for table "mpp3466"
NOTICE:  CREATE TABLE will create partition "mpp3466_1_prt_6" for table "mpp3466"
alter table mpp3466 split partition f at (3) into (partition f, partition new);
ERROR:  syntax error at or near "new"
LINE 1: ... split partition f at (3) into (partition f, partition new);
                                                                  ^
drop table mpp3466;
create table mpp3058 (a char(1), b date, d char(3))       
 distributed by (a)         
partition by range (b)                                                                                            
 (              
 partition aa start (date '2008-01-01') end (date '2009-01-01') 
 every (interval '10 days'));
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_1" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_2" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_3" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_4" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_5" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_6" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_7" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_8" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_9" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_10" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_11" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_12" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_13" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_14" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_15" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_16" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_17" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_18" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_19" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_20" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_21" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_22" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_23" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_24" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_25" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_26" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_27" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_28" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_29" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_30" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_31" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_32" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_33" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_34" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_35" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_36" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_37" for table "mpp3058"
drop table mpp3058;
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)     
partition by range (b)    
(        
     partition aa start ('2008-01-01') end ('2010-01-01')           
  );
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa" for table "mpp3058"
drop table mpp3058;
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)     
partition by range (b)    
(        
     partition aa start ('2008-01-01') end ('2006-01-01')           
  );
ERROR:  START greater than END for partition "aa"
LINE 5:      partition aa start ('2008-01-01') end ('2006-01-01')   ...
                          ^
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)     
partition by range (b)    
(        
     partition aa start ('2008-01-01') end ('-2009-01-01')           
  );
ERROR:  time zone displacement out of range: "-2009-01-01"
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)     
partition by range (b)    
(        
     partition aa start ('-2008-01-01') end ('2009-01-01')           
  );
ERROR:  time zone displacement out of range: "-2008-01-01"
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)     
partition by range (b)    
(        
     partition aa start ('2008-01-01') end ('2010-01-01')           
  );
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa" for table "mpp3058"
drop table mpp3058;
create table mpp3058 (a char(1), b date, d char(3))   
distributed by (a)        
partition by range (b)      
 (                  
           partition aa start ('2008-01-01') end ('2008-04-01') every(interval '1 day')   
     );
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_1" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_2" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_3" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_4" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_5" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_6" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_7" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_8" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_9" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_10" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_11" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_12" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_13" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_14" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_15" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_16" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_17" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_18" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_19" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_20" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_21" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_22" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_23" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_24" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_25" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_26" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_27" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_28" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_29" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_30" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_31" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_32" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_33" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_34" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_35" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_36" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_37" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_38" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_39" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_40" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_41" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_42" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_43" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_44" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_45" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_46" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_47" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_48" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_49" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_50" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_51" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_52" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_53" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_54" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_55" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_56" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_57" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_58" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_59" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_60" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_61" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_62" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_63" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_64" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_65" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_66" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_67" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_68" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_69" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_70" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_71" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_72" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_73" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_74" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_75" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_76" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_77" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_78" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_79" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_80" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_81" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_82" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_83" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_84" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_85" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_86" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_87" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_88" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_89" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_90" for table "mpp3058"
NOTICE:  CREATE TABLE will create partition "mpp3058_1_prt_aa_91" for table "mpp3058"
drop table mpp3058;
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))  
  distributed by (a)    
   partition by range (b)             
  (           
    partition aa start ('2008-01-01') end ('2009-01-01') every( '1 day')  
     );
ERROR:  invalid input syntax for integer: "1 day"
LINE 5: ...aa start ('2008-01-01') end ('2009-01-01') every( '1 day')  
                                                             ^
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))  
  distributed by (a)    
   partition by range (b)             
  (           
    partition aa end ('2009-01-01') every( interval '1 day')  
     );
ERROR:  EVERY clause in partition "aa" requires START and END
LINE 5:     partition aa end ('2009-01-01') every( interval '1 day')...
                         ^
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
-- Expected Error
create table mpp3058 (a char(1), b date, d char(3))  
  distributed by (a)    
   partition by range (b)             
  (           
    partition aa start ('2006-01-01') every( interval '1 day')  
     );
ERROR:  EVERY clause in partition "aa" requires START and END
LINE 5:     partition aa start ('2006-01-01') every( interval '1 day...
                         ^
drop table mpp3058;
ERROR:  table "mpp3058" does not exist
create table mpp3607 (aa int, bb int) partition by range (bb)
(partition foo start(2));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'aa' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_foo" for table "mpp3607"
alter table mpp3607 add partition baz end (3); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition baz end (4); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition aa end (2); -- OK as of 4.2.0.0 (RIO)
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_aa" for table "mpp3607"
alter table mpp3607 add partition bb end (1); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition baz end (3); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition baz end (4); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition baz end (2); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition bb end (0); -- Expected Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 drop partition aa;
alter table mpp3607 add partition aa end (-4); -- partition rule aa < -4, foo >=2
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_aa" for table "mpp3607"
alter table mpp3607 add partition bb end (-3); -- Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 drop partition aa;
alter table mpp3607 add partition aa end (0); -- partition rule aa < 0, foo >=2
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_aa" for table "mpp3607"
alter table mpp3607 drop partition aa;
alter table mpp3607 add partition aa start (4); -- Overlaps
ERROR:  new partition overlaps existing partition
alter table mpp3607 add partition aa start (3) end (4); -- Overlaps
ERROR:  new partition overlaps existing partition "foo"
alter table mpp3607 add partition aa start (0) end (1); -- partition rule aa bb>=0 and bb<1, foo bb>=2
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_aa" for table "mpp3607"
alter table mpp3607 add partition bb start (-1) end (0); -- partition rule bb bb>=-1 and bb<0
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_bb" for table "mpp3607"
alter table mpp3607 add partition cc start (-4); -- partition rule cc bb>=-4 and bb <-1
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_cc" for table "mpp3607"
alter table mpp3607 add partition dd start (-5) end (-4);
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_dd" for table "mpp3607"
alter table mpp3607 add partition ee start (-10);
NOTICE:  CREATE TABLE will create partition "mpp3607_1_prt_ee" for table "mpp3607"
alter table mpp3607 add partition ff start (-9) end (-8); -- Overlaps
ERROR:  new partition overlaps existing partition "ee"
drop table mpp3607;
CREATE TABLE mpp3632(a int, b int, c int, d int, e int, f int, g int, h int, i int, j int, k int, l int, m int, n int, o int, p int, q int, r int, s int, t int, u int, v int, w int, x int, y int, z int)
partition by range (a)
( partition aa start (1) end (10) every (1) );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_1" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_2" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_3" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_4" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_5" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_6" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_7" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_8" for table "mpp3632"
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_aa_9" for table "mpp3632"
alter table mpp3632 add partition a1 start (30);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a1" for table "mpp3632"
alter table mpp3632 add partition a2 start (25) end (30);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a2" for table "mpp3632"
alter table mpp3632 add partition a3 start (10) end (20);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a3" for table "mpp3632"
alter table mpp3632 add partition a4 start (20) end (21);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a4" for table "mpp3632"
alter table mpp3632 add partition a5 start (22) end (24);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a5" for table "mpp3632"
alter table mpp3632 add partition a6 start (21) end (22);
NOTICE:  CREATE TABLE will create partition "mpp3632_1_prt_a6" for table "mpp3632"
-- alter table mpp3632 add partition a7 start (23) end (24); -- MPP-3667
drop table mpp3632;
create table mpp3671 (i int) partition by list(i) (partition a values(1, 2, 3, 4),
partition b values(5, 6, 7, 8), default partition default_part);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3671_1_prt_a" for table "mpp3671"
NOTICE:  CREATE TABLE will create partition "mpp3671_1_prt_b" for table "mpp3671"
NOTICE:  CREATE TABLE will create partition "mpp3671_1_prt_default_part" for table "mpp3671"
insert into mpp3671 select i from generate_series(1, 10) i;
alter table mpp3671 split partition for(1) at (1,2) into (partition f1a, partition f1b);
NOTICE:  exchanged partition "a" of relation "mpp3671" with relation "pg_temp_1284964"
NOTICE:  dropped partition "a" for relation "mpp3671"
NOTICE:  CREATE TABLE will create partition "mpp3671_1_prt_f1a" for table "mpp3671"
NOTICE:  CREATE TABLE will create partition "mpp3671_1_prt_f1b" for table "mpp3671"
drop table mpp3671;
create table mpp3639 (i int) partition by range(i) (start(0) exclusive end(100) inclusive every(10));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_1" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_2" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_3" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_4" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_5" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_6" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_7" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_8" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_9" for table "mpp3639"
NOTICE:  CREATE TABLE will create partition "mpp3639_1_prt_10" for table "mpp3639"
insert into mpp3639 select i from generate_series(1, 100) i;
insert into mpp3639 select i from generate_series(1, 100) i;
insert into mpp3639 select i from generate_series(1, 100) i;
select * from mpp3639 order by i;
  i  
-----
   1
   1
   1
   2
   2
   2
   3
   3
   3
   4
   4
   4
   5
   5
   5
   6
   6
   6
   7
   7
   7
   8
   8
   8
   9
   9
   9
  10
  10
  10
  11
  11
  11
  12
  12
  12
  13
  13
  13
  14
  14
  14
  15
  15
  15
  16
  16
  16
  17
  17
  17
  18
  18
  18
  19
  19
  19
  20
  20
  20
  21
  21
  21
  22
  22
  22
  23
  23
  23
  24
  24
  24
  25
  25
  25
  26
  26
  26
  27
  27
  27
  28
  28
  28
  29
  29
  29
  30
  30
  30
  31
  31
  31
  32
  32
  32
  33
  33
  33
  34
  34
  34
  35
  35
  35
  36
  36
  36
  37
  37
  37
  38
  38
  38
  39
  39
  39
  40
  40
  40
  41
  41
  41
  42
  42
  42
  43
  43
  43
  44
  44
  44
  45
  45
  45
  46
  46
  46
  47
  47
  47
  48
  48
  48
  49
  49
  49
  50
  50
  50
  51
  51
  51
  52
  52
  52
  53
  53
  53
  54
  54
  54
  55
  55
  55
  56
  56
  56
  57
  57
  57
  58
  58
  58
  59
  59
  59
  60
  60
  60
  61
  61
  61
  62
  62
  62
  63
  63
  63
  64
  64
  64
  65
  65
  65
  66
  66
  66
  67
  67
  67
  68
  68
  68
  69
  69
  69
  70
  70
  70
  71
  71
  71
  72
  72
  72
  73
  73
  73
  74
  74
  74
  75
  75
  75
  76
  76
  76
  77
  77
  77
  78
  78
  78
  79
  79
  79
  80
  80
  80
  81
  81
  81
  82
  82
  82
  83
  83
  83
  84
  84
  84
  85
  85
  85
  86
  86
  86
  87
  87
  87
  88
  88
  88
  89
  89
  89
  90
  90
  90
  91
  91
  91
  92
  92
  92
  93
  93
  93
  94
  94
  94
  95
  95
  95
  96
  96
  96
  97
  97
  97
  98
  98
  98
  99
  99
  99
 100
 100
 100
(300 rows)

drop table mpp3639;
create table mpp3588 (i int) partition by list(i) (partition a values(1, 2, 3, 4),
partition b values(5, 6, 7, 8));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3588_1_prt_a" for table "mpp3588"
NOTICE:  CREATE TABLE will create partition "mpp3588_1_prt_b" for table "mpp3588"
insert into mpp3588 select i from generate_series(1, 8) i;
alter table mpp3588 split partition for(1) at (1,2) into (partition fa, partition fb);
NOTICE:  exchanged partition "a" of relation "mpp3588" with relation "pg_temp_1285270"
NOTICE:  dropped partition "a" for relation "mpp3588"
NOTICE:  CREATE TABLE will create partition "mpp3588_1_prt_fa" for table "mpp3588"
NOTICE:  CREATE TABLE will create partition "mpp3588_1_prt_fb" for table "mpp3588"
alter table mpp3588 split partition for(1) at (1,2) into (partition f1a, partition f1b); -- This has partition rules that overlaps
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f2a, partition f2b); -- 5,6 are not within the boundary of first partition
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f3a, partition f3b); 
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f4a, partition f4b);
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f5a, partition f5b); -- Out of the original boundary specification
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f6a, partition f6b); -- I can keep going and going and going....
ERROR:  AT clause cannot contain all values in partition "fb"
alter table mpp3588 split partition for(1) at (1,2) into (partition f7a, partition f7b);
ERROR:  AT clause cannot contain all values in partition "fb"
drop table mpp3588;
--  MPP-3692, MPP-3679
create table mpp3679 (a text, b text) partition by list (a) (partition foo values ('foo'), partition bar values ('bar'), default partition baz); 
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3679_1_prt_foo" for table "mpp3679"
NOTICE:  CREATE TABLE will create partition "mpp3679_1_prt_bar" for table "mpp3679"
NOTICE:  CREATE TABLE will create partition "mpp3679_1_prt_baz" for table "mpp3679"
insert into mpp3679 values ('foo', 'blah');
insert into mpp3679 values ('bar', 'blah');
insert into mpp3679 values ('baz', 'blah');
alter table mpp3679 split default partition at ('baz') into (partition bing, default partition);
NOTICE:  exchanged partition "baz" of relation "mpp3679" with relation "pg_temp_1285474"
NOTICE:  dropped partition "baz" for relation "mpp3679"
NOTICE:  CREATE TABLE will create partition "mpp3679_1_prt_bing" for table "mpp3679"
NOTICE:  CREATE TABLE will create partition "mpp3679_1_prt_baz" for table "mpp3679"
drop table mpp3679;
-- MPP-3691, MPP-3681
create table mpp3681 (id int, date date, amt decimal(10,2)) distributed by (id) partition by range(date) (start (date '2008-01-01') inclusive end ('2008-04-01') exclusive every (interval '1 month')); 
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_1" for table "mpp3681"
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_2" for table "mpp3681"
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_3" for table "mpp3681"
alter table mpp3681 add default partition def;
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_def" for table "mpp3681"
alter table mpp3681 split default partition start('2008-04-01') inclusive end('2008-05-01') exclusive into (partition apr08, default partition);
NOTICE:  exchanged partition "def" of relation "mpp3681" with relation "pg_temp_1285647"
NOTICE:  dropped partition "def" for relation "mpp3681"
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_apr08" for table "mpp3681"
NOTICE:  CREATE TABLE will create partition "mpp3681_1_prt_def" for table "mpp3681"
drop table mpp3681;
-- MPP-3593
create table mpp3593 (i int) partition by range(i) (start(1) end(100) every(10));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_1" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_2" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_3" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_4" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_5" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_6" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_7" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_8" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_9" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_10" for table "mpp3593"
insert into mpp3593 select i from generate_series(1, 99) i;
alter table mpp3593 split partition for(1) at (5) into (partition aa, partition bb);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_aa" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_bb" for table "mpp3593"
alter table mpp3593 split partition for(15) at (20) into (partition a1, partition b1);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_a1" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_b1" for table "mpp3593"
alter table mpp3593 split partition for(25) at (30) into (partition a2, partition b2);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_a2" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_b2" for table "mpp3593"
alter table mpp3593 split partition for(35) at (40) into (partition a3, partition b3);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_a3" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_b3" for table "mpp3593"
alter table mpp3593 split partition for(55) at (60) into (partition a4, partition b4);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_a4" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_b4" for table "mpp3593"
alter table mpp3593 split partition for(45) at (50) into (partition a5, partition b5);
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_a5" for table "mpp3593"
NOTICE:  CREATE TABLE will create partition "mpp3593_1_prt_b5" for table "mpp3593"
drop table mpp3593;
CREATE TABLE mpp3742 (
c_id varchar(36),
ss_id varchar(36),
c_ts timestamp,
name varchar(36),
PRIMARY KEY (c_id,ss_id,c_ts)) partition by range (c_ts)
(
  start (date '2007-01-01')
  end (date '2008-01-01') every (interval '1 month'),
  default partition default_part
);
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_default_part" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_2" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_3" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_4" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_5" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_6" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_7" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_8" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_9" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_10" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_11" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_12" for table "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_13" for table "mpp3742"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_pkey" for table "mpp3742"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_default_part_pkey" for table "mpp3742_1_prt_default_part"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_2_pkey" for table "mpp3742_1_prt_2"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_3_pkey" for table "mpp3742_1_prt_3"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_4_pkey" for table "mpp3742_1_prt_4"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_5_pkey" for table "mpp3742_1_prt_5"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_6_pkey" for table "mpp3742_1_prt_6"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_7_pkey" for table "mpp3742_1_prt_7"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_8_pkey" for table "mpp3742_1_prt_8"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_9_pkey" for table "mpp3742_1_prt_9"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_10_pkey" for table "mpp3742_1_prt_10"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_11_pkey" for table "mpp3742_1_prt_11"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_12_pkey" for table "mpp3742_1_prt_12"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_13_pkey" for table "mpp3742_1_prt_13"
alter table mpp3742 split default partition start ('2009-01-01') end ('2009-02-01') into (partition a3, default partition);
NOTICE:  exchanged partition "default_part" of relation "mpp3742" with relation "pg_temp_1286524"
NOTICE:  dropped partition "default_part" for relation "mpp3742"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_a3" for table "mpp3742"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_a3_pkey" for table "mpp3742_1_prt_a3"
NOTICE:  CREATE TABLE will create partition "mpp3742_1_prt_default_part" for table "mpp3742"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3742_1_prt_default_part_pkey1" for table "mpp3742_1_prt_default_part"
drop table mpp3742;
create table mpp3597 (i int) partition by list(i) (partition a values(1, 2, 3, 4),
partition b values(5, 6, 7, 8), default partition default_part);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3597_1_prt_a" for table "mpp3597"
NOTICE:  CREATE TABLE will create partition "mpp3597_1_prt_b" for table "mpp3597"
NOTICE:  CREATE TABLE will create partition "mpp3597_1_prt_default_part" for table "mpp3597"
insert into mpp3597 select i from generate_series(1, 100) i;
insert into mpp3597 values (NULL);
alter table mpp3597 split default partition at (NULL);
NOTICE:  exchanged partition "default_part" of relation "mpp3597" with relation "pg_temp_1287048"
NOTICE:  dropped partition "default_part" for relation "mpp3597"
NOTICE:  CREATE TABLE will create partition "mpp3597_1_prt_r477125784" for table "mpp3597"
NOTICE:  CREATE TABLE will create partition "mpp3597_1_prt_default_part" for table "mpp3597"
insert into mpp3597 values (NULL);
select * from mpp3597_1_prt_default_part where i=NULL; -- No NULL values
 i 
---
(0 rows)

drop table mpp3597;
create table mpp3594 (i date) partition by range(i) (start('2008-01-01') end('2009-01-01') every(interval '1 month'), default partition default_part);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_default_part" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_2" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_3" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_4" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_5" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_6" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_7" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_8" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_9" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_10" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_11" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_12" for table "mpp3594"
NOTICE:  CREATE TABLE will create partition "mpp3594_1_prt_13" for table "mpp3594"
alter table mpp3594 split default partition start ('2009-01-01') end ('2009-02-01') into (partition aa, partition nodate);
ERROR:  default partition name missing from INTO clause
drop table mpp3594;
CREATE TABLE mpp3512 (id int, rank int, year int, gender char(1), count int)
DISTRIBUTED BY (id);
create table mpp3512_part (like mpp3512) partition by range (year) ( start (2001) end (2006) every ('1'));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause, defaulting to distribution columns from LIKE table
NOTICE:  CREATE TABLE will create partition "mpp3512_part_1_prt_1" for table "mpp3512_part"
NOTICE:  CREATE TABLE will create partition "mpp3512_part_1_prt_2" for table "mpp3512_part"
NOTICE:  CREATE TABLE will create partition "mpp3512_part_1_prt_3" for table "mpp3512_part"
NOTICE:  CREATE TABLE will create partition "mpp3512_part_1_prt_4" for table "mpp3512_part"
NOTICE:  CREATE TABLE will create partition "mpp3512_part_1_prt_5" for table "mpp3512_part"
create table mpp3512a (like mpp3512_part);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause, defaulting to distribution columns from LIKE table
\d mpp3512
   Table "bfv_partition.mpp3512"
 Column |     Type     | Modifiers 
--------+--------------+-----------
 id     | integer      | 
 rank   | integer      | 
 year   | integer      | 
 gender | character(1) | 
 count  | integer      | 
Distributed by: (id)

\d mpp3512a
  Table "bfv_partition.mpp3512a"
 Column |     Type     | Modifiers 
--------+--------------+-----------
 id     | integer      | 
 rank   | integer      | 
 year   | integer      | 
 gender | character(1) | 
 count  | integer      | 
Distributed by: (id)

select * from pg_partitions where tablename='mpp3512_part';
  schemaname   |  tablename   | partitionschemaname |  partitiontablename  | partitionname | parentpartitiontablename | parentpartitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |         partitionboundary         | parenttablespace | partitiontablespace 
---------------+--------------+---------------------+----------------------+---------------+--------------------------+---------------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-----------------------------------+------------------+---------------------
 bfv_partition | mpp3512_part | bfv_partition       | mpp3512_part_1_prt_1 |               |                          |                     | range         |              0 |             1 |                 1 |                     | 2001                | t                       | 2002              | f                     | 1                    | f                  | START (2001) END (2002) EVERY (1) | pg_default       | pg_default
 bfv_partition | mpp3512_part | bfv_partition       | mpp3512_part_1_prt_2 |               |                          |                     | range         |              0 |             2 |                 2 |                     | 2002                | t                       | 2003              | f                     | 1                    | f                  | START (2002) END (2003) EVERY (1) | pg_default       | pg_default
 bfv_partition | mpp3512_part | bfv_partition       | mpp3512_part_1_prt_3 |               |                          |                     | range         |              0 |             3 |                 3 |                     | 2003                | t                       | 2004              | f                     | 1                    | f                  | START (2003) END (2004) EVERY (1) | pg_default       | pg_default
 bfv_partition | mpp3512_part | bfv_partition       | mpp3512_part_1_prt_4 |               |                          |                     | range         |              0 |             4 |                 4 |                     | 2004                | t                       | 2005              | f                     | 1                    | f                  | START (2004) END (2005) EVERY (1) | pg_default       | pg_default
 bfv_partition | mpp3512_part | bfv_partition       | mpp3512_part_1_prt_5 |               |                          |                     | range         |              0 |             5 |                 5 |                     | 2005                | t                       | 2006              | f                     | 1                    | f                  | START (2005) END (2006) EVERY (1) | pg_default       | pg_default
(5 rows)

drop table mpp3512;
drop table mpp3512_part;
drop table mpp3512a;
CREATE TABLE mpp3988 ( ps_partkey integer,
ps_suppkey integer, ps_availqty integer,
ps_supplycost numeric, ps_comment character varying(199) )
PARTITION BY RANGE(ps_supplycost)
subpartition by range (ps_supplycost)
(default partition foo (default subpartition bar));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'ps_partkey' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3988_1_prt_foo" for table "mpp3988"
NOTICE:  CREATE TABLE will create partition "mpp3988_1_prt_foo_2_prt_bar" for table "mpp3988_1_prt_foo"
drop table mpp3988;
CREATE TABLE mpp3816 (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name,
	startDate       date		
) partition by range (startDate)
( start ('2007-01-01') end ('2008-01-01') every (interval '1 month'), default partition default_part );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_default_part" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_2" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_3" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_4" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_5" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_6" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_7" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_8" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_9" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_10" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_11" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_12" for table "mpp3816"
NOTICE:  CREATE TABLE will create partition "mpp3816_1_prt_13" for table "mpp3816"
alter table mpp3816 add column AAA int;
alter table mpp3816 add column BBB int;
alter table mpp3816 drop column BBB;
alter table mpp3816 drop column startDate;
ERROR:  cannot drop partitioning column "startdate"
drop table mpp3816;
CREATE TABLE mpp3762_cities (
        city     varchar(80) primary key,
        location point
);
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3762_cities_pkey" for table "mpp3762_cities"
CREATE TABLE mpp3762_weather (
        city      varchar(80) references mpp3762_cities(city),
        temp_lo   int,
        temp_hi   int,
        prcp      real,
        date      date
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'city' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
WARNING:  Referential integrity (FOREIGN KEY) constraints are not supported in Greenplum Database, will not be enforced.
CREATE TABLE mpp3762_cities_partition (
        city     varchar(80) primary key,
        location point
)  partition by list (city) ( partition a values ('Los Angeles'), partition b values ('San Mateo') );
NOTICE:  CREATE TABLE will create partition "mpp3762_cities_partition_1_prt_a" for table "mpp3762_cities_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_cities_partition_1_prt_b" for table "mpp3762_cities_partition"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3762_cities_partition_pkey" for table "mpp3762_cities_partition"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3762_cities_partition_1_prt_a_pkey" for table "mpp3762_cities_partition_1_prt_a"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3762_cities_partition_1_prt_b_pkey" for table "mpp3762_cities_partition_1_prt_b"
CREATE TABLE mpp3762_weather_partition (
        city      varchar(80) references mpp3762_cities_partition(city),
        temp_lo   int,
        temp_hi   int,
        prcp      real,
        date      date
) partition by range(date) ( start('2008-01-01') end ('2009-01-01') every (interval '1 month'));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'city' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_1" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_2" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_3" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_4" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_5" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_6" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_7" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_8" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_9" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_10" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_11" for table "mpp3762_weather_partition"
NOTICE:  CREATE TABLE will create partition "mpp3762_weather_partition_1_prt_12" for table "mpp3762_weather_partition"
WARNING:  Referential integrity (FOREIGN KEY) constraints are not supported in Greenplum Database, will not be enforced.
drop table mpp3762_cities, mpp3762_weather cascade;
drop table mpp3762_cities_partition, mpp3762_weather_partition cascade;
create table mpp3754a ( i int, d date, primary key (d)) partition by range(d) ( start ('2008-01-01')  inclusive end ('2008-12-01')  exclusive every (interval '1 month'));
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_1" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_2" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_3" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_4" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_5" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_6" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_7" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_8" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_9" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_10" for table "mpp3754a"
NOTICE:  CREATE TABLE will create partition "mpp3754a_1_prt_11" for table "mpp3754a"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_pkey" for table "mpp3754a"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_1_pkey" for table "mpp3754a_1_prt_1"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_2_pkey" for table "mpp3754a_1_prt_2"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_3_pkey" for table "mpp3754a_1_prt_3"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_4_pkey" for table "mpp3754a_1_prt_4"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_5_pkey" for table "mpp3754a_1_prt_5"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_6_pkey" for table "mpp3754a_1_prt_6"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_7_pkey" for table "mpp3754a_1_prt_7"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_8_pkey" for table "mpp3754a_1_prt_8"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_9_pkey" for table "mpp3754a_1_prt_9"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_10_pkey" for table "mpp3754a_1_prt_10"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754a_1_prt_11_pkey" for table "mpp3754a_1_prt_11"
create table mpp3754b ( i int, d date, constraint prim_tr primary key (d)) partition by range(d) ( start ('2008-01-01')  inclusive end ('2008-12-01')  exclusive every (interval '1 month'));
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_1" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_2" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_3" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_4" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_5" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_6" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_7" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_8" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_9" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_10" for table "mpp3754b"
NOTICE:  CREATE TABLE will create partition "mpp3754b_1_prt_11" for table "mpp3754b"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_pkey" for table "mpp3754b"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_1_pkey" for table "mpp3754b_1_prt_1"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_2_pkey" for table "mpp3754b_1_prt_2"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_3_pkey" for table "mpp3754b_1_prt_3"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_4_pkey" for table "mpp3754b_1_prt_4"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_5_pkey" for table "mpp3754b_1_prt_5"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_6_pkey" for table "mpp3754b_1_prt_6"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_7_pkey" for table "mpp3754b_1_prt_7"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_8_pkey" for table "mpp3754b_1_prt_8"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_9_pkey" for table "mpp3754b_1_prt_9"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_10_pkey" for table "mpp3754b_1_prt_10"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp3754b_1_prt_11_pkey" for table "mpp3754b_1_prt_11"
drop table mpp3754a;
drop table mpp3754b;
create table mpp4172 (a char(1), b int)
distributed by (b)
partition by range(a)
(
partition aa start ('2006') end ('2009'), partition bb start ('2007') end ('2008')
);
ERROR:  value too long for type character(1)
CREATE TABLE mpp4582 (id int,
mpp4582 int, year date, gender char(1))
DISTRIBUTED BY (id, gender, year)
partition by list (gender)
subpartition by range (year)
subpartition template (
start (date '2001-01-01')
end (date '2006-01-01') every (interval '1 year')) (
partition boys values ('M'),
partition girls values ('F'),
default partition neuter
);
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys" for table "mpp4582"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys_2_prt_1" for table "mpp4582_1_prt_boys"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys_2_prt_2" for table "mpp4582_1_prt_boys"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys_2_prt_3" for table "mpp4582_1_prt_boys"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys_2_prt_4" for table "mpp4582_1_prt_boys"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_boys_2_prt_5" for table "mpp4582_1_prt_boys"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls" for table "mpp4582"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls_2_prt_1" for table "mpp4582_1_prt_girls"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls_2_prt_2" for table "mpp4582_1_prt_girls"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls_2_prt_3" for table "mpp4582_1_prt_girls"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls_2_prt_4" for table "mpp4582_1_prt_girls"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_girls_2_prt_5" for table "mpp4582_1_prt_girls"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter" for table "mpp4582"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter_2_prt_1" for table "mpp4582_1_prt_neuter"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter_2_prt_2" for table "mpp4582_1_prt_neuter"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter_2_prt_3" for table "mpp4582_1_prt_neuter"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter_2_prt_4" for table "mpp4582_1_prt_neuter"
NOTICE:  CREATE TABLE will create partition "mpp4582_1_prt_neuter_2_prt_5" for table "mpp4582_1_prt_neuter"
ALTER table mpp4582 drop partition for ('-1');
ERROR:  value too long for type character(1)
ALTER table mpp4582 drop partition for ('--');
ERROR:  value too long for type character(1)
alter table mpp4582 drop partition for (';');
ERROR:  FOR expression matches DEFAULT partition "neuter" of relation "mpp4582"
HINT:  FOR expression may only specify a non-default partition in this context.
alter table mpp4582 drop partition for ();
ERROR:  syntax error at or near ")"
LINE 1: alter table mpp4582 drop partition for ();
                                                ^
alter table mpp4582 drop partition for (NULL);
ERROR:  FOR expression matches DEFAULT partition "neuter" of relation "mpp4582"
HINT:  FOR expression may only specify a non-default partition in this context.
alter table mpp4582 drop partition for ('NULL');
ERROR:  value too long for type character(1)
drop table mpp4582;
-- Use a particular username in the tests below, so that the output of \di
-- commands don't vary depending on current user.
CREATE USER mpp3641_user;
NOTICE:  resource queue required -- using default resource queue "pg_default"
GRANT ALL ON SCHEMA bfv_partition TO mpp3641_user;
SET ROLE mpp3641_user;
CREATE TABLE mpp3641a (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name
) partition by range (unique1)
( partition aa start (0) end (1000) every (100), default partition default_part );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_default_part" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_1" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_2" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_3" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_4" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_5" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_6" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_7" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_8" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_9" for table "mpp3641a"
NOTICE:  CREATE TABLE will create partition "mpp3641a_1_prt_aa_10" for table "mpp3641a"
CREATE TABLE mpp3641b (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name
) partition by range (unique1)
subpartition by range (unique2) subpartition template ( start (0) end (1000) every (100) )
( start (0) end (1000) every (100));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_1" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_2" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_3" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_4" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_5" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_6" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_7" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_8" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_9" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_1_2_prt_10" for table "mpp3641b_1_prt_1"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_1" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_2" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_3" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_4" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_5" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_6" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_7" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_8" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_9" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_2_2_prt_10" for table "mpp3641b_1_prt_2"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_1" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_2" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_3" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_4" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_5" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_6" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_7" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_8" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_9" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_3_2_prt_10" for table "mpp3641b_1_prt_3"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_1" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_2" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_3" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_4" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_5" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_6" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_7" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_8" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_9" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_4_2_prt_10" for table "mpp3641b_1_prt_4"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_1" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_2" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_3" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_4" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_5" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_6" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_7" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_8" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_9" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_5_2_prt_10" for table "mpp3641b_1_prt_5"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_1" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_2" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_3" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_4" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_5" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_6" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_7" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_8" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_9" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_6_2_prt_10" for table "mpp3641b_1_prt_6"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_1" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_2" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_3" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_4" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_5" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_6" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_7" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_8" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_9" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_7_2_prt_10" for table "mpp3641b_1_prt_7"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_1" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_2" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_3" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_4" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_5" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_6" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_7" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_8" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_9" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_8_2_prt_10" for table "mpp3641b_1_prt_8"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_1" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_2" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_3" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_4" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_5" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_6" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_7" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_8" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_9" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_9_2_prt_10" for table "mpp3641b_1_prt_9"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_1" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_2" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_3" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_4" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_5" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_6" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_7" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_8" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_9" for table "mpp3641b_1_prt_10"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_10_2_prt_10" for table "mpp3641b_1_prt_10"
alter table mpp3641b add default partition default_part;
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part" for table "mpp3641b"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_1" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_2" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_3" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_4" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_5" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_6" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_7" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_8" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_9" for table "mpp3641b_1_prt_default_part"
NOTICE:  CREATE TABLE will create partition "mpp3641b_1_prt_default_part_2_prt_10" for table "mpp3641b_1_prt_default_part"
CREATE INDEX mpp3641a_unique1 ON mpp3641a USING btree(unique1 int4_ops);
NOTICE:  building index for child partition "mpp3641a_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_1"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_2"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_3"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_4"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_5"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_6"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_7"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_8"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_9"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_10"
CREATE INDEX mpp3641a_unique2 ON mpp3641a USING btree(unique2 int4_ops);
NOTICE:  building index for child partition "mpp3641a_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_1"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_2"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_3"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_4"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_5"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_6"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_7"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_8"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_9"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_10"
CREATE INDEX mpp3641a_hundred ON mpp3641a USING btree(hundred int4_ops);
NOTICE:  building index for child partition "mpp3641a_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_1"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_2"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_3"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_4"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_5"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_6"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_7"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_8"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_9"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_10"
CREATE INDEX mpp3641a_stringu1 ON mpp3641a USING btree(stringu1 name_ops);
NOTICE:  building index for child partition "mpp3641a_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_1"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_2"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_3"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_4"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_5"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_6"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_7"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_8"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_9"
NOTICE:  building index for child partition "mpp3641a_1_prt_aa_10"
CREATE INDEX mpp3641b_unique1 ON mpp3641b USING btree(unique1 int4_ops);
NOTICE:  building index for child partition "mpp3641b_1_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_10"
CREATE INDEX mpp3641b_unique2 ON mpp3641b USING btree(unique2 int4_ops);
NOTICE:  building index for child partition "mpp3641b_1_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_10"
CREATE INDEX mpp3641b_hundred ON mpp3641b USING btree(hundred int4_ops);
NOTICE:  building index for child partition "mpp3641b_1_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_10"
CREATE INDEX mpp3641b_stringu1 ON mpp3641b USING btree(stringu1 name_ops);
NOTICE:  building index for child partition "mpp3641b_1_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_1_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_2_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_3_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_4_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_5_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_6_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_7_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_8_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_9_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_10_2_prt_10"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_1"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_2"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_3"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_4"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_5"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_6"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_7"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_8"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_9"
NOTICE:  building index for child partition "mpp3641b_1_prt_default_part_2_prt_10"
\t
\di mpp3641*
 bfv_partition | mpp3641a_hundred                              | index | mpp3641_user | heap    | mpp3641a
 bfv_partition | mpp3641a_hundred_1_prt_aa_1                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_1
 bfv_partition | mpp3641a_hundred_1_prt_aa_10                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_10
 bfv_partition | mpp3641a_hundred_1_prt_aa_2                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_2
 bfv_partition | mpp3641a_hundred_1_prt_aa_3                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_3
 bfv_partition | mpp3641a_hundred_1_prt_aa_4                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_4
 bfv_partition | mpp3641a_hundred_1_prt_aa_5                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_5
 bfv_partition | mpp3641a_hundred_1_prt_aa_6                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_6
 bfv_partition | mpp3641a_hundred_1_prt_aa_7                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_7
 bfv_partition | mpp3641a_hundred_1_prt_aa_8                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_8
 bfv_partition | mpp3641a_hundred_1_prt_aa_9                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_9
 bfv_partition | mpp3641a_hundred_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641a_1_prt_default_part
 bfv_partition | mpp3641a_stringu1                             | index | mpp3641_user | heap    | mpp3641a
 bfv_partition | mpp3641a_stringu1_1_prt_aa_1                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_1
 bfv_partition | mpp3641a_stringu1_1_prt_aa_10                 | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_10
 bfv_partition | mpp3641a_stringu1_1_prt_aa_2                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_2
 bfv_partition | mpp3641a_stringu1_1_prt_aa_3                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_3
 bfv_partition | mpp3641a_stringu1_1_prt_aa_4                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_4
 bfv_partition | mpp3641a_stringu1_1_prt_aa_5                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_5
 bfv_partition | mpp3641a_stringu1_1_prt_aa_6                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_6
 bfv_partition | mpp3641a_stringu1_1_prt_aa_7                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_7
 bfv_partition | mpp3641a_stringu1_1_prt_aa_8                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_8
 bfv_partition | mpp3641a_stringu1_1_prt_aa_9                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_9
 bfv_partition | mpp3641a_stringu1_1_prt_default_part          | index | mpp3641_user | heap    | mpp3641a_1_prt_default_part
 bfv_partition | mpp3641a_unique1                              | index | mpp3641_user | heap    | mpp3641a
 bfv_partition | mpp3641a_unique1_1_prt_aa_1                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_1
 bfv_partition | mpp3641a_unique1_1_prt_aa_10                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_10
 bfv_partition | mpp3641a_unique1_1_prt_aa_2                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_2
 bfv_partition | mpp3641a_unique1_1_prt_aa_3                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_3
 bfv_partition | mpp3641a_unique1_1_prt_aa_4                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_4
 bfv_partition | mpp3641a_unique1_1_prt_aa_5                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_5
 bfv_partition | mpp3641a_unique1_1_prt_aa_6                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_6
 bfv_partition | mpp3641a_unique1_1_prt_aa_7                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_7
 bfv_partition | mpp3641a_unique1_1_prt_aa_8                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_8
 bfv_partition | mpp3641a_unique1_1_prt_aa_9                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_9
 bfv_partition | mpp3641a_unique1_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641a_1_prt_default_part
 bfv_partition | mpp3641a_unique2                              | index | mpp3641_user | heap    | mpp3641a
 bfv_partition | mpp3641a_unique2_1_prt_aa_1                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_1
 bfv_partition | mpp3641a_unique2_1_prt_aa_10                  | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_10
 bfv_partition | mpp3641a_unique2_1_prt_aa_2                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_2
 bfv_partition | mpp3641a_unique2_1_prt_aa_3                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_3
 bfv_partition | mpp3641a_unique2_1_prt_aa_4                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_4
 bfv_partition | mpp3641a_unique2_1_prt_aa_5                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_5
 bfv_partition | mpp3641a_unique2_1_prt_aa_6                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_6
 bfv_partition | mpp3641a_unique2_1_prt_aa_7                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_7
 bfv_partition | mpp3641a_unique2_1_prt_aa_8                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_8
 bfv_partition | mpp3641a_unique2_1_prt_aa_9                   | index | mpp3641_user | heap    | mpp3641a_1_prt_aa_9
 bfv_partition | mpp3641a_unique2_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641a_1_prt_default_part
 bfv_partition | mpp3641b_hundred                              | index | mpp3641_user | heap    | mpp3641b
 bfv_partition | mpp3641b_hundred_1_prt_1                      | index | mpp3641_user | heap    | mpp3641b_1_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_10                     | index | mpp3641_user | heap    | mpp3641b_1_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_10_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_1_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_2                      | index | mpp3641_user | heap    | mpp3641b_1_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_2_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_3                      | index | mpp3641_user | heap    | mpp3641b_1_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_3_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_4                      | index | mpp3641_user | heap    | mpp3641b_1_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_4_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_5                      | index | mpp3641_user | heap    | mpp3641b_1_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_5_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_6                      | index | mpp3641_user | heap    | mpp3641b_1_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_6_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_7                      | index | mpp3641_user | heap    | mpp3641b_1_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_7_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_8                      | index | mpp3641_user | heap    | mpp3641b_1_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_8_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_9                      | index | mpp3641_user | heap    | mpp3641b_1_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_9_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_9
 bfv_partition | mpp3641b_hundred_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_1   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_1
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_10  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_10
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_2   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_2
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_3   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_3
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_4   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_4
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_5   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_5
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_6   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_6
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_7   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_7
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_8   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_8
 bfv_partition | mpp3641b_hundred_1_prt_default_part_2_prt_9   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_9
 bfv_partition | mpp3641b_stringu1                             | index | mpp3641_user | heap    | mpp3641b
 bfv_partition | mpp3641b_stringu1_1_prt_1                     | index | mpp3641_user | heap    | mpp3641b_1_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_10                    | index | mpp3641_user | heap    | mpp3641b_1_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_1            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_10           | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_2            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_3            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_4            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_5            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_6            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_7            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_8            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_10_2_prt_9            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_1_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_2                     | index | mpp3641_user | heap    | mpp3641b_1_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_2_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_3                     | index | mpp3641_user | heap    | mpp3641b_1_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_3_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_4                     | index | mpp3641_user | heap    | mpp3641b_1_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_4_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_5                     | index | mpp3641_user | heap    | mpp3641b_1_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_5_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_6                     | index | mpp3641_user | heap    | mpp3641b_1_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_6_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_7                     | index | mpp3641_user | heap    | mpp3641b_1_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_7_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_8                     | index | mpp3641_user | heap    | mpp3641b_1_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_8_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_9                     | index | mpp3641_user | heap    | mpp3641b_1_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_9_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_9
 bfv_partition | mpp3641b_stringu1_1_prt_default_part          | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_1  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_1
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_10 | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_10
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_2  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_2
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_3  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_3
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_4  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_4
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_5  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_5
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_6  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_6
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_7  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_7
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_8  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_8
 bfv_partition | mpp3641b_stringu1_1_prt_default_part_2_prt_9  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_9
 bfv_partition | mpp3641b_unique1                              | index | mpp3641_user | heap    | mpp3641b
 bfv_partition | mpp3641b_unique1_1_prt_1                      | index | mpp3641_user | heap    | mpp3641b_1_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_10                     | index | mpp3641_user | heap    | mpp3641b_1_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_10_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_1_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_2                      | index | mpp3641_user | heap    | mpp3641b_1_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_2_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_3                      | index | mpp3641_user | heap    | mpp3641b_1_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_3_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_4                      | index | mpp3641_user | heap    | mpp3641b_1_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_4_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_5                      | index | mpp3641_user | heap    | mpp3641b_1_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_5_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_6                      | index | mpp3641_user | heap    | mpp3641b_1_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_6_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_7                      | index | mpp3641_user | heap    | mpp3641b_1_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_7_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_8                      | index | mpp3641_user | heap    | mpp3641b_1_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_8_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_9                      | index | mpp3641_user | heap    | mpp3641b_1_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_9_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_9
 bfv_partition | mpp3641b_unique1_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_1   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_1
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_10  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_10
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_2   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_2
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_3   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_3
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_4   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_4
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_5   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_5
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_6   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_6
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_7   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_7
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_8   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_8
 bfv_partition | mpp3641b_unique1_1_prt_default_part_2_prt_9   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_9
 bfv_partition | mpp3641b_unique2                              | index | mpp3641_user | heap    | mpp3641b
 bfv_partition | mpp3641b_unique2_1_prt_1                      | index | mpp3641_user | heap    | mpp3641b_1_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_10                     | index | mpp3641_user | heap    | mpp3641b_1_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_1             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_10            | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_2             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_3             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_4             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_5             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_6             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_7             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_8             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_10_2_prt_9             | index | mpp3641_user | heap    | mpp3641b_1_prt_10_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_1_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_1_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_2                      | index | mpp3641_user | heap    | mpp3641b_1_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_2_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_2_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_3                      | index | mpp3641_user | heap    | mpp3641b_1_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_3_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_3_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_4                      | index | mpp3641_user | heap    | mpp3641b_1_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_4_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_4_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_5                      | index | mpp3641_user | heap    | mpp3641b_1_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_5_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_5_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_6                      | index | mpp3641_user | heap    | mpp3641b_1_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_6_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_6_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_7                      | index | mpp3641_user | heap    | mpp3641b_1_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_7_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_7_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_8                      | index | mpp3641_user | heap    | mpp3641b_1_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_8_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_8_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_9                      | index | mpp3641_user | heap    | mpp3641b_1_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_1              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_10             | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_2              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_3              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_4              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_5              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_6              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_7              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_8              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_9_2_prt_9              | index | mpp3641_user | heap    | mpp3641b_1_prt_9_2_prt_9
 bfv_partition | mpp3641b_unique2_1_prt_default_part           | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_1   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_1
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_10  | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_10
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_2   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_2
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_3   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_3
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_4   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_4
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_5   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_5
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_6   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_6
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_7   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_7
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_8   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_8
 bfv_partition | mpp3641b_unique2_1_prt_default_part_2_prt_9   | index | mpp3641_user | heap    | mpp3641b_1_prt_default_part_2_prt_9

drop table mpp3641a;
drop table mpp3641b;
RESET ROLE;
\di mpp3641*

\t
create schema rgs;
show search_path;
  search_path  
---------------
 bfv_partition
(1 row)

create table rgs.mpp4604(
	id int,
	time timestamp
) partition by range( time ) (
	partition p1 start (date '2008-10-14') end (date '2008-10-15'),
	partition p2 end (date '2008-11-01')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'id' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp4604_1_prt_p1" for table "mpp4604"
NOTICE:  CREATE TABLE will create partition "mpp4604_1_prt_p2" for table "mpp4604"
ALTER TABLE rgs.mpp4604 SPLIT PARTITION p2 AT( '2008-10-20' ) INTO( PARTITION p2_tmp, PARTITION p3 );
NOTICE:  exchanged partition "p2" of relation "mpp4604" with relation "pg_temp_1299191"
NOTICE:  dropped partition "p2" for relation "mpp4604"
NOTICE:  CREATE TABLE will create partition "mpp4604_1_prt_p2_tmp" for table "mpp4604"
NOTICE:  CREATE TABLE will create partition "mpp4604_1_prt_p3" for table "mpp4604"
alter table rgs.mpp4604 drop partition p3;
drop schema rgs cascade;
NOTICE:  drop cascades to table rgs.mpp4604
CREATE TABLE mpp3817 (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name,
	startDate       date		
) partition by range (startDate)
( start ('2007-01-01') end ('2008-01-01') every (interval '1 month'), default partition default_part );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_default_part" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_2" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_3" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_4" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_5" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_6" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_7" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_8" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_9" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_10" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_11" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_12" for table "mpp3817"
NOTICE:  CREATE TABLE will create partition "mpp3817_1_prt_13" for table "mpp3817"
alter table mpp3817 drop column unique1; -- Set distribution key to randomly
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
NOTICE:  Dropping a column that is part of the distribution policy forces a NULL distribution policy
alter table mpp3817 drop column unique2;
\d mpp3817
   Table "bfv_partition.mpp3817"
   Column    |  Type   | Modifiers 
-------------+---------+-----------
 two         | integer | 
 four        | integer | 
 ten         | integer | 
 twenty      | integer | 
 hundred     | integer | 
 thousand    | integer | 
 twothousand | integer | 
 fivethous   | integer | 
 tenthous    | integer | 
 odd         | integer | 
 even        | integer | 
 stringu1    | name    | 
 stringu2    | name    | 
 string4     | name    | 
 startdate   | date    | 
Number of child tables: 13 (Use \d+ to list them.)
Distributed randomly
Partition by: (startdate)

\d mpp3817_1_prt_10
Table "bfv_partition.mpp3817_1_prt_10"
   Column    |  Type   | Modifiers 
-------------+---------+-----------
 two         | integer | 
 four        | integer | 
 ten         | integer | 
 twenty      | integer | 
 hundred     | integer | 
 thousand    | integer | 
 twothousand | integer | 
 fivethous   | integer | 
 tenthous    | integer | 
 odd         | integer | 
 even        | integer | 
 stringu1    | name    | 
 stringu2    | name    | 
 string4     | name    | 
 startdate   | date    | 
Check constraints:
    "mpp3817_1_prt_10_check" CHECK (startdate >= '09-01-2007'::date AND startdate < '10-01-2007'::date)
Inherits: mpp3817
Distributed randomly

\d mpp3817_1_prt_default_part
Table "bfv_partition.mpp3817_1_prt_default_part"
   Column    |  Type   | Modifiers 
-------------+---------+-----------
 two         | integer | 
 four        | integer | 
 ten         | integer | 
 twenty      | integer | 
 hundred     | integer | 
 thousand    | integer | 
 twothousand | integer | 
 fivethous   | integer | 
 tenthous    | integer | 
 odd         | integer | 
 even        | integer | 
 stringu1    | name    | 
 stringu2    | name    | 
 string4     | name    | 
 startdate   | date    | 
Inherits: mpp3817
Distributed randomly

drop table mpp3817;
-- All these should error out because they have overlapping range partitions
CREATE TABLE NATION (
            N_NATIONKEY INTEGER,
            N_NAME CHAR(25),
            N_REGIONKEY INTEGER,
            N_COMMENT VARCHAR(152)
            )
partition by range (n_regionkey) 
(
partition p1 start('0') end('1') inclusive, partition p2 start('1') end('5') inclusive
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'n_nationkey' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  starting value of partition "p2" overlaps previous range
LINE 9: ...on p1 start('0') end('1') inclusive, partition p2 start('1')...
                                                             ^
CREATE TABLE ORDERS (
                O_ORDERKEY INT8,
                O_CUSTKEY INTEGER,
                O_ORDERSTATUS CHAR(1),
                O_TOTALPRICE decimal,
                O_ORDERDATE date,
                O_ORDERPRIORITY CHAR(15),
                O_CLERK CHAR(15),
                O_SHIPPRIORITY integer,
                O_COMMENT VARCHAR(79)
                )
partition by range (o_custkey) 
subpartition by range (o_orderkey) 
(
partition p1 start('1') end('150001') every 9 (150000)
(subpartition sp1 start('1') end('1500000'),subpartition sp2 start('1351816') end('6000001'))
);
ERROR:  syntax error at or near "9"
LINE 15: partition p1 start('1') end('150001') every 9 (150000)
                                                     ^
CREATE TABLE LINEITEM (
                L_ORDERKEY INT8,
                L_PARTKEY INTEGER,
                L_SUPPKEY INTEGER,
                L_LINENUMBER integer,
                L_QUANTITY decimal,
                L_EXTENDEDPRICE decimal,
                L_DISCOUNT decimal,
                L_TAX decimal,
                L_RETURNFLAG CHAR(1),
                L_LINESTATUS CHAR(1),
                L_SHIPDATE date,
                L_COMMITDATE date,
                L_RECEIPTDATE date,
                L_SHIPINSTRUCT CHAR(25),
                L_SHIPMODE CHAR(10),
                L_COMMENT VARCHAR(44)
                )
partition by range (l_discount) 
subpartition by range (l_quantity) 
,subpartition by range (l_tax) subpartition template (start('0') end('1.08') every 6 (1))
,subpartition by range (l_receiptdate) subpartition template (subpartition sp1 start('1992-01-03') end('1999-01-01'), subpartition sp2 start('1993-01-03') end ('1997-01-01'))
(
partition p1 start('0') end('1.1') 
(subpartition sp1 start('1') end('51') every(10)
) , partition p2 start('1.1') end ('2.2') (subpartition sp1 start('1') end('51') every (5))
);
ERROR:  syntax error at or near "6"
LINE 21: ...) subpartition template (start('0') end('1.08') every 6 (1))
                                                                  ^
CREATE TABLE ORDERS (
                O_ORDERKEY INT8,
                O_CUSTKEY INTEGER,
                O_ORDERSTATUS CHAR(1),
                O_TOTALPRICE decimal,
                O_ORDERDATE date,
                O_ORDERPRIORITY CHAR(15),
                O_CLERK CHAR(15),
                O_SHIPPRIORITY integer,
                O_COMMENT VARCHAR(79)
                )
partition by range (o_custkey) 
subpartition by range (o_orderdate) subpartition template (start('1992-01-01') end('1998-08-03') every 3 (interval '12 months')
)
,subpartition by range (o_orderkey) subpartition template (start('1') end('6000001') every 3 (3000000)
)
(
partition p1 start('1') , partition p2 start('55170') end('114873'), partition p3 start('44717') end('56000'), partition p4 start('114873') end('150001')
);
ERROR:  syntax error at or near "3"
LINE 13: ...late (start('1992-01-01') end('1998-08-03') every 3 (interva...
                                                              ^
CREATE TABLE mpp3114 (f1 time(2) with time zone)
partition by range (f1)
(
  partition pst start (time with time zone '00:00 PST') end (time with time zone '23:00 PST') EVERY (INTERVAL '1 hour'),
  partition est start (time with time zone '00:00 EST') end (time with time zone '23:00 EST') EVERY (INTERVAL '1 hour')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'f1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  starting value of partition "pst_1" overlaps previous range
LINE 4:   partition pst start (time with time zone '00:00 PST') end ...
                        ^
DROP TABLE mpp3114;
ERROR:  table "mpp3114" does not exist
CREATE TABLE sg_cal_detail_r1 (
     datacenter character varying(32),
     poolname character varying(128),
     machinename character varying(128),
     transactionid character varying(32),
     threadid integer,
     transactionorder integer,
     eventclass character(1),
     eventtime timestamp(2) without time zone,
     eventtype character varying(128),
     eventname character varying(128),
     status character varying(128),
     duration numeric(18,2),
     data character varying(4096)
)
WITH (appendonly=true, compresslevel=5, blocksize=2097152)
DISTRIBUTED BY (transactionid)
PARTITION BY RANGE(eventtime) 
SUBPARTITION BY LIST(datacenter)
SUBPARTITION TEMPLATE
(
SUBPARTITION SMF VALUES ('smf01','smf02'),
SUBPARTITION SJC VALUES ('sjc01','sjc02'),
SUBPARTITION DEN VALUES ('den01','den02'),
SUBPARTITION PHX VALUES ('phx01','phx02'),
DEFAULT SUBPARTITION xdc
)
SUBPARTITION BY LIST(eventtype)
SUBPARTITION TEMPLATE
(
SUBPARTITION ET1 VALUES ('EXEC'),
SUBPARTITION ET2 VALUES ('URL','EXECP','ufb'),
SUBPARTITION ET3 VALUES
('EXECT','V3Rules','SOJ','MEQ','RTM','TL','ActiveRules','RTMe','API',
'Info','BizProcess','APIRequest','_ui','Warning','Consume','XML','DSAPar
serTransform'),
SUBPARTITION ET4 VALUES('InflowHandler',
'TaskType',
'LOG',
'FETCH',
'TD',
'AxisInflowPipeline',
'AxisOutflowPipeline',
'API Security',
'SD_DSBE',
'SD_ExpressSale',
'V4Header',
'V4Footer',
'SOAP_Handler',
'MLR',
'EvictedStmtRemove',
'CT',
'DSATransform',
'APIClient',
'DSAQueryExec',
'processDSA',
'FilterEngine',
'Prefetch',
'AsyncCb',
'MC',
'SQL',
'SD_UInfo',
'TnSPayload',
'Serialization',
'CxtSetup',
'LazyInit',
'Deserialization',
'CleanUp',
'RESTDeserialize',
'RESTSerialize',
'SD_StoreNames',
'Serialize',
'Deserialize',
'SVC_INVOKE',
'SD_TitleAggr',
'eLVIS',
'SD_Promo',
'ServerCalLogId',
'SD_DSA',
'ClientCalLogId',
'NCF Async processor',
'V3Rules_OLAP',
'RTAM',
'SOAP_Handlers',
'SOAP_Ser',
'SOAP_Exec',
'RtmAB',
'RTPromotionOptimizer',
'crypt',
'Error',
'DBGetDataHlp',
'NoEncoding',
'Default',
'PromoAppCenter',
'BES_CONSUMER',
'TitleKeywordsModel',
'SOA_CLIENT',
'SD_UserContent',
'NCF',
'BEGenericPortlet',
'PortletExecution',
'SoaPortlet',
'ICEP',
'LOGIC',
'SYI_Eval_Detail',
'SD_Catalog',
'SignIn_Eval_Detail',
'Elvis Client',
'BES',
'TIMESTAMP',
'TLH',
'TLH-PRE-SYI',
'RFC',
'Offer_Eval_Detail',
'SFE_RunQuery',
'DBGetData',
'TKOItem2',
'Notification',
'XSHModel',
'APIDefinition',
'captcha',
'SD_HalfItem',
'Mail_Transport',
'MODPUT',
'60DAY_OLD_ITEM_FETCHED',
'List',
'RemotePortlet',
'MakeOffer_Eval_Detail',
'60_TO_90_DAY_OLD_ITEM_FETCHED',
'Logic',
'RtmGetContentName',
'BEPortletService',
'SYI_EUP_Rbo',
'SYI_Rbo',
'EOA',
'SEC',
'CCHP',
'TKOItem3',
'TnsFindingModelBucket',
'Mail_Send',
'SignIn_Rbo',
'SignIn=23_elvisEvl',
'TnsFindingModelXSH',
'RtmSvc',
'SWEET_TOOTH_LOCATOR_EXPIRED',
'COOKIE_INFO',
'Database',
'RYI_Eval_Detail',
'TnsFindingModelSNP',
'TitleRiskScoringModel_2_0',
'ClientIPin10',
'TnsFindingModelFraud',
'SignIn_BaseRbo2',
'Offer_EUP_Rbo',
'Offer_Rbo',
'FSA',
'Processing_elvis_events',
'NSS_API',
'MyebayBetaRedirect',
'MOTORS_PARTNER_RECIPIENT_HANDLER',
'ElvisEngine',
'PreSyi_Eval_Detail',
'RADAR',
'Latency',
'SD_TAggrCache',
'MEA',
'SD_TitleAggregatorShopping',
'KEM',
'SD_Batch',
'KG',
'ITEM_VISIBILITY',
'APPLOGIC',
'OOPexecute',
'ERRPAGE',
'FQ_RECIPIENT_HANDLER',
'RADAR_POST_Eval_Detail',
'Captcha',
'V3Rules_Detail',
'FilterEngDetail_AAQBuyerSentPre',
'Task',
'SYI_EUP_Report',
'WRITE_MOVE_FILE',
'KG_SYI',
'BatchRecord',
'SD_TitleDesc',
'B001_RTAM',
'SignIn_Report',
'SD_StoreUrl',
'CACHE_REFRESH',
'TKOItem',
'KG_EXTERNAL_CALL',
'WatchDelSkipped',
'SD_Completed',
'RequestCounts',
'FilterEngDetail_RTQEmail',
'FilterEngDetail_AAQBuyerSentPost',
'RYI_EUP_Rbo',
'RYI_Rbo',
'MF_RECIPIENT_HANDLER',
'SYI_Report',
'LCBT',
'HalfRyiSingle_Eval_Detail',
'FilterEngDetail_AAQBuyerSentEmail',
'ViewAdAbTests',
'MakeOffer_EUP_Rbo',
'MakeOffer_Rbo',
'ShipCalc Url',
'Offer_Report',
'TKOUser',
'RADAR_POST_EUP_Rbo',
'SiteStat_LeftNav',
'SiteStat_UserIsSeller',
'FilterEngDetail_RTQPost',
'INFO',
'Offer_EUP_Report',
'RADAR_POST_Rbo',
'SignIn_EUP_Rbo',
'Mail_XML',
'Processing_item_events',
'GEM',
'Mail',
'ELVIS',
'FilterEngDetail_SYIRYI',
'SD_TitleCach',
'Processing_itemend_events',
'HalfRyiSingle_EUP_Rbo',
'AlertNotify',
'AVSRedirectLog',
'BillerService',
'MENMSG',
'UserSegSvc',
'PRICE_CHANGE_ALERT_RECIPIENT_HANDLER',
'NSSOptP',
'PreSyi_Rbo',
'PreSyi_EUP_Rbo',
'NOTIFICATION.BES.BID_NEW',
'Mail_Connect',
'Mail_Close',
'GEMRECORD',
'McapCommunicatorTx',
'IMGPROC',
'KnownGood',
'FilterEngDetail_RTQPre',
'AUTH',
'BULKAPI',
'AAQBuyerSentPre_Eval_Detail',
'RYI_EUP_Report',
'HalfRyiSingle_Rbo',
'MakeOffer_Report',
'ItemClosureLOGIC',
'MakeOffer_EUP_Report',
'RADAR_POST_Report',
'BidBinStats',
'Iterator',
'RADAR_POST_EUP_Report',
'SessionStats',
'RYI_Report',
'SIBE',
'EOT',
'UsageProcessingTx',
'Processing_itemrevised_events',
'HalfSyiSingle_Eval_Detail',
'SignIn_EUP_Report',
'Referer',
'RTQEmail_Eval_Detail',
'AAQBuyerSentPost_Eval_Detail',
'AAQBuyerSentEmail_Eval_Detail',
'NCFEvent',
'CHKOUT',
'SocketWriter',
'RTQPost_Eval_Detail',
'HalfRyiSingle_Report',
'HalfRyiSingle_EUP_Report',
'DcpConnectRequest',
'SD_CatalogCache',
'PreSyi_Report',
'BotSignIn',
'Total Listing : BE_MAIN',
'Z',
'ItemPopularityScore',
'SD_TitleCacheOverflow',
'UserSegmentationCommand',
'FilterEngDetail_AAQSellerSentPre',
'PreSyi_EUP_Report',
'FilterEngDetail_AAQSellerSentPost',
'FilterEngDetail_BestOffer',
'RS',
'FilterEngDetail_AAQSellerSentEmail',
'HalfSyiSingle_EUP_Rbo',
'Service',
'Total Listing : BE_DE',
'BULK.API.HALF.PUT'),
DEFAULT SUBPARTITION etx
)
(
START ('2008-09-30')
END ('2008-10-01')
EVERY (INTERVAL '1 day')
);
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1" for table "sg_cal_detail_r1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf" for table "sg_cal_detail_r1_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf_3_prt_et1" for table "sg_cal_detail_r1_1_prt_1_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf_3_prt_et2" for table "sg_cal_detail_r1_1_prt_1_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf_3_prt_et3" for table "sg_cal_detail_r1_1_prt_1_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf_3_prt_et4" for table "sg_cal_detail_r1_1_prt_1_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_smf_3_prt_etx" for table "sg_cal_detail_r1_1_prt_1_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc" for table "sg_cal_detail_r1_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc_3_prt_et1" for table "sg_cal_detail_r1_1_prt_1_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc_3_prt_et2" for table "sg_cal_detail_r1_1_prt_1_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc_3_prt_et3" for table "sg_cal_detail_r1_1_prt_1_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc_3_prt_et4" for table "sg_cal_detail_r1_1_prt_1_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_sjc_3_prt_etx" for table "sg_cal_detail_r1_1_prt_1_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den" for table "sg_cal_detail_r1_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den_3_prt_et1" for table "sg_cal_detail_r1_1_prt_1_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den_3_prt_et2" for table "sg_cal_detail_r1_1_prt_1_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den_3_prt_et3" for table "sg_cal_detail_r1_1_prt_1_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den_3_prt_et4" for table "sg_cal_detail_r1_1_prt_1_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_den_3_prt_etx" for table "sg_cal_detail_r1_1_prt_1_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx" for table "sg_cal_detail_r1_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx_3_prt_et1" for table "sg_cal_detail_r1_1_prt_1_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx_3_prt_et2" for table "sg_cal_detail_r1_1_prt_1_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx_3_prt_et3" for table "sg_cal_detail_r1_1_prt_1_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx_3_prt_et4" for table "sg_cal_detail_r1_1_prt_1_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_phx_3_prt_etx" for table "sg_cal_detail_r1_1_prt_1_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc" for table "sg_cal_detail_r1_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc_3_prt_et1" for table "sg_cal_detail_r1_1_prt_1_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc_3_prt_et2" for table "sg_cal_detail_r1_1_prt_1_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc_3_prt_et3" for table "sg_cal_detail_r1_1_prt_1_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc_3_prt_et4" for table "sg_cal_detail_r1_1_prt_1_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_1_2_prt_xdc_3_prt_etx" for table "sg_cal_detail_r1_1_prt_1_2_prt_xdc"
ALTER TABLE sg_cal_detail_r1 ADD PARTITION START ('2008-10-01') INCLUSIVE END ('2008-10-02') EXCLUSIVE
WITH (appendonly=true, compresslevel=5, blocksize=2097152);
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926" for table "sg_cal_detail_r1"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf" for table "sg_cal_detail_r1_1_prt_r348824926"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf_3_prt_et1" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf_3_prt_et2" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf_3_prt_et3" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf_3_prt_et4" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf_3_prt_etx" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_smf"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc" for table "sg_cal_detail_r1_1_prt_r348824926"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc_3_prt_et1" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc_3_prt_et2" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc_3_prt_et3" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc_3_prt_et4" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc_3_prt_etx" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_sjc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den" for table "sg_cal_detail_r1_1_prt_r348824926"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den_3_prt_et1" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den_3_prt_et2" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den_3_prt_et3" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den_3_prt_et4" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_den_3_prt_etx" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_den"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx" for table "sg_cal_detail_r1_1_prt_r348824926"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx_3_prt_et1" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx_3_prt_et2" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx_3_prt_et3" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx_3_prt_et4" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx_3_prt_etx" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_phx"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc" for table "sg_cal_detail_r1_1_prt_r348824926"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc_3_prt_et1" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc_3_prt_et2" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc_3_prt_et3" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc_3_prt_et4" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc"
NOTICE:  CREATE TABLE will create partition "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc_3_prt_etx" for table "sg_cal_detail_r1_1_prt_r348824926_2_prt_xdc"
select count(*) from pg_partitions where tablename = 'sg_cal_detail_r1';
 count 
-------
    62
(1 row)

drop table sg_cal_detail_r1;
create table j (i int, a date) partition by range(i)
subpartition by list(a) subpartition template
(subpartition a values(1, 2, 3, 4),
subpartition b values(5, 6, 7, 8))
(
start (date '2001-01-01'),
start (date '2002-01-01'),
start (date '2003-01-01'),
start (date '2004-01-01'),
start (date '2005-01-01')
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
ERROR:  cannot coerce RANGE partition parameter ('01-01-2001'::date) to column type (integer)
set optimizer_analyze_root_partition=on;
create table mpp3487 (i int) partition by range (i) (start(1) end(10) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_1" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_2" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_3" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_4" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_5" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_6" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_7" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_8" for table "mpp3487"
NOTICE:  CREATE TABLE will create partition "mpp3487_1_prt_9" for table "mpp3487"
insert into mpp3487 select i from generate_series(1, 9) i;
vacuum analyze mpp3487;
select  schemaname, tablename, attname, null_frac, avg_width, n_distinct, most_common_freqs, histogram_bounds from pg_stats where tablename like 'mpp3487%' order by 2;
  schemaname   |    tablename    | attname | null_frac | avg_width | n_distinct | most_common_freqs |  histogram_bounds   
---------------+-----------------+---------+-----------+-----------+------------+-------------------+---------------------
 bfv_partition | mpp3487         | i       |         0 |         4 |         -1 |                   | {1,2,3,4,5,6,7,8,9}
 bfv_partition | mpp3487_1_prt_1 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_2 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_3 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_4 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_5 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_6 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_7 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_8 | i       |         0 |         4 |         -1 |                   | 
 bfv_partition | mpp3487_1_prt_9 | i       |         0 |         4 |         -1 |                   | 
(10 rows)

drop table mpp3487;
-- Negative Test for Alter subpartition template
CREATE TABLE qa147sales (trans_id int, date date, amount 
decimal(9,2), region text)  
DISTRIBUTED BY (trans_id) 
PARTITION BY RANGE (date) 
SUBPARTITION BY LIST (region) 
SUBPARTITION TEMPLATE 
( SUBPARTITION usa VALUES ('usa'), 
  SUBPARTITION asia VALUES ('asia'), 
  SUBPARTITION europe VALUES ('europe') ) 
( START (date '2008-01-01') INCLUSIVE 
   END (date '2009-01-01') EXCLUSIVE 
   EVERY (INTERVAL '1 month') ); 
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_usa" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_asia" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_europe" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_usa" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_asia" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_europe" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_usa" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_asia" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_europe" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_usa" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_asia" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_europe" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_usa" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_asia" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_europe" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_usa" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_asia" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_europe" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_usa" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_asia" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_europe" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_usa" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_asia" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_europe" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_usa" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_asia" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_europe" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_usa" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_asia" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_europe" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_usa" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_asia" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_europe" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_usa" for table "qa147sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_asia" for table "qa147sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_europe" for table "qa147sales_1_prt_12"
-- Invalid TEMPLATE
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (NULL);
ERROR:  syntax error at or near "NULL"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (NULL);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (-1);
ERROR:  syntax error at or near "-"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (-1);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (10000);
ERROR:  syntax error at or near "10000"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (10000);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ('');
ERROR:  syntax error at or near "''"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ('');
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ("");
ERROR:  zero-length delimited identifier at or near """"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ("");
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (*);
ERROR:  syntax error at or near "*"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (*);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (1*);
ERROR:  syntax error at or near "1"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (1*);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ("1*");
ERROR:  syntax error at or near ""1*""
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ("1*");
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (ABC);
ERROR:  syntax error at or near "ABC"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (ABC);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ($);
ERROR:  syntax error at or near "$"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ($);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (%%);
ERROR:  syntax error at or near "%%"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (%%);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (#);
ERROR:  syntax error at or near "#"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (#);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (!);
ERROR:  syntax error at or near "!"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (!);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (&);
ERROR:  syntax error at or near "&"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (&);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (^);
ERROR:  syntax error at or near "^"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (^);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (@);
ERROR:  syntax error at or near "@"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (@);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (<);
ERROR:  syntax error at or near "<"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (<);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (>);
ERROR:  syntax error at or near ">"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (>);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (.);
ERROR:  syntax error at or near "."
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (.);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (?);
ERROR:  syntax error at or near "?"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (?);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (/);
ERROR:  syntax error at or near "/"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (/);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (|);
ERROR:  syntax error at or near "|"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (|);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (~);
ERROR:  syntax error at or near "~"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (~);
                                                          ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (`);
ERROR:  syntax error at or near "`"
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE (`);
                                                          ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |          partitionboundary           
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+--------------------------------------
 bfv_partition | qa147sales | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 bfv_partition | qa147sales | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
 bfv_partition | qa147sales | europe        | list          |              1 |               |                 3 | 'europe'::text      |                     |                         |                   |                       |                      | f                  | SUBPARTITION europe VALUES('europe')
(3 rows)

drop table qa147sales;
select * from pg_partition_templates where tablename='qa147sales';;
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- Now with Schema
-- Negative Test for alter subpartition template with Schema
create schema qa147;
CREATE TABLE qa147.sales (trans_id int, date date, amount
decimal(9,2), region text)
DISTRIBUTED BY (trans_id)
PARTITION BY RANGE (date)
SUBPARTITION BY LIST (region)
SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'),
  SUBPARTITION asia VALUES ('asia'),
  SUBPARTITION europe VALUES ('europe') )
( START (date '2008-01-01') INCLUSIVE
   END (date '2009-01-01') EXCLUSIVE
   EVERY (INTERVAL '1 month') );
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_usa" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_asia" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_europe" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_usa" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_asia" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_europe" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_usa" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_asia" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_europe" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_usa" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_asia" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_europe" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_usa" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_asia" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_europe" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_usa" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_asia" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_europe" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_usa" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_asia" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_europe" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_usa" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_asia" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_europe" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_usa" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_asia" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_europe" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_usa" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_asia" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_europe" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_usa" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_asia" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_europe" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_usa" for table "sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_asia" for table "sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_europe" for table "sales_1_prt_12"
-- Invalid TEMPLATE
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (NULL);
ERROR:  syntax error at or near "NULL"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (NULL);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (-1);
ERROR:  syntax error at or near "-"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (-1);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (10000);
ERROR:  syntax error at or near "10000"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (10000);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ('');
ERROR:  syntax error at or near "''"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ('');
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ("");
ERROR:  zero-length delimited identifier at or near """"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ("");
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (*);
ERROR:  syntax error at or near "*"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (*);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (1*);
ERROR:  syntax error at or near "1"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (1*);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ("1*");
ERROR:  syntax error at or near ""1*""
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ("1*");
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (ABC);
ERROR:  syntax error at or near "ABC"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (ABC);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ($);
ERROR:  syntax error at or near "$"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ($);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (%%);
ERROR:  syntax error at or near "%%"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (%%);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (#);
ERROR:  syntax error at or near "#"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (#);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (!);
ERROR:  syntax error at or near "!"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (!);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (&);
ERROR:  syntax error at or near "&"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (&);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (^);
ERROR:  syntax error at or near "^"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (^);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (@);
ERROR:  syntax error at or near "@"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (@);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (<);
ERROR:  syntax error at or near "<"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (<);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (>);
ERROR:  syntax error at or near ">"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (>);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (.);
ERROR:  syntax error at or near "."
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (.);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (?);
ERROR:  syntax error at or near "?"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (?);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (/);
ERROR:  syntax error at or near "/"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (/);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (|);
ERROR:  syntax error at or near "|"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (|);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (~);
ERROR:  syntax error at or near "~"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (~);
                                                           ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (`);
ERROR:  syntax error at or near "`"
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE (`);
                                                           ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |          partitionboundary           
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+--------------------------------------
 qa147      | sales     | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 qa147      | sales     | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
 qa147      | sales     | europe        | list          |              1 |               |                 3 | 'europe'::text      |                     |                         |                   |                       |                      | f                  | SUBPARTITION europe VALUES('europe')
(3 rows)

set client_min_messages='warning';
drop schema qa147 cascade;
reset client_min_messages;
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- Mix-Match for Alter subpartition template
CREATE TABLE qa147sales (trans_id int, date date, amount 
decimal(9,2), region text)  
DISTRIBUTED BY (trans_id) 
PARTITION BY RANGE (date) 
SUBPARTITION BY LIST (region) 
SUBPARTITION TEMPLATE 
( SUBPARTITION usa VALUES ('usa'), 
  SUBPARTITION asia VALUES ('asia'), 
  SUBPARTITION europe VALUES ('europe') ) 
( START (date '2008-01-01') INCLUSIVE 
   END (date '2009-01-01') EXCLUSIVE 
   EVERY (INTERVAL '1 month') ); 
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_usa" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_asia" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_1_2_prt_europe" for table "qa147sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_usa" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_asia" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_2_2_prt_europe" for table "qa147sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_usa" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_asia" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_3_2_prt_europe" for table "qa147sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_usa" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_asia" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_4_2_prt_europe" for table "qa147sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_usa" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_asia" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_5_2_prt_europe" for table "qa147sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_usa" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_asia" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_6_2_prt_europe" for table "qa147sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_usa" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_asia" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_7_2_prt_europe" for table "qa147sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_usa" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_asia" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_8_2_prt_europe" for table "qa147sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_usa" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_asia" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_9_2_prt_europe" for table "qa147sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_usa" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_asia" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_10_2_prt_europe" for table "qa147sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_usa" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_asia" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_11_2_prt_europe" for table "qa147sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_usa" for table "qa147sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_asia" for table "qa147sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_12_2_prt_europe" for table "qa147sales_1_prt_12"
-- Clear TEMPLATE
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ();
NOTICE:  dropped level 1 subpartition template specification for relation "qa147sales"
select * from pg_partition_templates where tablename='qa147sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- This will overwrite previous subpartition template
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'), SUBPARTITION asia VALUES ('asia') );
NOTICE:  adding level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usa" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_asia" for table "qa147sales_1_prt_subpartition_template"
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 bfv_partition | qa147sales | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 bfv_partition | qa147sales | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Invalid subpartition
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2008-02-01') EXCLUSIVE );
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2009-01-01') EXCLUSIVE EVERY (INTERVAL '1 month') );
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 bfv_partition | qa147sales | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 bfv_partition | qa147sales | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( 
SUBPARTITION usa1 VALUES('usa'),
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE);
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 bfv_partition | qa147sales | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 bfv_partition | qa147sales | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( 
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE,
SUBPARTITION usa1 VALUES('usa'));
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 bfv_partition | qa147sales | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 bfv_partition | qa147sales | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

drop table qa147sales;
CREATE TABLE qa147sales (trans_id int, date date, amount
decimal(9,2), region text)
DISTRIBUTED BY (trans_id)
PARTITION BY LIST (region)
SUBPARTITION BY RANGE (date)
SUBPARTITION TEMPLATE
( START (date '2008-01-01') INCLUSIVE
   END (date '2009-01-01') EXCLUSIVE
   EVERY (INTERVAL '1 month') )
(
  PARTITION usa VALUES ('usa'),
  PARTITION asia VALUES ('asia'),
  PARTITION europe VALUES ('europe') );
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_1" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_2" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_3" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_4" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_5" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_6" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_7" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_8" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_9" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_10" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_11" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_usa_2_prt_12" for table "qa147sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_1" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_2" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_3" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_4" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_5" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_6" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_7" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_8" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_9" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_10" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_11" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_asia_2_prt_12" for table "qa147sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_1" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_2" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_3" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_4" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_5" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_6" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_7" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_8" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_9" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_10" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_11" for table "qa147sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_europe_2_prt_12" for table "qa147sales_1_prt_europe"
-- Clear TEMPLATE
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE ();
NOTICE:  dropped level 1 subpartition template specification for relation "qa147sales"
select * from pg_partition_templates where tablename='qa147sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- This will overwrite previous subpartition template
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2008-02-01') EXCLUSIVE );
NOTICE:  adding level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1" for table "qa147sales_1_prt_subpartition_template"
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                           partitionboundary                            
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+------------------------------------------------------------------------
 bfv_partition | qa147sales | usam1         | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     |                      | f                  | SUBPARTITION usam1 START ('01-01-2008'::date) END ('02-01-2008'::date)
(1 row)

ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2009-01-01') EXCLUSIVE EVERY (INTERVAL '1 month') );
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_1" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_2" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_3" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_4" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_5" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_6" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_7" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_8" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_9" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_10" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_11" for table "qa147sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template_2_prt_usam1_12" for table "qa147sales_1_prt_subpartition_template"
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 bfv_partition | qa147sales | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Invalid subpartition template
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'), SUBPARTITION asia VALUES ('asia') );
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid use of LIST boundary specification in partition "usa" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 bfv_partition | qa147sales | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
(
SUBPARTITION usa1 VALUES('usa'),
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE);
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid use of LIST boundary specification in partition "usa1" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 bfv_partition | qa147sales | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
( 
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE,
SUBPARTITION usa1 VALUES('usa'));
NOTICE:  replacing level 1 subpartition template specification for relation "qa147sales"
NOTICE:  CREATE TABLE will create partition "qa147sales_1_prt_subpartition_template" for table "qa147sales"
ERROR:  invalid use of LIST boundary specification in partition "usa1" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where tablename='qa147sales';
  schemaname   | tablename  | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
---------------+------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 bfv_partition | qa147sales | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 bfv_partition | qa147sales | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

drop table qa147sales;
select * from pg_partition_templates where tablename='qa147sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- Now with Schema
-- Mix-Match for Alter subpartition template in a schema
create schema qa147;
CREATE TABLE qa147.sales (trans_id int, date date, amount
decimal(9,2), region text)
DISTRIBUTED BY (trans_id)
PARTITION BY RANGE (date)
SUBPARTITION BY LIST (region)
SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'),
  SUBPARTITION asia VALUES ('asia'),
  SUBPARTITION europe VALUES ('europe') )
( START (date '2008-01-01') INCLUSIVE
   END (date '2009-01-01') EXCLUSIVE
   EVERY (INTERVAL '1 month') );
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_usa" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_asia" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_1_2_prt_europe" for table "sales_1_prt_1"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_usa" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_asia" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_2_2_prt_europe" for table "sales_1_prt_2"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_usa" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_asia" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_3_2_prt_europe" for table "sales_1_prt_3"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_usa" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_asia" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_4_2_prt_europe" for table "sales_1_prt_4"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_usa" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_asia" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_5_2_prt_europe" for table "sales_1_prt_5"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_usa" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_asia" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_6_2_prt_europe" for table "sales_1_prt_6"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_usa" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_asia" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_7_2_prt_europe" for table "sales_1_prt_7"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_usa" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_asia" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_8_2_prt_europe" for table "sales_1_prt_8"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_usa" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_asia" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_9_2_prt_europe" for table "sales_1_prt_9"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_usa" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_asia" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_10_2_prt_europe" for table "sales_1_prt_10"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_usa" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_asia" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_11_2_prt_europe" for table "sales_1_prt_11"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_usa" for table "sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_asia" for table "sales_1_prt_12"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_12_2_prt_europe" for table "sales_1_prt_12"
-- Clear TEMPLATE
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ();
NOTICE:  dropped level 1 subpartition template specification for relation "sales"
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- This will overwrite previous subpartition template
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'), SUBPARTITION asia VALUES ('asia') );
NOTICE:  adding level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usa" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_asia" for table "sales_1_prt_subpartition_template"
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 qa147      | sales     | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 qa147      | sales     | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Invalid subpartition
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2008-02-01') EXCLUSIVE );
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2009-01-01') EXCLUSIVE EVERY (INTERVAL '1 month') );
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 qa147      | sales     | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 qa147      | sales     | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
(
SUBPARTITION usa1 VALUES('usa'),
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE);
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 qa147      | sales     | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 qa147      | sales     | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
(
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE,
SUBPARTITION usa1 VALUES('usa'));
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid boundary specification for LIST partition
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |        partitionboundary         
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+----------------------------------
 qa147      | sales     | usa           | list          |              1 |               |                 1 | 'usa'::text         |                     |                         |                   |                       |                      | f                  | SUBPARTITION usa VALUES('usa')
 qa147      | sales     | asia          | list          |              1 |               |                 2 | 'asia'::text        |                     |                         |                   |                       |                      | f                  | SUBPARTITION asia VALUES('asia')
(2 rows)

DROP SCHEMA qa147 cascade;
NOTICE:  drop cascades to table qa147.sales
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

CREATE SCHEMA qa147;
CREATE TABLE qa147.sales (trans_id int, date date, amount
decimal(9,2), region text)
DISTRIBUTED BY (trans_id)
PARTITION BY LIST (region)
SUBPARTITION BY RANGE (date)
SUBPARTITION TEMPLATE
( START (date '2008-01-01') INCLUSIVE
   END (date '2009-01-01') EXCLUSIVE
   EVERY (INTERVAL '1 month') )
(
  PARTITION usa VALUES ('usa'),
  PARTITION asia VALUES ('asia'),
  PARTITION europe VALUES ('europe') );
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_1" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_2" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_3" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_4" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_5" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_6" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_7" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_8" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_9" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_10" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_11" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_usa_2_prt_12" for table "sales_1_prt_usa"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_1" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_2" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_3" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_4" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_5" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_6" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_7" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_8" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_9" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_10" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_11" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_asia_2_prt_12" for table "sales_1_prt_asia"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_1" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_2" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_3" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_4" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_5" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_6" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_7" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_8" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_9" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_10" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_11" for table "sales_1_prt_europe"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_europe_2_prt_12" for table "sales_1_prt_europe"
-- Clear TEMPLATE
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE ();
NOTICE:  dropped level 1 subpartition template specification for relation "sales"
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

-- This will overwrite previous subpartition template
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2008-02-01') EXCLUSIVE );
NOTICE:  adding level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1" for table "sales_1_prt_subpartition_template"
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                           partitionboundary                            
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+------------------------------------------------------------------------
 qa147      | sales     | usam1         | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     |                      | f                  | SUBPARTITION usam1 START ('01-01-2008'::date) END ('02-01-2008'::date)
(1 row)

ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usam1 start (date '2008-01-01') INCLUSIVE END (date '2009-01-01') EXCLUSIVE EVERY (INTERVAL '1 month') );
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_1" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_2" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_3" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_4" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_5" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_6" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_7" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_8" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_9" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_10" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_11" for table "sales_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template_2_prt_usam1_12" for table "sales_1_prt_subpartition_template"
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 qa147      | sales     | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Invalid subpartition template
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
( SUBPARTITION usa VALUES ('usa'), SUBPARTITION asia VALUES ('asia') );
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid use of LIST boundary specification in partition "usa" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 qa147      | sales     | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
(
SUBPARTITION usa1 VALUES('usa'),
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE);
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid use of LIST boundary specification in partition "usa1" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 qa147      | sales     | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

-- Mix and Match RANGE/LIST . Expect to Error
ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
(
SUBPARTITION usadate start (date '2008-01-01') INCLUSIVE END(date '2009-01-01') EXCLUSIVE,
SUBPARTITION usa1 VALUES('usa'));
NOTICE:  replacing level 1 subpartition template specification for relation "sales"
NOTICE:  CREATE TABLE will create partition "sales_1_prt_subpartition_template" for table "sales"
ERROR:  invalid use of LIST boundary specification in partition "usa1" of type RANGE (at depth 2)
LINE 1: ALTER TABLE qa147.sales SET SUBPARTITION TEMPLATE
                     ^
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend  | partitionendinclusive | partitioneveryclause | partitionisdefault |                                           partitionboundary                                           
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+--------------------+-----------------------+----------------------+--------------------+-------------------------------------------------------------------------------------------------------
 qa147      | sales     | usam1_1       | range         |              1 |             1 |                 1 |                     | '01-01-2008'::date  | t                       | '02-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_1 START ('01-01-2008'::date) END ('02-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_2       | range         |              1 |             2 |                 2 |                     | '02-01-2008'::date  | t                       | '03-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_2 START ('02-01-2008'::date) END ('03-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_3       | range         |              1 |             3 |                 3 |                     | '03-01-2008'::date  | t                       | '04-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_3 START ('03-01-2008'::date) END ('04-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_4       | range         |              1 |             4 |                 4 |                     | '04-01-2008'::date  | t                       | '05-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_4 START ('04-01-2008'::date) END ('05-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_5       | range         |              1 |             5 |                 5 |                     | '05-01-2008'::date  | t                       | '06-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_5 START ('05-01-2008'::date) END ('06-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_6       | range         |              1 |             6 |                 6 |                     | '06-01-2008'::date  | t                       | '07-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_6 START ('06-01-2008'::date) END ('07-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_7       | range         |              1 |             7 |                 7 |                     | '07-01-2008'::date  | t                       | '08-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_7 START ('07-01-2008'::date) END ('08-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_8       | range         |              1 |             8 |                 8 |                     | '08-01-2008'::date  | t                       | '09-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_8 START ('08-01-2008'::date) END ('09-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_9       | range         |              1 |             9 |                 9 |                     | '09-01-2008'::date  | t                       | '10-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_9 START ('09-01-2008'::date) END ('10-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_10      | range         |              1 |            10 |                10 |                     | '10-01-2008'::date  | t                       | '11-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_10 START ('10-01-2008'::date) END ('11-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_11      | range         |              1 |            11 |                11 |                     | '11-01-2008'::date  | t                       | '12-01-2008'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_11 START ('11-01-2008'::date) END ('12-01-2008'::date) EVERY ('@ 1 mon'::interval)
 qa147      | sales     | usam1_12      | range         |              1 |            12 |                12 |                     | '12-01-2008'::date  | t                       | '01-01-2009'::date | f                     | '@ 1 mon'::interval  | f                  | SUBPARTITION usam1_12 START ('12-01-2008'::date) END ('01-01-2009'::date) EVERY ('@ 1 mon'::interval)
(12 rows)

drop schema qa147 cascade;
NOTICE:  drop cascades to table qa147.sales
select * from pg_partition_templates where schemaname='qa147' and tablename='sales';
 schemaname | tablename | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault | partitionboundary 
------------+-----------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+-------------------
(0 rows)

set gp_autostats_mode=on_change;
set gp_autostats_on_change_threshold=100;
create table mpp5427 (i int) partition by range (i) (start(1) end(10000000) every(100000));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'i' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_1" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_2" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_3" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_4" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_5" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_6" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_7" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_8" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_9" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_10" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_11" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_12" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_13" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_14" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_15" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_16" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_17" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_18" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_19" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_20" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_21" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_22" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_23" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_24" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_25" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_26" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_27" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_28" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_29" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_30" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_31" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_32" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_33" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_34" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_35" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_36" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_37" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_38" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_39" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_40" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_41" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_42" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_43" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_44" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_45" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_46" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_47" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_48" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_49" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_50" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_51" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_52" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_53" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_54" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_55" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_56" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_57" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_58" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_59" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_60" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_61" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_62" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_63" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_64" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_65" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_66" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_67" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_68" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_69" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_70" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_71" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_72" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_73" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_74" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_75" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_76" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_77" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_78" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_79" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_80" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_81" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_82" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_83" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_84" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_85" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_86" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_87" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_88" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_89" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_90" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_91" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_92" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_93" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_94" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_95" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_96" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_97" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_98" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_99" for table "mpp5427"
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_100" for table "mpp5427"
insert into mpp5427 select i from generate_series(1, 100) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

insert into mpp5427 select i from generate_series(1, 100000) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

insert into mpp5427 select i from generate_series(1, 1000000) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

truncate table mpp5427;
alter table mpp5427 add default partition default_part;
NOTICE:  CREATE TABLE will create partition "mpp5427_1_prt_default_part" for table "mpp5427"
insert into mpp5427 select i from generate_series(1, 100) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

insert into mpp5427 select i from generate_series(1, 100000) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

insert into mpp5427 select i from generate_series(1, 1000000) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

insert into mpp5427 select i from generate_series(10000000, 15000000) i;
select * from pg_stats where tablename like 'mpp5427%';
 schemaname | tablename | attname | null_frac | avg_width | n_distinct | most_common_vals | most_common_freqs | histogram_bounds | correlation 
------------+-----------+---------+-----------+-----------+------------+------------------+-------------------+------------------+-------------
(0 rows)

drop table mpp5427;
-- MPP-5524
create table mpp5524 (a int, b int, c int, d int) partition by range(d) (start(1) end(20) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_1" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_2" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_3" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_4" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_5" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_6" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_7" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_8" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_9" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_10" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_11" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_12" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_13" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_14" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_15" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_16" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_17" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_18" for table "mpp5524"
NOTICE:  CREATE TABLE will create partition "mpp5524_1_prt_19" for table "mpp5524"
-- Not allowed
alter table mpp5524 alter partition for(rank(1)) set distributed by (b);
ERROR:  cannot ALTER PARTITION ... SET DISTRIBUTED BY for partition for rank 1 of relation "mpp5524"
HINT:  distribution policy of partition must match parent
-- Not allowed
alter table mpp5524 alter partition for(rank(2)) set distributed by (c);
ERROR:  cannot ALTER PARTITION ... SET DISTRIBUTED BY for partition for rank 2 of relation "mpp5524"
HINT:  distribution policy of partition must match parent
insert into mpp5524 select i, i+1, i+2, i+3 from generate_series(1, 10) i;
drop table mpp5524;
CREATE TABLE fff_main (id int, rank int, year int, gender char(1), count int)
 partition by range (year) ( start (2001) end (2006) every ('1'));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'id' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_1" for table "fff_main"
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_2" for table "fff_main"
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_3" for table "fff_main"
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_4" for table "fff_main"
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_5" for table "fff_main"
alter table fff_main_1_prt_1 drop oids;
ERROR:  can't drop a column from "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 no inherit fff_main;
ERROR:  can't alter inheritance on "fff_main_1_prt_1"; it is a partitioned table or part thereof
alter table fff_main_1_prt_1 drop column rank;
ERROR:  can't drop a column from "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 add partition;
ERROR:  can't alter "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 drop partition;
ERROR:  can't alter "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 add column c int;
ERROR:  can't add a column to "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
create table fff_main2 (like fff_main);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause, defaulting to distribution columns from LIKE table
alter table fff_main_1_prt_1 inherit fff_main2;
ERROR:  can't alter inheritance on "fff_main_1_prt_1"; it is a partitioned table or part thereof
alter table fff_main_1_prt_1 alter column i type bigint;
ERROR:  can't alter a column datatype of "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 set without oids;
ERROR:  can't alter the oid setting of "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main_1_prt_1 drop constraint fff_main_1_prt_1_check;
ERROR:  can't drop a constraint from "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
-- Add default partition
alter table fff_main_1_prt_1 split partition def at ('2009');
ERROR:  can't split parts of "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main add default partition def;
NOTICE:  CREATE TABLE will create partition "fff_main_1_prt_def" for table "fff_main"
alter table fff_main_1_prt_1 split partition def at ('2009');
ERROR:  can't split parts of "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
-- Unable to coalesce or merge, not supported
alter table fff_main_1_prt_1 exchange partition aa  with table fff_main_1_prt_2 without validation;
ERROR:  can't exchange a part into "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
alter table fff_main add partition aa start ('2008') end ('2009');
ERROR:  cannot add RANGE partition "aa" to relation "fff_main" with DEFAULT partition "def"
HINT:  need to SPLIT partition "def"
alter table fff_main add partition bb start ('2009') end ('2010');
ERROR:  cannot add RANGE partition "bb" to relation "fff_main" with DEFAULT partition "def"
HINT:  need to SPLIT partition "def"
alter table fff_main_1_prt_1 add partition cc start ('2010') end ('2011');
ERROR:  can't alter "fff_main_1_prt_1"; it is part of a partitioned table
HINT:  You may be able to perform the operation on the partitioned table as a whole.
drop table fff_main, fff_main2;
CREATE TABLE partsupp_def ( ps_partkey int,
ps_suppkey integer, ps_availqty integer,
ps_supplycost numeric, ps_comment character varying(199) )
PARTITION BY RANGE(ps_partkey)
subpartition by range (ps_partkey)
subpartition template
( subpartition sp1 start(0) end (300) every(100),
  default subpartition subdef
)
( partition aa start (0) end (300) every(100),
  default partition def
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'ps_partkey' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_def" for table "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_def_2_prt_subdef" for table "partsupp_def_1_prt_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_def_2_prt_sp1_1" for table "partsupp_def_1_prt_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_def_2_prt_sp1_2" for table "partsupp_def_1_prt_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_def_2_prt_sp1_3" for table "partsupp_def_1_prt_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_1" for table "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_1_2_prt_subdef" for table "partsupp_def_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_1_2_prt_sp1_1" for table "partsupp_def_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_1_2_prt_sp1_2" for table "partsupp_def_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_1_2_prt_sp1_3" for table "partsupp_def_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_2" for table "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_2_2_prt_subdef" for table "partsupp_def_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_2_2_prt_sp1_1" for table "partsupp_def_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_2_2_prt_sp1_2" for table "partsupp_def_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_2_2_prt_sp1_3" for table "partsupp_def_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_3" for table "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_3_2_prt_subdef" for table "partsupp_def_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_3_2_prt_sp1_1" for table "partsupp_def_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_3_2_prt_sp1_2" for table "partsupp_def_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_aa_3_2_prt_sp1_3" for table "partsupp_def_1_prt_aa_3"
alter table partsupp_def set subpartition template();
NOTICE:  dropped level 1 subpartition template specification for relation "partsupp_def"
alter table partsupp_def set subpartition template( subpartition aaa start(400) end (600) every(100) );
NOTICE:  adding level 1 subpartition template specification for relation "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_subpartition_template" for table "partsupp_def"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_subpartition_template_2_prt_aaa_1" for table "partsupp_def_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "partsupp_def_1_prt_subpartition_template_2_prt_aaa_2" for table "partsupp_def_1_prt_subpartition_template"
-- Note 1: We cannot add subpartition template since we have a default partition
-- If we want to use the new subpartition template, we have to drop the default partition first, and then readd the default partition
-- Note 2: We do not support this function yet, but if we are able to split default partition with default subpartition, would we
-- be using the subpartition template to definte the "new" partition or the existing one.
select * from pg_partition_templates where tablename='partsupp_def';
  schemaname   |  tablename   | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |                  partitionboundary                   
---------------+--------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+------------------------------------------------------
 bfv_partition | partsupp_def | aaa_1         | range         |              1 |             1 |                 1 |                     | 400                 | t                       | 500               | f                     | 100                  | f                  | SUBPARTITION aaa_1 START (400) END (500) EVERY (100)
 bfv_partition | partsupp_def | aaa_2         | range         |              1 |             2 |                 2 |                     | 500                 | t                       | 600               | f                     | 100                  | f                  | SUBPARTITION aaa_2 START (500) END (600) EVERY (100)
(2 rows)

alter table partsup_def add partition f1 start(0) end (300) every(100);
ERROR:  relation "partsup_def" does not exist
-- This works adding subpartition template with parent default partition
CREATE TABLE partsupp_def2 ( ps_partkey int,
ps_suppkey integer, ps_availqty integer,
ps_supplycost numeric, ps_comment character varying(199) )
PARTITION BY RANGE(ps_partkey)
subpartition by range (ps_partkey)
subpartition template
( subpartition sp1 start(0) end (300) every(100),
  default subpartition subdef
)
( partition aa start (0) end (300) every(100)
);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'ps_partkey' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_1" for table "partsupp_def2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_1_2_prt_subdef" for table "partsupp_def2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_1_2_prt_sp1_1" for table "partsupp_def2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_1_2_prt_sp1_2" for table "partsupp_def2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_1_2_prt_sp1_3" for table "partsupp_def2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_2" for table "partsupp_def2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_2_2_prt_subdef" for table "partsupp_def2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_2_2_prt_sp1_1" for table "partsupp_def2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_2_2_prt_sp1_2" for table "partsupp_def2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_2_2_prt_sp1_3" for table "partsupp_def2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_3" for table "partsupp_def2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_3_2_prt_subdef" for table "partsupp_def2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_3_2_prt_sp1_1" for table "partsupp_def2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_3_2_prt_sp1_2" for table "partsupp_def2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_aa_3_2_prt_sp1_3" for table "partsupp_def2_1_prt_aa_3"
alter table partsupp_def2 set subpartition template();
NOTICE:  dropped level 1 subpartition template specification for relation "partsupp_def2"
alter table partsupp_def2 set subpartition template( subpartition aaa start(400) end (600) every(100) );
NOTICE:  adding level 1 subpartition template specification for relation "partsupp_def2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_subpartition_template" for table "partsupp_def2"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_subpartition_template_2_prt_aaa_1" for table "partsupp_def2_1_prt_subpartition_template"
NOTICE:  CREATE TABLE will create partition "partsupp_def2_1_prt_subpartition_template_2_prt_aaa_2" for table "partsupp_def2_1_prt_subpartition_template"
select * from pg_partition_templates where tablename='partsupp_def2';
  schemaname   |   tablename   | partitionname | partitiontype | partitionlevel | partitionrank | partitionposition | partitionlistvalues | partitionrangestart | partitionstartinclusive | partitionrangeend | partitionendinclusive | partitioneveryclause | partitionisdefault |                  partitionboundary                   
---------------+---------------+---------------+---------------+----------------+---------------+-------------------+---------------------+---------------------+-------------------------+-------------------+-----------------------+----------------------+--------------------+------------------------------------------------------
 bfv_partition | partsupp_def2 | aaa_1         | range         |              1 |             1 |                 1 |                     | 400                 | t                       | 500               | f                     | 100                  | f                  | SUBPARTITION aaa_1 START (400) END (500) EVERY (100)
 bfv_partition | partsupp_def2 | aaa_2         | range         |              1 |             2 |                 2 |                     | 500                 | t                       | 600               | f                     | 100                  | f                  | SUBPARTITION aaa_2 START (500) END (600) EVERY (100)
(2 rows)

drop table partsupp_def;
drop table partsupp_def2;
create table mpp5431 (c1 date, c2 int) distributed by (c2) partition by range (c1) (partition p20090401 start('2009-04-01 00:00:00'::timestamp) inclusive end ('2009-04-02 00:00:00'::timestamp) exclusive);
NOTICE:  CREATE TABLE will create partition "mpp5431_1_prt_p20090401" for table "mpp5431"
alter table mpp5431 add partition p20090402 start('2009-04-02 00:00:00'::timestamp) inclusive end ('2009-04-03 00:00:00'::timestamp) exclusive;
NOTICE:  CREATE TABLE will create partition "mpp5431_1_prt_p20090402" for table "mpp5431"
create or replace function mpp5431_f1 () returns void as $$
begin
alter table mpp5431 add partition p20090403 start('2009-04-03 00:00:00'::timestamp) inclusive end ('2009-04-04 00:00:00'::timestamp) exclusive;
end;
$$ LANGUAGE 'plpgsql';
select mpp5431_f1();
NOTICE:  CREATE TABLE will create partition "mpp5431_1_prt_p20090403" for table "mpp5431"
CONTEXT:  SQL statement "alter table mpp5431 add partition p20090403 start('2009-04-03 00:00:00'::timestamp) inclusive end ('2009-04-04 00:00:00'::timestamp) exclusive"
PL/pgSQL function "mpp5431_f1" line 2 at SQL statement
 mpp5431_f1 
------------
 
(1 row)

drop function mpp5431_f1();
drop table mpp5431;
CREATE TABLE mpp6612 (
        unique1         int4,
        unique2         int4,
        two                     int4,
        four            int4,
        ten                     int4,
        twenty          int4,
        hundred         int4,
        thousand        int4,
        twothousand     int4,
        fivethous       int4,
        tenthous        int4,
        odd                     int4,
        even            int4,
        stringu1        name,
        stringu2        name,
        string4         name
) partition by range (unique1)
( partition aa start (0) end (1000) every (500), default partition default_part );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'unique1' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp6612_1_prt_default_part" for table "mpp6612"
NOTICE:  CREATE TABLE will create partition "mpp6612_1_prt_aa_1" for table "mpp6612"
NOTICE:  CREATE TABLE will create partition "mpp6612_1_prt_aa_2" for table "mpp6612"
-- Modify any other column
alter table mpp6612 alter column unique2 type char(15);
alter table mpp6612 alter column unique2 type char(10);
-- Show the dsecription
\d mpp6612*
      Table "bfv_partition.mpp6612"
   Column    |     Type      | Modifiers 
-------------+---------------+-----------
 unique1     | integer       | 
 unique2     | character(10) | 
 two         | integer       | 
 four        | integer       | 
 ten         | integer       | 
 twenty      | integer       | 
 hundred     | integer       | 
 thousand    | integer       | 
 twothousand | integer       | 
 fivethous   | integer       | 
 tenthous    | integer       | 
 odd         | integer       | 
 even        | integer       | 
 stringu1    | name          | 
 stringu2    | name          | 
 string4     | name          | 
Number of child tables: 3 (Use \d+ to list them.)
Distributed by: (unique1)
Partition by: (unique1)

Table "bfv_partition.mpp6612_1_prt_aa_1"
   Column    |     Type      | Modifiers 
-------------+---------------+-----------
 unique1     | integer       | 
 unique2     | character(10) | 
 two         | integer       | 
 four        | integer       | 
 ten         | integer       | 
 twenty      | integer       | 
 hundred     | integer       | 
 thousand    | integer       | 
 twothousand | integer       | 
 fivethous   | integer       | 
 tenthous    | integer       | 
 odd         | integer       | 
 even        | integer       | 
 stringu1    | name          | 
 stringu2    | name          | 
 string4     | name          | 
Check constraints:
    "mpp6612_1_prt_aa_1_check" CHECK (unique1 >= 0 AND unique1 < 500)
Inherits: mpp6612
Distributed by: (unique1)

Table "bfv_partition.mpp6612_1_prt_aa_2"
   Column    |     Type      | Modifiers 
-------------+---------------+-----------
 unique1     | integer       | 
 unique2     | character(10) | 
 two         | integer       | 
 four        | integer       | 
 ten         | integer       | 
 twenty      | integer       | 
 hundred     | integer       | 
 thousand    | integer       | 
 twothousand | integer       | 
 fivethous   | integer       | 
 tenthous    | integer       | 
 odd         | integer       | 
 even        | integer       | 
 stringu1    | name          | 
 stringu2    | name          | 
 string4     | name          | 
Check constraints:
    "mpp6612_1_prt_aa_2_check" CHECK (unique1 >= 500 AND unique1 < 1000)
Inherits: mpp6612
Distributed by: (unique1)

Table "bfv_partition.mpp6612_1_prt_default_part"
   Column    |     Type      | Modifiers 
-------------+---------------+-----------
 unique1     | integer       | 
 unique2     | character(10) | 
 two         | integer       | 
 four        | integer       | 
 ten         | integer       | 
 twenty      | integer       | 
 hundred     | integer       | 
 thousand    | integer       | 
 twothousand | integer       | 
 fivethous   | integer       | 
 tenthous    | integer       | 
 odd         | integer       | 
 even        | integer       | 
 stringu1    | name          | 
 stringu2    | name          | 
 string4     | name          | 
Inherits: mpp6612
Distributed by: (unique1)

-- Modify the partion definition. MPP-3724
-- alter table mpp6612 alter column unique1 type char(10); -- This should fail
-- alter table mpp6612 alter column unique1 type int8;
-- Show the dsecription
-- \d mpp6612*
drop table mpp6612;
create table mpp4048 (aaa int, bbb date)
partition by range (bbb)
subpartition by range (bbb)
subpartition by range (bbb)
(
partition y2008 start (date '2008-01-01') end (date '2009-01-01')
(
  subpartition dec start (date '2008-12-01') end (date '2009-01-01') (start (date '2008-12-01') end (date '2009-01-01') every (interval '1 day'))
));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'aaa' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008" for table "mpp4048"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec" for table "mpp4048_1_prt_y2008"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_1" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_2" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_3" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_4" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_5" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_6" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_7" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_8" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_9" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_10" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_11" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_12" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_13" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_14" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_15" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_16" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_17" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_18" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_19" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_20" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_21" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_22" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_23" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_24" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_25" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_26" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_27" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_28" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_29" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_30" for table "mpp4048_1_prt_y2008_2_prt_dec"
NOTICE:  CREATE TABLE will create partition "mpp4048_1_prt_y2008_2_prt_dec_3_prt_31" for table "mpp4048_1_prt_y2008_2_prt_dec"
drop table mpp4048;
-- This is only for ADD primary key for partition table
-- DROP primary key is still in progress
-- MPP-6573
CREATE TABLE mpp6573 (id int, date date, amt decimal(10,2)) 
DISTRIBUTED BY (id) 
PARTITION BY RANGE (date) 
( START (date '2008-01-01') INCLUSIVE 
   END (date '2008-01-03') EXCLUSIVE 
   EVERY (INTERVAL '1 day') );
NOTICE:  CREATE TABLE will create partition "mpp6573_1_prt_1" for table "mpp6573"
NOTICE:  CREATE TABLE will create partition "mpp6573_1_prt_2" for table "mpp6573"
alter table mpp6573 add primary key (id, date) ;
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "mpp6573_pkey" for table "mpp6573"
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "mpp6573_1_prt_1_pkey" for table "mpp6573_1_prt_1"
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "mpp6573_1_prt_2_pkey" for table "mpp6573_1_prt_2"
\d mpp6573*
   Table "bfv_partition.mpp6573"
 Column |     Type      | Modifiers 
--------+---------------+-----------
 id     | integer       | not null
 date   | date          | not null
 amt    | numeric(10,2) | 
Indexes:
    "mpp6573_pkey" PRIMARY KEY, btree (id, date)
Number of child tables: 2 (Use \d+ to list them.)
Distributed by: (id)
Partition by: (date)

Table "bfv_partition.mpp6573_1_prt_1"
 Column |     Type      | Modifiers 
--------+---------------+-----------
 id     | integer       | not null
 date   | date          | not null
 amt    | numeric(10,2) | 
Indexes:
    "mpp6573_1_prt_1_pkey" PRIMARY KEY, btree (id, date)
Check constraints:
    "mpp6573_1_prt_1_check" CHECK (date >= '01-01-2008'::date AND date < '01-02-2008'::date)
Inherits: mpp6573
Distributed by: (id)

Index "bfv_partition.mpp6573_1_prt_1_pkey"
 Column |  Type   | Definition 
--------+---------+------------
 id     | integer | id
 date   | date    | date
primary key, btree, for table "bfv_partition.mpp6573_1_prt_1"

Table "bfv_partition.mpp6573_1_prt_2"
 Column |     Type      | Modifiers 
--------+---------------+-----------
 id     | integer       | not null
 date   | date          | not null
 amt    | numeric(10,2) | 
Indexes:
    "mpp6573_1_prt_2_pkey" PRIMARY KEY, btree (id, date)
Check constraints:
    "mpp6573_1_prt_2_check" CHECK (date >= '01-02-2008'::date AND date < '01-03-2008'::date)
Inherits: mpp6573
Distributed by: (id)

Index "bfv_partition.mpp6573_1_prt_2_pkey"
 Column |  Type   | Definition 
--------+---------+------------
 id     | integer | id
 date   | date    | date
primary key, btree, for table "bfv_partition.mpp6573_1_prt_2"

Index "bfv_partition.mpp6573_pkey"
 Column |  Type   | Definition 
--------+---------+------------
 id     | integer | id
 date   | date    | date
primary key, btree, for table "bfv_partition.mpp6573"

drop table mpp6573;
-- MPP-6724
-- Dummy select to give atmsort a cluebat that it's not processing a result
-- set right now. It gets confused by some of the errors from above.
select 1 as foobar;
 foobar 
--------
      1
(1 row)

-- start_matchsubs
-- m/mpp6724_1_prt_r\d+/
-- s/(mpp6724_1_prt_r)\d+/$1xxxxxx/g
-- end_matchsubs
create table mpp6724 ( c1 int, dt DATE, c2 varchar, PRIMARY KEY ( c1,dt ) ) distributed by (c1) partition by range ( dt ) ( start ( date '2009-01-01' ) inclusive end ( date '2009-01-03' ) EXCLUSIVE EVERY ( INTERVAL '1 day' ) );
NOTICE:  CREATE TABLE will create partition "mpp6724_1_prt_1" for table "mpp6724"
NOTICE:  CREATE TABLE will create partition "mpp6724_1_prt_2" for table "mpp6724"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp6724_pkey" for table "mpp6724"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp6724_1_prt_1_pkey" for table "mpp6724_1_prt_1"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp6724_1_prt_2_pkey" for table "mpp6724_1_prt_2"
insert into mpp6724 values ( 1,'2009-01-01','One'), (2,'2009-01-02','Two'),(3,'2009-01-01','three'), (3,'2009-01-02', 'three`');
insert into mpp6724 values ( 1,'2009-01-01','One'); -- This violate the primary key, expected to fail
ERROR:  duplicate key value violates unique constraint "mpp6724_1_prt_1_pkey"  (seg0 127.0.0.1:40000 pid=32487)
DETAIL:  Key (c1, dt)=(1, 01-01-2009) already exists.
alter table mpp6724 add partition start ( date '2009-01-03' ) inclusive end ( date '2009-01-04' ) ;
NOTICE:  CREATE TABLE will create partition "mpp6724_1_prt_r1600720188" for table "mpp6724"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "mpp6724_1_prt_r1600720188_pkey" for table "mpp6724_1_prt_r1600720188"
insert into mpp6724 values ( 4,'2009-01-03','Four');
-- Should fail because violates the primary key
insert into mpp6724 values ( 4,'2009-01-03','Four');
ERROR:  duplicate key value violates unique constraint "mpp6724_1_prt_r1600720188_pkey"  (seg1 127.0.0.1:40001 pid=32489)
DETAIL:  Key (c1, dt)=(4, 01-03-2009) already exists.
insert into mpp6724 values ( 4,'2009-01-03','Four');
ERROR:  duplicate key value violates unique constraint "mpp6724_1_prt_r1600720188_pkey"  (seg1 127.0.0.1:40001 pid=32489)
DETAIL:  Key (c1, dt)=(4, 01-03-2009) already exists.
insert into mpp6724 values ( 4,'2009-01-03','Four');
ERROR:  duplicate key value violates unique constraint "mpp6724_1_prt_r1600720188_pkey"  (seg1 127.0.0.1:40001 pid=32489)
DETAIL:  Key (c1, dt)=(4, 01-03-2009) already exists.
insert into mpp6724 values ( 4,'2009-01-03','Four');
ERROR:  duplicate key value violates unique constraint "mpp6724_1_prt_r1600720188_pkey"  (seg1 127.0.0.1:40001 pid=32489)
DETAIL:  Key (c1, dt)=(4, 01-03-2009) already exists.
select c1, dt, count(*) from mpp6724 group by 1,2 having count(*) > 1;
 c1 | dt | count 
----+----+-------
(0 rows)

drop table mpp6724;
-- MPP-6247
-- Delete Using on partitioned table causes repetitive scans on using table	
create table mpp6247_foo ( c1 int, dt date ) distributed by ( c1 ) partition by range (dt) ( start ( date '2009-05-01' ) end ( date '2009-05-11' ) every ( interval '1 day' ) );
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_1" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_2" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_3" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_4" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_5" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_6" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_7" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_8" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_9" for table "mpp6247_foo"
NOTICE:  CREATE TABLE will create partition "mpp6247_foo_1_prt_10" for table "mpp6247_foo"
create table mpp6247_bar (like mpp6247_foo);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause, defaulting to distribution columns from LIKE table
-- EXPECT: Single HJ after partition elimination instead of sequence of HJ under Append
select count_operator('delete from mpp6247_foo using mpp6247_bar where mpp6247_foo.c1 = mpp6247_bar.c1 and mpp6247_foo.dt = ''2009-05-03''', 'Hash Join');
 count_operator 
----------------
              1
(1 row)

drop table mpp6247_bar;
drop table mpp6247_foo;
--
-- Test partition elimination, MPP-7891
--
-- cleanup
-- start_ignore
drop table if exists r_part;
NOTICE:  table "r_part" does not exist, skipping
drop table if exists r_co;
NOTICE:  table "r_co" does not exist, skipping
deallocate f1;
ERROR:  prepared statement "f1" does not exist
deallocate f2;
ERROR:  prepared statement "f2" does not exist
deallocate f3;
ERROR:  prepared statement "f3" does not exist
-- end_ignore
create table r_part(a int, b int) partition by range(a) (start (1) end(10) every(1));
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_1" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_2" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_3" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_4" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_5" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_6" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_7" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_8" for table "r_part"
NOTICE:  CREATE TABLE will create partition "r_part_1_prt_9" for table "r_part"
create table r_co(a int, b int) with (orientation=column, appendonly=true) partition by range(a) (start (1) end(10) every(1)) ;
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_1" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_2" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_3" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_4" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_5" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_6" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_7" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_8" for table "r_co"
NOTICE:  CREATE TABLE will create partition "r_co_1_prt_9" for table "r_co"
insert into r_part values (1,1), (2,2), (3,3);
select * from r_part order by a,b;
 a | b 
---+---
 1 | 1
 2 | 2
 3 | 3
(3 rows)

analyze r_part;
explain select * from r_part r1, r_part r2 where r1.a=1; -- should eliminate partitions in the r1 copy of r_part
                                                       QUERY PLAN                                                       
------------------------------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice2; segments: 3)  (cost=0.00..1324032.36 rows=3 width=16)
   ->  Nested Loop  (cost=0.00..1324032.36 rows=1 width=16)
         Join Filter: true
         ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
               ->  Partition Selector for r_part (dynamic scan id: 2)  (cost=10.00..100.00 rows=34 width=4)
                     Partitions selected: 9 (out of 9)
               ->  Dynamic Table Scan on r_part (dynamic scan id: 2)  (cost=0.00..431.00 rows=1 width=8)
         ->  Materialize  (cost=0.00..431.00 rows=1 width=8)
               ->  Broadcast Motion 3:3  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=8)
                     ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
                           ->  Partition Selector for r_part (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                                 Filter: bfv_partition.r_part.a = 1
                                 Partitions selected: 1 (out of 9)
                           ->  Dynamic Table Scan on r_part (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
                                 Filter: a = 1
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(17 rows)

explain select * from r_part where a in (1,2); -- should eliminate partitions
                                              QUERY PLAN                                              
------------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=3 width=8)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
         ->  Partition Selector for r_part (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: a = 1 OR a = 2
               Partitions selected: 2 (out of 9)
         ->  Dynamic Table Scan on r_part (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
               Filter: a = ANY ('{1,2}'::integer[])
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

-- Test partition elimination in prepared statements
prepare f1(int) as select * from r_part where a = 1 order by a,b; 
prepare f2(int) as select * from r_part where a = $1 order by a,b;
execute f1(1); 
 a | b 
---+---
 1 | 1
(1 row)

execute f2(1); 
 a | b 
---+---
 1 | 1
(1 row)

execute f2(2); 
 a | b 
---+---
 2 | 2
(1 row)

explain select * from r_part where a = 1 order by a,b; -- should eliminate partitions
                                                 QUERY PLAN                                                 
------------------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=1 width=8)
   Merge Key: a, b
   ->  Sort  (cost=0.00..431.00 rows=1 width=8)
         Sort Key: a, b
         ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
               ->  Partition Selector for r_part (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Filter: a = 1
                     Partitions selected: 1 (out of 9)
               ->  Dynamic Table Scan on r_part (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
                     Filter: a = 1
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(12 rows)

--force_explain
explain execute f1(1); -- should eliminate partitions 
                                                 QUERY PLAN                                                 
------------------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=1 width=8)
   Merge Key: a, b
   ->  Sort  (cost=0.00..431.00 rows=1 width=8)
         Sort Key: a, b
         ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
               ->  Partition Selector for r_part (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Filter: a = 1
                     Partitions selected: 1 (out of 9)
               ->  Dynamic Table Scan on r_part (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
                     Filter: a = 1
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(12 rows)

--force_explain
explain execute f2(2); -- should eliminate partitions
                                                 QUERY PLAN                                                 
------------------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=1 width=8)
   Merge Key: a, b
   ->  Sort  (cost=0.00..431.00 rows=1 width=8)
         Sort Key: a, b
         ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
               ->  Partition Selector for r_part (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Filter: a = 2
                     Partitions selected: 1 (out of 9)
               ->  Dynamic Table Scan on r_part (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
                     Filter: a = 2
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(12 rows)

-- Test partition elimination on CO tables
insert into r_co values (1,1), (2,2), (3,3);
analyze r_co; 
explain select * from r_co where a=2; -- should eliminate partitions
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=1 width=8)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
         ->  Partition Selector for r_co (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: a = 2
               Partitions selected: 1 (out of 9)
         ->  Dynamic Table Scan on r_co (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
               Filter: a = 2
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

-- test partition elimination in prepared statements on CO tables
prepare f3(int) as select * from r_co where a = $1 order by a,b; 
--force_explain
explain execute f3(2); -- should eliminate partitions
                                                QUERY PLAN                                                
----------------------------------------------------------------------------------------------------------
 Gather Motion 1:1  (slice1; segments: 1)  (cost=0.00..431.00 rows=1 width=8)
   Merge Key: a, b
   ->  Sort  (cost=0.00..431.00 rows=1 width=8)
         Sort Key: a, b
         ->  Sequence  (cost=0.00..431.00 rows=1 width=8)
               ->  Partition Selector for r_co (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
                     Filter: a = 2
                     Partitions selected: 1 (out of 9)
               ->  Dynamic Table Scan on r_co (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=8)
                     Filter: a = 2
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(12 rows)

-- start_ignore
drop table r_part;
drop table r_co;
deallocate f1;
deallocate f2;
deallocate f3;
-- end_ignore
--
-- Test partition elimination, MPP-7891
--
-- start_ignore
drop table if exists fact;
NOTICE:  table "fact" does not exist, skipping
deallocate f1;
ERROR:  prepared statement "f1" does not exist
create table fact(x int, dd date, dt text) distributed by (x) partition by range (dd) ( start('2008-01-01') end ('2320-01-01') every(interval '100 years'));
NOTICE:  CREATE TABLE will create partition "fact_1_prt_1" for table "fact"
NOTICE:  CREATE TABLE will create partition "fact_1_prt_2" for table "fact"
NOTICE:  CREATE TABLE will create partition "fact_1_prt_3" for table "fact"
NOTICE:  CREATE TABLE will create partition "fact_1_prt_4" for table "fact"
-- end_ignore
analyze fact;
select '2009-01-02'::date = to_date('2009-01-02','YYYY-MM-DD'); -- ensure that both are in fact equal
 ?column? 
----------
 t
(1 row)

explain select * from fact where dd < '2009-01-02'::date; -- partitions eliminated
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=16)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
         ->  Partition Selector for fact (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: dd < '01-02-2009'::date
               Partitions selected: 1 (out of 4)
         ->  Dynamic Table Scan on fact (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
               Filter: dd < '01-02-2009'::date
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

explain select * from fact where dd < to_date('2009-01-02','YYYY-MM-DD'); -- partitions eliminated
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=16)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
         ->  Partition Selector for fact (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: dd < '01-02-2009'::date
               Partitions selected: 1 (out of 4)
         ->  Dynamic Table Scan on fact (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
               Filter: dd < '01-02-2009'::date
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

explain select * from fact where dd < current_date; --partitions eliminated
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=16)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
         ->  Partition Selector for fact (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: dd < '10-22-2017'::date
               Partitions selected: 1 (out of 4)
         ->  Dynamic Table Scan on fact (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
               Filter: dd < '10-22-2017'::date
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

-- Test partition elimination in prepared statements
prepare f1(date) as select * from fact where dd < $1;
-- force_explain
explain execute f1('2009-01-02'::date); -- should eliminate partitions
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=16)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
         ->  Partition Selector for fact (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: dd < '01-02-2009'::date
               Partitions selected: 1 (out of 4)
         ->  Dynamic Table Scan on fact (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
               Filter: dd < '01-02-2009'::date
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

-- force_explain
explain execute f1(to_date('2009-01-02', 'YYYY-MM-DD')); -- should eliminate partitions
                                             QUERY PLAN                                             
----------------------------------------------------------------------------------------------------
 Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..431.00 rows=1 width=16)
   ->  Sequence  (cost=0.00..431.00 rows=1 width=16)
         ->  Partition Selector for fact (dynamic scan id: 1)  (cost=10.00..100.00 rows=34 width=4)
               Filter: dd < '01-02-2009'::date
               Partitions selected: 1 (out of 4)
         ->  Dynamic Table Scan on fact (dynamic scan id: 1)  (cost=0.00..431.00 rows=1 width=16)
               Filter: dd < '01-02-2009'::date
 Settings:  optimizer=on
 Optimizer status: PQO version 2.47.1
(9 rows)

-- start_ignore
drop table fact;
deallocate f1;
-- end_ignore
-- Test for partition cleanup
-- start_ignore
drop schema partition_999 cascade;
ERROR:  schema "partition_999" does not exist
create schema partition_999;
set search_path=bfv_partition,partition_999;
-- end_ignore
create table partition_cleanup1 (a int, b int, c int, d int, e int, f int, g int, h int, i int, j int, k int, l int, m int, n int, o int, p int, q int, r int, s int, t int, u int, v int, w int, x int, y int, z int)
partition by range (a)
( partition aa start (1) end (10) every (1) );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_1" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_2" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_3" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_4" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_5" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_6" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_7" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_8" for table "partition_cleanup1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup1_1_prt_aa_9" for table "partition_cleanup1"
CREATE TABLE partition_999.partition_cleanup2(a int, b int, c int, d int, e int, f int, g int, h int, i int, j int, k int, l int, m int, n int, o int, p int, q int, r int, s int, t int, u int, v int, w int, x int, y int, z int)
partition by range (a)
subpartition by range (b) subpartition template ( start (1) end (10) every (1))
( partition aa start (1) end (10) every (1) );
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_1" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_2" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_3" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_4" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_5" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_6" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_7" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_8" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_1_2_prt_9" for table "partition_cleanup2_1_prt_aa_1"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_1" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_2" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_3" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_4" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_5" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_6" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_7" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_8" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_2_2_prt_9" for table "partition_cleanup2_1_prt_aa_2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_1" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_2" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_3" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_4" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_5" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_6" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_7" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_8" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_3_2_prt_9" for table "partition_cleanup2_1_prt_aa_3"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_1" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_2" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_3" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_4" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_5" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_6" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_7" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_8" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_4_2_prt_9" for table "partition_cleanup2_1_prt_aa_4"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_1" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_2" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_3" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_4" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_5" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_6" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_7" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_8" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_5_2_prt_9" for table "partition_cleanup2_1_prt_aa_5"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_1" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_2" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_3" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_4" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_5" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_6" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_7" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_8" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_6_2_prt_9" for table "partition_cleanup2_1_prt_aa_6"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_1" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_2" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_3" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_4" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_5" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_6" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_7" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_8" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_7_2_prt_9" for table "partition_cleanup2_1_prt_aa_7"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_1" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_2" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_3" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_4" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_5" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_6" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_7" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_8" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_8_2_prt_9" for table "partition_cleanup2_1_prt_aa_8"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9" for table "partition_cleanup2"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_1" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_2" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_3" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_4" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_5" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_6" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_7" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_8" for table "partition_cleanup2_1_prt_aa_9"
NOTICE:  CREATE TABLE will create partition "partition_cleanup2_1_prt_aa_9_2_prt_9" for table "partition_cleanup2_1_prt_aa_9"
drop table partition_cleanup1;
drop schema partition_999 cascade;
NOTICE:  drop cascades to table partition_cleanup2
-- These should be empty
select 'pg_partition_columns', count(*) from pg_partition_columns where tablename='partition_cleanup%';
       ?column?       | count 
----------------------+-------
 pg_partition_columns |     0
(1 row)

select 'pg_partitions', count(*) from pg_partitions where tablename='partition_cleanup%';
   ?column?    | count 
---------------+-------
 pg_partitions |     0
(1 row)

select 'pg_partition_templates', count(*) from pg_partition_templates where tablename='partition_cleanup%';
        ?column?        | count 
------------------------+-------
 pg_partition_templates |     0
(1 row)

-- CLEANUP
-- start_ignore
drop schema if exists bfv_partition cascade;
NOTICE:  drop cascades to 2 other objects
DETAIL:  drop cascades to function count_operator(text,text)
drop cascades to function find_operator(text,text)
DROP USER mpp3641_user;
-- end_ignore
